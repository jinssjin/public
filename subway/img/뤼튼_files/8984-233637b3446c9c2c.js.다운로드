"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8984,2346],{36856:function(e,t,n){n.d(t,{WQ:function(){return AssignmentChangedProvider},PO:function(){return AssignmentFileProvider},no:function(){return AssignmentLinkProvider},GN:function(){return AssignmentProvider},N3:function(){return AssignmentStepProvider},Z6:function(){return AssignmentValidationProvider},Yh:function(){return l},qP:function(){return d},nf:function(){return m},_U:function(){return x},jw:function(){return f},ZH:function(){return u}});var o=n(54067),r=n(44194),i=n(53889);let a=(0,r.createContext)(null),AssignmentChangedProvider=e=>{let{children:t}=e,[n,i]=(0,r.useState)({description:!1,topic:!1}),l=(0,r.useCallback)((e,t)=>{i(n=>({...n,[e]:t}))},[]),c=(0,r.useMemo)(()=>({hasChanged:n,updateHasChanged:l}),[n,l]);return(0,o.tZ)(a.Provider,{value:c,children:t})},l=(0,i.TR)(a,"[AssignmentChangedProvider] cannot find context provider"),c=(0,r.createContext)(null),AssignmentProvider=e=>{let{data:t,children:n}=e,[i,a]=(0,r.useState)({_id:(null==t?void 0:t._id)||"",userInstruction:(null==t?void 0:t.userInstruction)||"",pageLength:(null==t?void 0:t.pageLength)||1,userId:(null==t?void 0:t.userId)||"",referenceIds:(null==t?void 0:t.referenceIds)||[],chatId:(null==t?void 0:t.chatId)||"",requestId:(null==t?void 0:t.requestId)||"",status:(null==t?void 0:t.status)||"",createdAt:(null==t?void 0:t.createdAt)||"",updatedAt:(null==t?void 0:t.updatedAt)||"",topics:(null==t?void 0:t.topics)||[],selectedTopic:(null==t?void 0:t.selectedTopic)||"",step:(null==t?void 0:t.step)||0,outlines:(null==t?void 0:t.outlines)||[]}),{updateHasChanged:d}=l(),s=(0,r.useCallback)(e=>{a(t=>({...t,...e}))},[]),u=(0,r.useCallback)(()=>{a({_id:"",userInstruction:"",pageLength:1,userId:"",referenceIds:[],chatId:"",requestId:"",status:"",createdAt:"",updatedAt:"",topics:[],selectedTopic:"",step:0,outlines:[]})},[]),p=(0,r.useCallback)(e=>{a(t=>({...t,referenceIds:[...t.referenceIds,e]}))},[]),_=(0,r.useCallback)(e=>{a(t=>({...t,referenceIds:t.referenceIds.filter(t=>t!==e)}))},[]),[h,m]=(0,r.useState)([]),g=(0,r.useCallback)((e,t)=>{m(n=>{let o=[...n];return o[e]=t,o})},[]),x=(0,r.useMemo)(()=>({...i,updateAssignment:s,resetAssignment:u,addReferenceId:p,removeReferenceId:_,newOutlineTitles:h,updateOutlineTitles:g}),[i,s,u,p,_,h,g]);return(0,r.useEffect)(()=>{d&&d("description",!0)},[i.userInstruction,i.pageLength,i.referenceIds,d]),(0,r.useEffect)(()=>{d("topic",!0)},[i.selectedTopic,d]),(0,o.tZ)(c.Provider,{value:x,children:n})},d=(0,i.TR)(c,"[AssignmentProvider] cannot find context provider"),s=(0,r.createContext)(null),AssignmentValidationProvider=e=>{let{children:t}=e,[n,i]=(0,r.useState)({valid:!1,error:""}),[a,l]=(0,r.useState)({valid:!1,error:""}),[c,d]=(0,r.useState)([]),[u,p]=(0,r.useState)([]),_=(0,r.useCallback)((e,t,n)=>{let{valid:o,error:r}=t;"userInstruction"===e?i({valid:o,error:r}):"selectedTopic"===e?l({valid:o,error:r}):void 0!==n&&"outlineTitle"===e?d(e=>{let t=[...e];return t[n]={valid:o,error:r},t}):void 0!==n&&"outlineContent"===e&&p(e=>{let t=[...e];return t[n]={valid:o,error:r},t})},[]),h=(0,r.useCallback)((e,t)=>{"userInstruction"===e?i({valid:!1,error:""}):"selectedTopic"===e?l({valid:!1,error:""}):void 0!==t&&"outlineTitle"===e?d(e=>{let n=[...e];return n[t]={valid:!1,error:""},n}):void 0!==t&&"outlineContent"===e&&p(e=>{let n=[...e];return n[t]={valid:!1,error:""},n})},[]),m=(0,r.useMemo)(()=>({userInstructionValidation:n,selectedTopicValidation:a,outlineTitleValidation:c,outlineContentValidation:u,updateValidationError:_,resetValidation:h}),[n,a,c,u,_,h]);return(0,o.tZ)(s.Provider,{value:m,children:t})},u=(0,i.TR)(s,"[AssignmentValidationProvider] cannot find context provider");var p=n(45570);let _=(0,p.cn)({key:"assignmentFileState",default:[]}),h=(0,r.createContext)(null),AssignmentFileProvider=e=>{let{children:t}=e,[n,i]=(0,p.FV)(_),a=(0,r.useCallback)(e=>{i(t=>[...t,e])},[i]),l=(0,r.useCallback)((e,t)=>{i(n=>n.map(n=>n._id===e?{...n,...t}:n))},[i]),c=(0,r.useCallback)(e=>{i(t=>t.filter(t=>t._id!==e))},[i]),d=(0,r.useMemo)(()=>n.length,[n]),s=(0,r.useMemo)(()=>({files:n,addFile:a,updateFile:l,removeFile:c,fileCount:d}),[n,a,l,c,d]);return(0,o.tZ)(h.Provider,{value:s,children:t})},m=(0,i.TR)(h,"[AssignmentFileProvider] cannot find context provider"),g=(0,r.createContext)(null),AssignmentLinkProvider=e=>{let{children:t}=e,[n,i]=(0,r.useState)([]),a=(0,r.useCallback)(e=>{i(t=>[...t,e])},[]),l=(0,r.useCallback)(e=>{i(t=>t.filter(t=>t._id!==e))},[]),c=(0,r.useCallback)((e,t)=>{i(n=>n.map(n=>n._id===e?{...n,...t}:n))},[]),d=(0,r.useMemo)(()=>n.length,[n]),s=(0,r.useMemo)(()=>({links:n,addLink:a,removeLink:l,updateLink:c,linkCount:d}),[n,a,l,c,d]);return(0,o.tZ)(g.Provider,{value:s,children:t})},x=(0,i.TR)(g,"[AssignmentLinkProvider] cannot find context provider"),v=(0,r.createContext)(null),AssignmentStepProvider=e=>{let{children:t}=e,[n,i]=(0,r.useState)({topic:!1,outline:!1}),[a,l]=(0,r.useState)({topic:!1,outline:!1}),c=(0,r.useCallback)((e,t)=>{i(n=>({...n,[e]:t}))},[]),d=(0,r.useCallback)((e,t)=>{l(n=>({...n,[e]:t}))},[]),s=(0,r.useMemo)(()=>({loading:n,updateLoading:c,error:a,updateError:d}),[n,a,c,d]);return(0,o.tZ)(v.Provider,{value:s,children:t})},f=(0,i.TR)(v,"[AssignmentStepProvider] cannot find context provider")},66323:function(e,t,n){n.d(t,{qf:function(){return useAssignment},Pu:function(){return useGenerateAssignmentOutlines},FH:function(){return useGenerateAssignmentTopics},c7:function(){return usePostAssignment},Oi:function(){return usePostAssignmentFile},xl:function(){return usePostAssignmentLink}});var o=n(93677),r=n(20381);let getAssignment=async()=>await o.Np.William.get("/write-assignment"),useAssignment=()=>(0,r.dH)("/assignment",()=>getAssignment(),{revalidateOnFocus:!1}),generateAssignmentTopics=async e=>await o.Np.William.put("/write-assignment/".concat(e,"/topics")),useGenerateAssignmentTopics=e=>(0,r._5)("/write-assignment/topics",()=>generateAssignmentTopics(e)),generateAssignmentOutlines=async e=>{let{assignmentId:t,selectedTopic:n}=e;return await o.Np.William.put("/write-assignment/".concat(t,"/outlines"),{selectedTopic:n})},useGenerateAssignmentOutlines=()=>(0,r._5)("/write-assignment/outlines",async(e,t)=>{let{arg:n}=t;return await generateAssignmentOutlines(n)}),postAssignmentFile=async e=>{let{fileUuid:t,extension:n,title:r}=e;return await o.Np.William.post("/write-assignment/file",{fileUuid:t,extension:n,title:r})},usePostAssignmentFile=()=>(0,r._5)("/write-assignment/file",async(e,t)=>{let{arg:n}=t;return await postAssignmentFile(n)}),postAssignmentLink=async e=>{let{url:t,favicon:n,title:r}=e;return await o.Np.William.post("/write-assignment/link",{url:t,favicon:n,title:r})},usePostAssignmentLink=()=>(0,r._5)("/write-assignment/link",async(e,t)=>{let{arg:n}=t;return await postAssignmentLink(n)}),postAssignment=async e=>{let{userInstruction:t,pageLength:n,referenceIds:r}=e;return await o.Np.William.post("/write-assignment",{userInstruction:t,pageLength:n,referenceIds:r})},usePostAssignment=()=>(0,r._5)("/write-assignment",async(e,t)=>{let{arg:n}=t;return await postAssignment(n)})},74548:function(e,t,n){n.d(t,{X:function(){return useChatHomeContext},c:function(){return ChatHomeProvider}});var o=n(54067),r=n(44194),i=n(51856),a=n(22584);let l=(0,r.createContext)({unitList:[],selectedUnit:null,setSelectedUnit:()=>{},chatInputRef:null,scrollRef:null,isRedirecting:!1,setIsRedirecting:()=>{}}),ChatHomeProvider=e=>{let{children:t}=e,[n,c]=(0,r.useState)(!1),{value:d,setItem:s}=(0,a.Xs)("TEMP_UNIT",null),u=(0,r.useRef)(null),p=(0,r.useRef)(null),{data:_}=(0,i.u7)();return(0,r.useEffect)(()=>{!d&&_&&_.length>0&&s(null==_?void 0:_[0])},[_,d]),(0,o.tZ)(l.Provider,{value:{isRedirecting:n,setIsRedirecting:c,chatInputRef:u,scrollRef:p,selectedUnit:d,setSelectedUnit:s,unitList:_},children:t})},useChatHomeContext=()=>(0,r.useContext)(l)},24719:function(e,t,n){n.d(t,{Q:function(){return c},b:function(){return DefaultChatInputStateProvider}});var o=n(54067),r=n(44194),i=n(22584),a=n(53889);let l=(0,r.createContext)(null),DefaultChatInputStateProvider=e=>{let{children:t}=e,[n,a]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),{value:s,removeItem:u}=(0,i.Xs)("CHAT_HOME_INPUT_STATE_SESSION_KEY",""),p=(0,r.useCallback)(e=>{a(e)},[]),_=(0,r.useCallback)(e=>{d(e)},[]),h=(0,r.useMemo)(()=>({input:n,changeInput:p,isFocus:c,changeFocus:_}),[p,n,c,_]);return(0,r.useEffect)(()=>(s&&(a(s),u()),()=>{u()}),[]),(0,o.tZ)(l.Provider,{value:h,children:t})},c=(0,a.TR)(l,"[DefaultChatInputStateProvider] cannot find context provider")},33178:function(e,t,n){n.d(t,{M:function(){return u},R:function(){return SelectModelWithChatHomeV2Provider}});var o=n(54067),r=n(44194),i=n(22584),a=n(11785),l=n(22229),c=n(53889),d=n(34867);let s=(0,r.createContext)(null),SelectModelWithChatHomeV2Provider=e=>{let{children:t}=e,{value:n,setItem:c}=(0,i._)("SELECTED_MODEL",null),{searchParams:u}=(0,l.je)(),p=u.has("qi"),{id:_}=(0,a.Jv)(),{id:h}=(0,a.mn)(),{id:m}=(0,a._n)(),{isLoading:g,user:x}=(0,d.aF)(),v=!!(!g&&(null==x?void 0:x._id)),f=p?_:void 0,b=(0,r.useMemo)(()=>f||(v?h:_),[f,v,h,_]),y=(0,r.useMemo)(()=>f?null:n,[f,n]),[C,k]=(0,r.useState)(),{data:w}=(0,a.l_)(),Z=(0,r.useMemo)(()=>null!=w?w:[],[w]),I=(0,r.useMemo)(()=>(null==C?void 0:C._id)===h||(null==C?void 0:C._id)===m,[null==C?void 0:C._id,h,m]),O=(0,r.useCallback)(e=>{k(e),f||c(e._id)},[f,c]),S=(0,r.useMemo)(()=>({modelList:Z,selectedModel:C,isProMode:I,selectModel:O}),[Z,I,O,C]);return(0,r.useEffect)(()=>{var e;let t=null!==(e=null!=y?y:null==C?void 0:C._id)&&void 0!==e?e:b;k(Z.find(e=>{let{_id:n}=e;return n===t}))},[b,Z,null==C?void 0:C._id,y]),(0,o.tZ)(s.Provider,{value:S,children:t})},u=(0,c.TR)(s,"[SelectModelWithChatHomeV2Provider] cannot find context provider")},36352:function(e,t,n){n.d(t,{M2:function(){return o.M},Qc:function(){return i.Q},Rm:function(){return o.R},XV:function(){return r.X},c6:function(){return r.c}});var o=n(33178),r=n(74548),i=n(24719)},24071:function(e,t,n){n.d(t,{M:function(){return usePushChatRoom}});var o=n(43408),r=n(45036);n(22229);var i=n(81623),a=n(30008),l=n(70923);let usePushChatRoom=e=>{let t=(0,l.useRouter)(),n=(0,i.Zl)(r._8),c=(0,i.Zl)(r.yI),{handleOpenAnonymousDialog:d}=(0,a.Zr)(e),{createChatMutation:s,refetch:u}=(0,o.h)(),onMakeNewChat=async(e,o)=>{let{unitId:r,input:i,isChocoChip:a,images:l,from:p,adId:_,inventory:h,chatId:m,mobileAllowedQuery:g}=e;if(!r||r.length<1)return{newChatCreated:!1};let x=d();if(!x)return{newChatCreated:!1};p||n({input:i,isChocoChip:a||!1,images:l||[],adId:_}),"chatRoom"===p&&c(-1);let v=m;if(m)u();else{let e=await s(r);v=e._id}return"chatRoom"===p&&(c(1),n({input:i,isChocoChip:a||!1,images:l||[],chatId:v})),t.push("/chat/u/".concat(r,"/c/").concat(v).concat(h?"?inventory=".concat(h):"").concat(g?"".concat(h?"&":"?","input_kb"):"")),null==o||o(),{newChatCreated:!0}};return{onMakeNewChat,onMoveToLanding:e=>{let{unitId:n}=e;n&&!(n.length<1)&&t.push("/chat/u/".concat(n))}}}},28984:function(e,t,n){n.d(t,{nT:function(){return AppAdChatRoomPageHome},RE:function(){return AppChatHomePage},$0:function(){return AppTrendAiSearchPage},pe:function(){return AssignmentPage},qE:function(){return ChatHomePage},g7:function(){return ChatLayout},PS:function(){return ChatRoomPage},Nq:function(){return ChatRoomV2Page},Di:function(){return LegacyHome}});var o,r,i,a,l,c,d,s,u,p,_,h,m,g,x,v,f,b,y,C,k,w,Z,I,O,S,B,$,A,M,R,j,E,T,L,F,P,U=n(54067),D=n(5079),X=n(44194),J=n(35237),z=n(60819),N=n(22584),H=n(63040),G=n(16660),W=n(22229);function _templateObject(){let e=(0,D._)(["\n            line-height: 130%;\n          "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,D._)(["\n              line-height: 130%;\n            "]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,D._)(["\n              box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.25);\n            "]);return _templateObject2=function(){return e},e}let MobileGuideView=()=>{let{push:e}=(0,W.tv)(),{trackEvent:t}=(0,H.Ke)(),n=(0,G.T_)(),o=(0,N.ac)("(max-width: 539px)");return(0,X.useEffect)(()=>{t("view_mobile_app_download_recommend_page ")},[]),(0,U.BX)(z.gC,{width:"100%",minHeight:"calc(100dvh - 48px)",overflow:"hidden",position:"relative",children:[(0,U.BX)(z.gC,{gap:"31px",children:[(0,U.tZ)(z.Ug,{width:"100%",justifyContent:"center",paddingTop:"150px",children:(0,U.tZ)(z.xu,{width:["89px","123px"],children:(0,U.tZ)("img",{width:"100%",height:"auto",src:"https://fe-web-assets.wow.wrtn.ai/mobile-guide/app-icon.svg",alt:"app-logo"})})}),(0,U.tZ)(z.Jd,{typo:o?"$content-28-bold":"$content-48-bold",color:"$palette_gray_gray_black",textAlign:"center",paddingX:o?"44px":"22px",css:(0,J.iv)(_templateObject()),children:n("chat.feature_home.title")}),(0,U.BX)(z.gC,{gap:"15px",children:[(0,U.tZ)(z.Jd,{typo:o?"$100-18-semi":"$100-24-semi",color:"$color_text_tertiary",textAlign:"center",css:(0,J.iv)(_templateObject1()),paddingX:o?"76px":"128px",children:n("chat.feature_home.sub_title")}),(0,U.tZ)(z.Jd,{typo:o?"$100-15-semi":"$100-18-semi",color:"$color_text_brand",textAlign:"center",paddingX:o?"76px":"128px",children:n("chat.feature_home.can_use_character_mobile")})]}),(0,U.tZ)(z.xu,{height:o?"205px":"216px"})]}),(0,U.tZ)(z.xu,{width:"100%",paddingX:o?"32px":"36px",paddingBottom:"35px",position:"fixed",bottom:0,left:0,right:0,children:(0,U.BX)(z.gC,{width:"100%",gap:"14px",children:[(0,U.tZ)(z.zx,{width:"100%",height:o?"58px":"84px",borderRadius:"15px",backgroundColor:"$color_icon_white",onClick:()=>{t("click_go_character_home_btn_recommend_page"),e("/chat/character")},css:(0,J.iv)(_templateObject2()),children:(0,U.tZ)(z.Jd,{color:"$color_alert_surface",typo:o?"$100-20-semi":"$100-24-semi",children:n("chat.feature_home.navigate_character_home")})}),(0,U.tZ)(z.zx,{width:"100%",height:o?"58px":"84px",borderRadius:"15px",backgroundColor:"$color_alert_surface",onClick:()=>{t("click_app_download_btn_recommend_page"),window.open("https://agent.wrtn.ai/zhoxyo","_blank","noopener")},children:(0,U.tZ)(z.Jd,{color:"$color_surface_white",typo:o?"$100-20-semi":"$100-24-semi",children:n("chat.feature_home.use_app_free")})})]})}),(0,U.tZ)(z.xu,{backgroundImage:"url(https://fe-web-assets.wow.wrtn.ai/mobile-guide/circle.png)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"50%",width:o?"761px":"987px",height:o?"761px":"987px",position:"absolute",top:o?"346px":"439px",left:0,zIndex:"-1"})]})};var K=n(51585),V=n(92376),Y=n(12027),q=n(93677),Q=n(23144),ee=n(64859),et=n(20381),en=n(70923);let getEventModal=e=>q.Np.BE.get((0,Y.stringifyQueryParams)("/banner",{type:e,platform:(0,N.Xf)()}),{headers:{"Cache-Control":"no-store"}}),useEventModal=e=>{let{type:t}=e,{trackEvent:n}=(0,H.Ke)(),{pathname:o}=(0,en.useRouter)(),{data:r}=(0,et.dH)("/eventModal",()=>getEventModal(t)),{value:i,setItem:a}=(0,N._)("NONE_DISPLAY_EVENT_MODAL_ID"),l=Array.isArray(i)?i:[],c=(0,X.useMemo)(()=>l.filter(e=>{let{expires:t}=e;return(0,ee.RR)(new Date,new Date(t))}).map(e=>{let{id:t}=e;return t}),[l]),d=(0,X.useMemo)(()=>{var e;let t=null!==(e=null==r?void 0:r.filter(e=>{var t,n,r;return o.match((null===(t=e.options)||void 0===t?void 0:t.path)||"")&&!(null===(r=e.options)||void 0===r?void 0:null===(n=r.exceptPath)||void 0===n?void 0:n.some(e=>o.match(e)))}))&&void 0!==e?e:[];return c.length?t.filter(e=>!c.includes(e._id)):t},[r]);return{eventModalList:d,noneDisplayEventModal:e=>{n("click_event_modal_cta",{feature_name:null==e?void 0:e.name,link:o,btn_type:"not_see"});let t={id:e._id,expires:(0,ee.IH)(new Date,99,"year").toDate()},r=l?(0,Q.mN)([...l,t],"id"):[t];a(r)}}};var eo=n(22346),er=n(15290),ei=n(41671);function CloseActionComponent_templateObject(){let e=(0,D._)(["\n            @media (max-width: 480px) {\n              font-size: 12px;\n            }\n          "]);return CloseActionComponent_templateObject=function(){return e},e}let CloseActionComponent=e=>{let{item:t,closeModal:n,noneDisplayEventModal:o}=e,r=(0,G.T_)("event_modal"),{pathname:i}=(0,en.useRouter)(),{trackEvent:a}=(0,H.Ke)();return(0,U.tZ)(z.Ug,{width:"100%",children:(0,U.tZ)(z.zx,{width:"100%",height:[60,60,60,90],backgroundColor:"$palette_gray_gray_800",flexShrink:0,onClick:()=>{o(t),a("click_event_modal_cta",{feature_name:t.featureName,link:i,btn_type:"not_see",eventName:t.name}),n()},children:(0,U.tZ)(z.Jd,{typo:"$100-18-med",fontSize:[12,12,12,18],color:"$color_text_disabled",css:(0,J.iv)(CloseActionComponent_templateObject()),children:r("not_see_again")})})})};function MoveActionComponent_templateObject(){let e=(0,D._)(["\n            @media (max-width: 480px) {\n              font-size: 12px;\n            }\n          "]);return MoveActionComponent_templateObject=function(){return e},e}function MoveActionComponent_templateObject1(){let e=(0,D._)(["\n            @media (max-width: 480px) {\n              font-size: 12px;\n            }\n          "]);return MoveActionComponent_templateObject1=function(){return e},e}let MoveActionComponent=e=>{var t,n,o,r,i;let{item:a,closeModal:l,noneDisplayEventModal:c}=e,d=(0,G.T_)("event_modal"),{mediaQueries:s}=(0,er.TC)(),u=(0,N.ac)(s.desktop),{trackEvent:p}=(0,H.Ke)(),_=null!==(i=u?null===(t=a.linkOptions)||void 0===t?void 0:t.webLink:null!==(r=null===(n=a.linkOptions)||void 0===n?void 0:n.mobileWebLink)&&void 0!==r?r:null===(o=a.linkOptions)||void 0===o?void 0:o.webLink)&&void 0!==i?i:"";return(0,U.BX)(z.Ug,{width:"100%",children:[(0,U.tZ)(z.zx,{width:[100,100,100,150],height:[60,60,60,90],backgroundColor:"$palette_gray_gray_800",flexShrink:0,onClick:()=>{p("click_event_modal_cta",{feature_name:a.featureName,link:_,btn_type:"not_see",eventName:a.name}),c(a),l()},children:(0,U.tZ)(z.Jd,{typo:"$100-18-med",fontSize:[12,12,12,18],color:"$color_text_disabled",css:(0,J.iv)(MoveActionComponent_templateObject()),children:d("not_see_again")})}),(0,U.tZ)(z.zx,{width:"100%",height:[60,60,60,90],backgroundColor:"$color_surface_primary",onClick:()=>{p("click_event_modal_cta",{feature_name:a.featureName,link:_,btn_type:"start",eventName:a.name}),window.open(_,"_blank","noopener,noreferrer")},children:(0,U.tZ)(z.Jd,{typo:"$100-18-semi",fontSize:[12,12,12,18],color:"$color_text_ivory",css:(0,J.iv)(MoveActionComponent_templateObject1()),children:d("go_to_event")})})]})},EventModalContent=e=>{let{closeModal:t,item:n,noneDisplayEventModal:o}=e,{mediaQueries:r}=(0,er.TC)(),i=(0,N.ac)(r.desktop),{trackEvent:a}=(0,H.Ke)();return(0,X.useEffect)(()=>{var e,t,o,r,l;let c=null!==(l=i?null===(e=n.linkOptions)||void 0===e?void 0:e.webLink:null!==(r=null===(t=n.linkOptions)||void 0===t?void 0:t.mobileWebLink)&&void 0!==r?r:null===(o=n.linkOptions)||void 0===o?void 0:o.webLink)&&void 0!==l?l:"";a("view_event_modal",{feature_name:n.featureName,link:c,event_name:n.name})},[]),(0,U.BX)(z.gC,{width:[300,300,300,450],height:[360,360,360,630],maxWidth:"90vw",maxHeight:"90vh",backgroundSize:"contain",overflow:"hidden",borderRadius:"15px",backgroundImage:"url(".concat(n.mobileWebImageUrl?n.mobileWebImageUrl:n.imageUrl,")"),position:"relative",children:[(0,U.tZ)(z.gC,{width:"100%",height:"540px",children:(0,U.tZ)(z.Ug,{justifyContent:"flex-end",padding:[12,12,12,20],alignItems:"center",children:(0,U.tZ)(z.zx,{width:24,height:24,backgroundColor:"$color_bg_dimmed",borderRadius:"5px",alignItems:"center",onClick:()=>{t(),a("click_event_modal_cta",{feature_name:n.featureName,btn_type:"exit",eventName:n.name})},children:(0,U.tZ)(ei.JO,{as:eo.S5X,size:24,color:"$color_icon_white"})})})}),(0,U.tZ)(z.xu,{width:"100%",position:"absolute",bottom:0,left:0,right:0,children:(0,U.tZ)(()=>{switch(n.actionType){case"move":return(0,U.tZ)(MoveActionComponent,{noneDisplayEventModal:o,closeModal:t,item:n});case"close":return(0,U.tZ)(CloseActionComponent,{noneDisplayEventModal:o,closeModal:t,item:n});default:return(0,U.tZ)(U.HY,{})}},{})})]})},EventModal=e=>{let{type:t}=e,{eventModalList:n,noneDisplayEventModal:o}=useEventModal({type:t});return n.length?n.map(e=>(0,U.tZ)(V.CO,{opened:!0,renderContent:t=>{let{closeModal:n}=t;return(0,U.tZ)(z.xu,{children:(0,U.tZ)(EventModalContent,{noneDisplayEventModal:o,closeModal:n,item:e})})}},e._id)):null};var ea=n(10208),el=n(31275),ec=n(7096),ed=n.n(ec);function AppInstallModal_templateObject(){let e=(0,D._)(["\n                    font-size: 8px;\n                  "]);return AppInstallModal_templateObject=function(){return e},e}let AppInstallModal=e=>{let{closeModal:t}=e,n=(0,G.T_)(),o=(0,G.bU)();return(0,U.BX)(z.xu,{position:"relative",padding:"20px 20px 43px 20px",width:440,height:428,borderRadius:12,backgroundColor:"#fff",children:[(0,U.BX)(z.gC,{width:"100%",height:"100%",alignItems:"center",justifyContent:"top",gap:"16px",children:[(0,U.tZ)(z.xu,{height:"12px"}),(0,U.tZ)(z.Jd,{typo:"$100-24-bold",color:"#1A1918",children:n("feature_mobile_install.sub_title1")}),(0,U.tZ)(z.Jd,{typo:"$100-24-bold",color:"#F72F08",children:n("feature_mobile_install.sub_title2")}),(0,U.tZ)(z.xu,{width:301,height:105,borderRadius:12,marginTop:"5px",marginBottom:"5px",backgroundColor:"#F7F7F5",children:(0,U.BX)(z.Ug,{alignItems:"flex-start",justifyContent:"left",marginLeft:18,marginTop:22,children:[(0,U.tZ)(ei.tD,{width:61,height:61}),(0,U.BX)(z.gC,{alignItems:"flex-start",marginLeft:16,gap:"6px",children:[(0,U.tZ)(z.Jd,{typo:"$100-18-semi",color:"#1A1918",children:n("feature_mobile_install.cta_title")}),(0,U.BX)(z.Ug,{alignItems:"flex-end",children:[(0,U.tZ)(z.Jd,{typo:"$100-12-semi",color:"#85837D",marginTop:10,children:n("feature_mobile_install.cta_word")}),(0,U.tZ)(z.Jd,{color:"#A8A69D",marginLeft:"4px",css:(0,J.iv)(AppInstallModal_templateObject()),children:n("feature_mobile_install.cta_word2")})]}),(0,U.tZ)(ei.A3,{})]})]})}),(0,U.tZ)(ed(),{src:"ko-KR"===o?"https://d1k8apdmymvh8f.cloudfront.net/wrtn/wrtn_app_install_qr.png":"https://d1k8apdmymvh8f.cloudfront.net/wrtn/jt4lfh16_qr_code.png",alt:"WRTN App Installer QR",width:92,height:92}),(0,U.tZ)(z.Jd,{typo:"$100-14-semi",color:"#A8A69D",marginTop:"5px",children:n("feature_mobile_install.sub_title3")})]}),(0,U.tZ)(z.zx,{position:"absolute",top:"20px",right:"20px",width:"20px",height:"20px",onClick:t,children:(0,U.tZ)(ei.JO,{as:eo.S5X,size:20,color:"$color_text_tertiary"})})]})},AppInstallButton=()=>{let{trackEvent:e}=(0,H.Ke)(),t=(0,G.T_)(),n=(0,G.bU)();return"ja-JP"!==n&&"ko-KR"!==n?null:(0,U.tZ)(V.CO,{renderOpener:n=>{let{openModal:o}=n;return(0,U.tZ)(z.xu,{children:(0,U.BX)(z.Wv,{size:"$small",hierarchy:"$tertiary",onClick:()=>{o(),e("click_home_screen_mobile_app_download_btn")},endContainer:(0,U.tZ)(ei.JO,{as:eo.xMl,size:12,color:"$color_icon_secondary"}),children:[(0,U.tZ)(ei.yC,{}),(0,U.tZ)(z.Jd,{typo:"$100-13-med",color:"$color_text_secondary",children:t("feature_mobile_install.title")})]})})},renderContent:e=>{let{closeModal:t}=e;return(0,U.tZ)(AppInstallModal,{closeModal:t})}})};var es=n(43408),eu=n(34867);let EmptyChatController=()=>{let{chatList:e,isLoading:t}=(0,es.c)(),{createChatMutation:n}=(0,es.h)(),[o,r]=(0,X.useState)(!1),{user:i}=(0,eu.aF)(),a=e.sort((e,t)=>null===e.model&&null!==t.model?-1:null!==e.model&&null===t.model?1:0),l=!!(null==i?void 0:i._id);return(0,X.useEffect)(()=>{if(l&&!t){if(o){(0===a.length||null!==a[0].model)&&n();return}r(!0)}},[t,o,a,n,l]),null},IssueTalkFeatureFlagContainer=e=>{let{children:t}=e,{flag:n,loading:o}=(0,el.T6)("fe-web-chatHome-issueTalk"),r=!o&&n;return null==t?void 0:t({opened:r})};var ep=n(62413),e_=n(11785);let getChatBanners=()=>q.Np.BE.get((0,Y.stringifyQueryParams)("/api/v2/chat-banners",{platform:(0,N.Xf)()})),getTrend=async()=>await q.Np.TREND.get("/v1/trend"),useGetTrend=()=>(0,et.dH)("/v1/trend",async()=>(await getTrend()).data,{refreshInterval:15e3,refreshWhenHidden:!0,revalidateOnFocus:!1}),getIssueTalkPosts=async e=>await q.Np.William.get("/issue-talk/articles",e),getIssueTalkPostsKey=(e,t)=>{let n="/issue-talk/articles";return 0===e?[n,String(e)]:t?[n,String(e),t.nextCursor]:null},useInfiniteIssueTalkPosts=()=>{let{data:e,size:t,setSize:n,isLoading:o,isValidating:r,mutate:i}=(0,et.g_)((e,t)=>getIssueTalkPostsKey(e,t),async e=>await getIssueTalkPosts({params:{...e?{cursorId:e[2]}:{}}}),{fallback:[]});return{data:e,size:t,setSize:n,isLoading:o,isValidating:r,mutate:i}},postVoteIssueTalk=async e=>{let{articleId:t,choiceId:n,voteId:o}=e;return await q.Np.William.post("/issue-talk/articles/".concat(t),{choiceId:n,voteId:o})},useVoteIssueTalk=e=>(0,et._5)("/issue-talk/articles/".concat(e),async function(t,n){let{arg:o}=n,{choiceId:r,voteId:i}=o;return await postVoteIssueTalk({articleId:e,choiceId:r,voteId:i})}),getPost=async e=>{let{postId:t}=e;return await q.Np.William.get("/issue-talk/articles/".concat(t))},usePost=e=>{let{postId:t}=e;return(0,et.dH)("/issue-talk/articles/".concat(t),()=>getPost({postId:t}))},useFlattenPosts=()=>{var e;let{data:t,setSize:n,isLoading:o,isValidating:r}=useInfiniteIssueTalkPosts(),i=(null==t?void 0:t.flatMap(e=>e.list))||[],a=(null==t?void 0:null===(e=t[t.length-1])||void 0===e?void 0:e.nextCursor)||!1,l=(0,N.dg)(e=>{e.isIntersecting&&a&&!o&&!r&&n(e=>e+1)});return{posts:i,isValidating:r,refreshRef:l}},useHandleClickScrollButton=()=>{let{trackEvent:e}=(0,H.Ke)(),{variant:t}=(0,ep.Zp)(),{variant:n}=(0,ep.kY)();return{handleClickScrollButton:o=>{e("click_post_next_btn",{issue_talk_abtest_group:t,issue_talk_top_spacer_abtest_group:n,direction:o})}}},useHoverIssueTalkList=()=>{let[e,t]=(0,X.useState)(!1),[n,o]=(0,X.useState)(null),{trackEvent:r}=(0,H.Ke)(),{variant:i}=(0,ep.Zp)(),{variant:a}=(0,ep.kY)();return(0,X.useEffect)(()=>()=>{n&&clearTimeout(n)},[n]),{scheduleEvent:()=>{if(e||n)return;let l=setTimeout(()=>{r("hover_home_issue_talk_list",{issue_talk_abtest_group:i,issue_talk_top_spacer_abtest_group:a}),t(!0)},2e3);o(l)},cancelEvent:()=>{n&&(clearTimeout(n),o(null))}}};var eh=n(77837),em=n.n(eh);function CarouselScrollButton_templateObject(){let e=(0,D._)(["\n          background: ",";\n        "]);return CarouselScrollButton_templateObject=function(){return e},e}function CarouselScrollButton_templateObject1(){let e=(0,D._)(["\n          transform: translateY(-50%);\n\n          &:hover {\n            background-color: ",";\n          }\n        "]);return CarouselScrollButton_templateObject1=function(){return e},e}let CarouselScrollButton=e=>{let{onClick:t,direction:n,width:o="91px",height:r="100%"}=e,i="left"===n?"90deg":"270deg";return(0,U.tZ)(z.xu,{width:o,height:r,position:"absolute",top:"0",right:"right"===n?"-1px":void 0,left:"left"===n?"-1px":void 0,zIndex:2,css:e=>(0,J.iv)(CarouselScrollButton_templateObject(),"dark"===e.mode?"linear-gradient(".concat(i,", #1A1918 0%, rgba(26, 25, 24, 0.00) 100%)"):"linear-gradient(".concat(i,", #FFF 0%, rgba(255, 255, 255, 0.00) 100%)")),children:(0,U.tZ)(z.zx,{position:"absolute",right:"right"===n?"0":void 0,left:"left"===n?"0":void 0,top:"50%",borderRadius:"50%",width:"36px",height:"36px",display:"flex",justifyContent:"center",alignItems:"center",onClick:()=>null==t?void 0:t(),backgroundColor:"$color_surface_secondary",zIndex:3,css:e=>(0,J.iv)(CarouselScrollButton_templateObject1(),(0,z.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_surface_elevated"})),children:(0,U.tZ)(ei.JO,{as:"left"===n?eo.k9_:eo.xMl,size:24,color:"$color_icon_secondary"})})})};function CarouselContainer_templateObject(){let e=(0,D._)(["\n          -ms-overflow-style: none; /* IE and Edge */\n          scrollbar-width: none; /* Firefox */\n\n          ::-webkit-scrollbar {\n            display: none; /* Chrome, Safari, Opera*/\n          }\n        "]);return CarouselContainer_templateObject=function(){return e},e}let CarouselContainer=e=>{var t;let{renderContent:n,onClickScrollButton:o,isCharacterCarousel:r=!0,pixelMoveAmount:i=350,...a}=e,l=(0,X.useRef)(null),[c,d]=(0,X.useState)(!1),[s,u]=(0,X.useState)(!0),{trackEvent:p}=(0,H.Ke)(),handleScroll=()=>{if(!l.current)return;let e=l.current.scrollLeft>0,t=l.current.scrollLeft+l.current.clientWidth<l.current.scrollWidth;d(e),u(t)},handleScrollFactory=e=>{var t;let n="left"===e?-1*i:i;null===(t=l.current)||void 0===t||t.scrollBy({left:n,behavior:"smooth"}),handleScroll(),null==o||o(e)};return(0,X.useEffect)(()=>{let e=em()(()=>{l.current&&handleScroll()},50);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[l,null==l?void 0:null===(t=l.current)||void 0===t?void 0:t.clientWidth]),(0,X.useEffect)(()=>{handleScroll()},[l,n]),(0,U.BX)(z.xu,{width:"100%",position:"relative",children:[!N.P8&&c&&(0,U.tZ)(CarouselScrollButton,{direction:"left",onClick:()=>{handleScrollFactory("left"),r&&p("click_next_btn",{section_name:"캐릭터 AI",section_order:4})},width:"91px"}),(0,U.tZ)(z.Ug,{width:"100%",overflowX:"scroll",overflowY:"hidden",ref:l,css:(0,J.iv)(CarouselContainer_templateObject()),onScroll:handleScroll,...a,children:n()}),!N.P8&&s&&(0,U.tZ)(CarouselScrollButton,{direction:"right",onClick:()=>{handleScrollFactory("right"),r&&p("click_next_btn",{section_name:"캐릭터 AI",section_order:4})},width:"91px"})]})};var eg=n(38693),ex=n(30008);function BaseButton_templateObject(){let e=(0,D._)(["\n        border-top: 2px solid currentcolor;\n        border-right: 2px solid currentcolor;\n        border-bottom-width: 2px;\n        border-left-width: 2px;\n        border-bottom-color: transparent;\n        border-left-color: transparent;\n        color: currentcolor;\n\n        animation: 0.75s linear 0s infinite normal none running spin;\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      "]);return BaseButton_templateObject=function(){return e},e}function BaseButton_templateObject1(){let e=(0,D._)(["\n        cursor: ",";\n      "]);return BaseButton_templateObject1=function(){return e},e}function BaseButton_templateObject2(){let e=(0,D._)(["\n          transform: translate(-50%, -50%);\n        "]);return BaseButton_templateObject2=function(){return e},e}function _templateObject3(){let e=(0,D._)(["\n          visibility: ",";\n        "]);return _templateObject3=function(){return e},e}let Loader=()=>(0,U.tZ)(z.xu,{mt:"3px",display:"inline-block",width:"13px",height:"14px",borderRadius:"100%",borderBottomStyle:"solid",borderLeftStyle:"solid",css:()=>(0,J.iv)(BaseButton_templateObject())}),BaseButton=e=>{let{onClick:t,children:n,disabled:o,pending:r,...i}=e;return(0,U.BX)(z.zx,{onClick:t,position:"relative",css:(0,J.iv)(BaseButton_templateObject1(),r||o?"default":"pointer"),...i,children:[(0,U.tZ)(z.xu,{display:r?"block":"none",position:"absolute",top:"50%",left:"50%",css:(0,J.iv)(BaseButton_templateObject2()),children:(0,U.tZ)(Loader,{})}),(0,U.tZ)(z.xu,{css:(0,J.iv)(_templateObject3(),r?"hidden":"visible"),children:n})]})},VoteButton=e=>{let{onClick:t,active:n,pending:o}=e,handleClick=async()=>{!o&&n&&t()};return(0,U.tZ)(BaseButton,{disabled:!n,onClick:handleClick,pending:o,bg:"$color_bg_screen",borderRadius:"31px",border:"1px solid",borderColor:n&&!o?"$color_action_blue_primary":"$color_outline_secondary",width:"fit-content",p:"14px 24px",typo:"$100-16-med",color:n&&!o?"$color_action_blue_primary":"$color_text_tertiary",children:"투표하기"})};var ev=n(3230),ef=n.n(ev);let ResultButton=e=>{let{_id:t,onClick:n}=e;return(0,U.tZ)(ef(),{href:"/issue/posts/".concat(t,"?position=view_result#vote_anchor"),onClick:n,children:(0,U.tZ)(z.zx,{bg:"$color_bg_screen",borderRadius:"31px",border:"1px solid",borderColor:"$color_outline_primary",width:"fit-content",p:"14px 24px",color:"$color_text_primary",children:"결과보기"})})},Card=e=>{let{_id:t,thumbnail:n,topic:o,voteCount:r,commentCount:i,onClick:a}=e;return(0,U.tZ)(ef(),{href:"/issue/posts/".concat(t,"?position=post_thumbnail"),style:{width:"100%"},onClick:a,children:(0,U.BX)(z.gC,{width:"100%",height:"224px",bg:"$color_bg_elevated_primary",borderRadius:"8px",boxShadow:"0px 2px 10px 0px rgba(0, 0, 0, 0.10)",children:[(0,U.tZ)(z.xu,{width:"100%",height:"100px",minHeight:"100px",borderRadius:"8px 8px 0px 0px",children:(0,U.tZ)(ed(),{src:n,width:330,height:100,sizes:"330px",layout:"fixed",alt:"thumbnail",priority:!0,style:{objectFit:"cover",borderRadius:"inherit",width:"100%",height:"100%"}})}),(0,U.BX)(z.gC,{p:"16px",justifyContent:"space-between",height:"100%",children:[(0,U.tZ)(z.Jd,{typo:"$160-16-semi",color:"$color_text_primary",children:o}),(0,U.BX)(z.Ug,{width:"100%",justifyContent:"space-between",children:[(0,U.BX)(z.Ug,{gap:"4px",p:"5px 11px",borderRadius:"4px",bg:"$color_surface_secondary",alignItems:"center",children:[(0,U.tZ)(ei.JO,{as:eo.SB_,size:16,color:"$color_icon_secondary"}),(0,U.BX)(z.Jd,{typo:"$100-12-med",color:"$color_text_secondary",children:[r.toLocaleString(),"명이 투표"]})]}),(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(ei.JO,{as:eo.MQJ,size:16,color:"$color_icon_secondary"}),(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_secondary",children:i})]})]})]})]})})},ChoiceLabel=e=>{let{type:t}=e;return(0,U.tZ)(z.xu,{p:"7px 12px",bg:"A"===t?"$color_text_accent_bg_red":"$color_text_accent_bg_blue",borderRadius:"18px",width:"fit-content",minWidth:"fit-content",children:(0,U.BX)(z.Jd,{typo:"$100-12-semi",color:"$color_text_ivory",children:["의견 ",t]})})};function ChoiceListItem_templateObject(){let e=(0,D._)(["\n        cursor: pointer;\n      "]);return ChoiceListItem_templateObject=function(){return e},e}let ChoiceListItem=e=>{let{type:t,choice:n,onClick:o,selected:r,unselected:i}=e,{variant:a}=(0,ep._O)();return(0,U.BX)(z.gC,{gap:"8px",p:"12px",borderRadius:"8px",bg:"$color_bg_elevated_secondary",css:(0,J.iv)(ChoiceListItem_templateObject()),onClick:o,opacity:i?.5:1,border:r?"1px solid ".concat("A"===t?"var(--color_outline_accent_red)":"var(--color_outline_accent_blue)"):"none",children:["A"===a&&(0,U.tZ)(ChoiceLabel,{type:t}),(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_primary",children:n.content})]})},ChoiceList=e=>{let{choices:t,vote:n,onClickChoice:o,currentSelected:r}=e;return(0,U.tZ)(z.gC,{width:"100%",gap:"16px",children:t.map((e,t)=>(0,U.tZ)(ChoiceListItem,{type:0===t?"A":"B",choice:e,onClick:()=>o(e._id,t+1),selected:!r&&(null==n?void 0:n.choiceId)===e._id||r===e._id,unselected:null!==r&&r!==e._id},e._id))})},IssueTalkListItem=e=>{var t;let{post:n,index:o}=e,[r,i]=(0,X.useState)(null),[a,l]=(0,X.useState)(!1),{trigger:c}=useVoteIssueTalk(n._id),{handleOpenLoginDialog:d}=(0,ex.tF)(),{user:s}=(0,eu.aF)(),{mutate:u}=useInfiniteIssueTalkPosts(),{mutate:p}=usePost({postId:n._id}),{variant:_,loading:h}=(0,ep.Zp)(),{variant:m,loading:g}=(0,ep.kY)(),{variant:x,loading:v}=(0,ep._O)(),{variant:f,loading:b}=(0,ep.Ul)(),{trackEvent:y}=(0,H.Ke)();(0,X.useEffect)(()=>{g||h||v||b||y("expose_post",{post_id:n._id,post_index:o,issue_talk_abtest_group:_,issue_talk_top_spacer_abtest_group:m,issue_talk_reduce_ui_abtest_group:x,issue_talk_grid_abtest_group:f})},[h,g,v,b]);let{push:C}=(0,en.useRouter)(),handleNavigateToPost=()=>{C("/issue/posts/".concat(n._id,"?position=view_result#vote_anchor"))},handleVote=async e=>{var t,o;if(e){if(!s){d();return}l(!0),await c({choiceId:e,voteId:null!==(o=null===(t=n.vote)||void 0===t?void 0:t._id)&&void 0!==o?o:null},{onSuccess:async()=>{await p(),await u(),l(!1),"B"===x&&handleNavigateToPost()},onError:()=>{l(!1)}})}},handleClickPostLink=e=>{y("click_view_post_btn",{post_id:n._id,post_index:o,issue_talk_abtest_group:_,issue_talk_top_spacer_abtest_group:m,issue_talk_reduce_ui_abtest_group:x,issue_talk_grid_abtest_group:f,btn_type:e})},handleClickVoteButton=async()=>{y("click_vote_post_btn",{post_id:n._id,post_index:o,issue_talk_abtest_group:_,issue_talk_top_spacer_abtest_group:m,issue_talk_reduce_ui_abtest_group:x,issue_talk_grid_abtest_group:f,vote_option:n.choices.findIndex(e=>e._id===r)+1}),handleVote(r)};return(0,U.BX)(z.gC,{width:"364px",borderRadius:"16px",bg:"$color_bg_screen",border:"1px solid var(--color_outline_tertiary)",p:"16px",gap:"16px",alignItems:"center",children:[(0,U.tZ)(Card,{_id:n._id,thumbnail:n.thumbnail,topic:n.topic,voteCount:n.voteCount,commentCount:n.commentCount,onClick:()=>handleClickPostLink("post_thumbnail")}),(0,U.tZ)(ChoiceList,{currentSelected:"B"===x?null:r,onClickChoice:(e,t)=>{var r;y("click_post_poll_btn",{post_id:n._id,post_index:o,issue_talk_abtest_group:_,issue_talk_top_spacer_abtest_group:m,issue_talk_reduce_ui_abtest_group:x,issue_talk_grid_abtest_group:f,option_number:t}),"A"===x?i(e):(null===(r=n.vote)||void 0===r?void 0:r.choiceId)!==e?handleVote(e):handleNavigateToPost()},choices:n.choices,vote:n.vote}),"A"===x&&(0,U.BX)(z.Ug,{gap:"8px",children:[(0,U.tZ)(VoteButton,{active:!!r&&r!==(null===(t=n.vote)||void 0===t?void 0:t.choiceId),onClick:handleClickVoteButton,pending:a}),(0,U.tZ)(ResultButton,{_id:n._id,onClick:()=>handleClickPostLink("view_result")})]})]})},IssueTalkCarouselList=()=>{let{posts:e,refreshRef:t,isValidating:n}=useFlattenPosts(),{handleClickScrollButton:o}=useHandleClickScrollButton();return(0,U.tZ)(CarouselContainer,{pixelMoveAmount:377,renderContent:()=>(0,U.BX)(z.Ug,{alignItems:"center",children:[(0,U.tZ)(z.Ug,{gap:"12px",children:e.map((e,t)=>(0,U.tZ)(IssueTalkListItem,{post:e,index:t+1},e._id))}),n?(0,U.tZ)(z.gC,{width:"100%",height:"50px",justifyContent:"center",pl:"12px",children:(0,U.tZ)(eg.$j,{})}):(0,U.tZ)(z.xu,{width:"1px",height:"1px",ref:t})]}),onClickScrollButton:o})};function IssueTalkGridList_templateObject(){let e=(0,D._)(["\n            grid-column: 1 / -1;\n          "]);return IssueTalkGridList_templateObject=function(){return e},e}let IssueTalkGridList=()=>{let{posts:e,refreshRef:t,isValidating:n}=useFlattenPosts();return(0,U.BX)(z.rj,{width:"100%",gap:"12px",gridTemplateColumns:"repeat(2, 1fr)",children:[e.map((e,t)=>(0,U.tZ)(IssueTalkListItem,{post:e,index:t+1},e._id)),n?(0,U.tZ)(z.gC,{width:"100%",height:"50px",justifyContent:"center",pl:"12px",css:(0,J.iv)(IssueTalkGridList_templateObject()),children:(0,U.tZ)(eg.$j,{})}):(0,U.tZ)(z.xu,{width:"1px",height:"1px",ref:t})]})};function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var Infographic_chatting=function(e){return X.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none"},e),o||(o=X.createElement("path",{fill:"url(#Infographic_chatting_svg__a)",fillRule:"evenodd",d:"M18.786 2.935a8.67 8.67 0 0 1 7.364 13.25l1.6 5.992-6.557-2.24a8.7 8.7 0 0 1-2.407.339h-3.233a8.67 8.67 0 0 1 0-17.341z",clipRule:"evenodd"})),r||(r=X.createElement("path",{fill:"url(#Infographic_chatting_svg__b)",fillRule:"evenodd",d:"M18.786 2.935a8.67 8.67 0 0 1 7.364 13.25l1.6 5.992-6.557-2.24a8.7 8.7 0 0 1-2.407.339h-3.233a8.67 8.67 0 0 1 0-17.341z",clipRule:"evenodd"})),i||(i=X.createElement("path",{fill:"url(#Infographic_chatting_svg__c)",fillRule:"evenodd",d:"M11.444 7.57a9.119 9.119 0 0 0-7.582 14.188L2.4 28.049l6.644-2.56a9.1 9.1 0 0 0 2.4.32h3.4a9.119 9.119 0 1 0 0-18.239z",clipRule:"evenodd"})),a||(a=X.createElement("path",{stroke:"#636DBD",strokeWidth:.9,d:"M9.125 25.03c.75.205 1.541.315 2.358.315h3.264c4.834 0 8.753-3.85 8.753-8.601 0-4.75-3.4-7.473-5.874-8.246"})),X.createElement("g",{filter:"url(#Infographic_chatting_svg__d)",style:{mixBlendMode:"multiply"}},l||(l=X.createElement("path",{fill:"#fff",d:"M18.216 13.753H7.884c-.253 0-.459.162-.459.362v1.676c0 .2.206.362.46.362h10.331c.254 0 .46-.162.46-.362v-1.676c0-.2-.206-.362-.46-.362"}))),X.createElement("g",{filter:"url(#Infographic_chatting_svg__e)",style:{mixBlendMode:"multiply"}},c||(c=X.createElement("path",{fill:"#fff",d:"M13.694 17.953H7.692c-.147 0-.267.158-.267.352v1.628c0 .195.12.352.267.352h6.002c.147 0 .266-.157.266-.352v-1.628c0-.194-.12-.352-.266-.352"}))),d||(d=X.createElement("defs",null,X.createElement("linearGradient",{id:"Infographic_chatting_svg__a",x1:19.328,x2:20.043,y1:6.608,y2:3.079,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#8894FF"}),X.createElement("stop",{offset:1,stopColor:"#A2ADFF"})),X.createElement("linearGradient",{id:"Infographic_chatting_svg__b",x1:25.509,x2:10.671,y1:19.472,y2:2.162,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#636DBD"}),X.createElement("stop",{offset:.49,stopColor:"#636DBD",stopOpacity:0})),X.createElement("linearGradient",{id:"Infographic_chatting_svg__c",x1:17.626,x2:4.628,y1:24.597,y2:11.829,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#8894FF"}),X.createElement("stop",{offset:1,stopColor:"#A2ADFF"})),X.createElement("filter",{id:"Infographic_chatting_svg__d",width:11.547,height:2.994,x:7.425,y:13.753,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},X.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),X.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),X.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),X.createElement("feOffset",{dx:.297,dy:.594}),X.createElement("feGaussianBlur",{stdDeviation:1}),X.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),X.createElement("feColorMatrix",{values:"0 0 0 0 0.388235 0 0 0 0 0.427451 0 0 0 0 0.741176 0 0 0 1 0"}),X.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_4116_48344"})),X.createElement("filter",{id:"Infographic_chatting_svg__e",width:6.832,height:2.926,x:7.425,y:17.953,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},X.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),X.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),X.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),X.createElement("feOffset",{dx:.297,dy:.594}),X.createElement("feGaussianBlur",{stdDeviation:1}),X.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),X.createElement("feColorMatrix",{values:"0 0 0 0 0.388235 0 0 0 0 0.427451 0 0 0 0 0.741176 0 0 0 1 0"}),X.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_4116_48344"})))))};let IssueTalkList=e=>{let{selectedModel:t}=e,{id:n}=(0,e_.Jv)(),{id:o}=(0,e_.Ob)(),{variant:r,loading:i}=(0,ep.Ul)(),{cancelEvent:a,scheduleEvent:l}=useHoverIssueTalkList();return(null==t?void 0:t._id)!==n&&(null==t?void 0:t._id)!==o||i?null:(0,U.BX)(z.gC,{width:"100%",onMouseEnter:l,onMouseLeave:a,children:[(0,U.tZ)(z.xu,{height:"20px"}),(0,U.BX)(z.Ug,{gap:"8px",alignItems:"center",children:[(0,U.tZ)(Infographic_chatting,{}),(0,U.tZ)(z.Jd,{typo:"$100-20-semi",color:"$color_text_primary",children:"이슈 토크"})]}),(0,U.tZ)(z.xu,{height:"12px"}),"B"===r?(0,U.tZ)(IssueTalkGridList,{}):(0,U.tZ)(IssueTalkCarouselList,{})]})};var eb=n(36352),ey=n(58933),eC=n(81623);let ErrorIcon=()=>(0,U.tZ)(z.kC,{width:"30px",height:"30px",backgroundColor:"$color_surface_tertiary",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,U.tZ)(ei.JO,{as:eo.aq6,size:16,color:"$color_alert_warning"})});function LoadingIcon_templateObject(){let e=(0,D._)(["\n          animation: "," 1s linear infinite;\n        "]);return LoadingIcon_templateObject=function(){return e},e}function LoadingIcon_templateObject1(){let e=(0,D._)(["\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(360deg);\n    }\n"]);return LoadingIcon_templateObject1=function(){return e},e}let LoadingIcon=()=>(0,U.tZ)(z.kC,{width:"30px",height:"30px",backgroundColor:"$color_outline_secondary",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,U.tZ)(z.xu,{css:(0,J.iv)(LoadingIcon_templateObject(),ek),width:"18px",height:"18px",children:(0,U.tZ)("svg",{width:"14",height:"17",viewBox:"0 0 14 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,U.tZ)("path",{d:"M4.99852 15.9287C1.17217 13.7195 -0.138827 8.82681 2.07031 5.00047C4.27945 1.17413 9.17217 -0.136873 12.9985 2.07227",stroke:"white",strokeWidth:"2"})})})}),ek=(0,J.F4)(LoadingIcon_templateObject1());function RemoveButton_templateObject(){let e=(0,D._)(["\n      cursor: pointer;\n    "]);return RemoveButton_templateObject=function(){return e},e}let RemoveButton=e=>{let{onClick:t,isError:n=!1}=e;return(0,U.tZ)(z.gC,{className:"remove-button",position:"absolute",top:"-10px",right:"-10px",width:"20px",height:"20px",borderRadius:"100%",backgroundColor:n?"$color_alert_error":"$color_icon_quaternary",zIndex:"1",onClick:e=>{t(),e.stopPropagation()},justifyContent:"center",alignItems:"center",css:(0,J.iv)(RemoveButton_templateObject()),children:(0,U.tZ)(ei.JO,{as:eo.S5X,width:14,height:14,color:"$color_icon_white"})})};function FileItem_templateObject(){let e=(0,D._)(["\n        cursor: ",";\n\n        :hover {\n          background-color: ",";\n        }\n\n        :hover .remove-button {\n          display: flex;\n        }\n\n        .remove-button {\n          display: ",";\n        }\n      "]);return FileItem_templateObject=function(){return e},e}function FileItem_templateObject1(){let e=(0,D._)(["\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n              "]);return FileItem_templateObject1=function(){return e},e}function FileItem_templateObject2(){let e=(0,D._)(["\n                  white-space: nowrap;\n                  overflow: hidden;\n                  text-overflow: ellipsis;\n                "]);return FileItem_templateObject2=function(){return e},e}let FileItem=e=>{let{item:t,index:n,eventProperties:o,isDeletable:r=!1}=e,i="loading"===t.status||"analyzing"===t.status,a="error"===t.status,l="success"===t.status,c="success"===t.status,d=(0,G.T_)(),s=(0,eC.Zl)(ey.u3),{getChatIdFromPath:u}=(0,ep.dt)(),p=u(),{trackEvent:_}=(0,H.Ke)(),h={index:n,type:"file",_id:t._id,url:t.url},openLink=()=>{t.url&&(_("click_reference_box",{...o,...h}),window.open(t.url,"_blank","noopener,noreferrer"))};return(0,X.useEffect)(()=>{a&&_("expose_failed_file_box",{index:n,file_id:t._id,file_name:t.title,fail_reason:t.errorReason,chat_id:p})},[t.status]),(0,U.BX)(z.gC,{onClick:()=>c&&openLink(),onMouseEnter:()=>{_("hover_reference_box",{...o,...h})},position:"relative",backgroundColor:"$color_surface_elevated",width:"196px",height:"60px",borderRadius:"8px",border:"1px solid",borderColor:"error"===t.status?"$color_alert_warning":"$color_outline_tertiary",padding:"15px 12px",css:e=>{var t,n;return(0,J.iv)(FileItem_templateObject(),c?"pointer":"inherit",c?null===(t=e.colors)||void 0===t?void 0:t.$color_surface_quaternary_hover:null===(n=e.colors)||void 0===n?void 0:n.$color_surface_elevated,a?"flex":"none")},children:[r&&(0,U.tZ)(RemoveButton,{onClick:()=>{s(e=>e.filter((e,t)=>t!==n)),_("click_reference_box_delete_btn",{...o,...h})},isError:a}),(0,U.BX)(z.Ug,{gap:"8px",width:"100%",children:[i&&(0,U.tZ)(LoadingIcon,{}),a&&(0,U.tZ)(ErrorIcon,{}),l&&(0,U.tZ)(z.kC,{width:"30px",height:"30px",backgroundColor:"$color_outline_accent_red",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,U.tZ)(ei.JO,{as:eo.qTh,size:16,color:"$color_icon_ivory"})}),(0,U.BX)(z.gC,{justifyContent:"center",width:"132px",gap:"6px",children:[a&&(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_primary",css:(0,J.iv)(FileItem_templateObject1()),children:d("chat.ui_attachment.cannot_read_link")}),i&&(0,U.BX)(U.HY,{children:[(0,U.tZ)(V.Od,{width:"100%"}),(0,U.tZ)(V.Od,{width:"50px"})]}),l&&(0,U.BX)(U.HY,{children:[(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_primary",css:(0,J.iv)(FileItem_templateObject2()),children:t.title}),(0,U.tZ)(z.Jd,{typo:"$100-10-semi",color:"$color_text_quaternary",children:t.extension.toUpperCase()})]})]})]})]})};function ImageItem_templateObject(){let e=(0,D._)(["\n        cursor: pointer;\n        &:hover .remove-button {\n          display: flex;\n        }\n        .remove-button {\n          display: none;\n        }\n      "]);return ImageItem_templateObject=function(){return e},e}let ImageItem=e=>{let{item:t,index:n,eventProperties:o,isDeletable:r=!1}=e,i="loading"===t.status,a="success"===t.status,l=(0,eC.Zl)(ey.u3),{trackEvent:c}=(0,H.Ke)(),d={index:n,type:"image",url:t.url},openUrl=()=>{t.url&&(c("click_reference_box",{...o,...d}),window.open(t.url,"_blank","noopener,noreferrer"))};return(0,U.BX)(z.gC,{onClick:()=>a&&openUrl(),onMouseEnter:()=>{c("hover_reference_box",{...o,...d})},position:"relative",width:"60px",height:"60px",borderRadius:"8px",border:"1px solid",borderColor:"$color_outline_tertiary",css:(0,J.iv)(ImageItem_templateObject()),children:[r&&(0,U.tZ)(RemoveButton,{onClick:()=>{l(e=>e.filter((e,t)=>t!==n)),c("click_reference_box_delete_btn",{...o,...d})}}),i&&(0,U.tZ)(V.Od,{borderRadius:"8px"}),!i&&(0,U.tZ)("img",{alt:t.url,src:t.url,width:"100%",height:"100%",style:{borderRadius:5}})]})};var ew=n(11012);function LinkItem_templateObject(){let e=(0,D._)(["\n        cursor: ",";\n\n        :hover {\n          background-color: ",";\n        }\n\n        :hover .remove-button {\n          display: flex;\n        }\n        .remove-button {\n          display: ",";\n        }\n      "]);return LinkItem_templateObject=function(){return e},e}function LinkItem_templateObject1(){let e=(0,D._)(["\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n              "]);return LinkItem_templateObject1=function(){return e},e}function LinkItem_templateObject2(){let e=(0,D._)(["\n                  white-space: nowrap;\n                  overflow: hidden;\n                  text-overflow: ellipsis;\n                "]);return LinkItem_templateObject2=function(){return e},e}function LinkItem_templateObject3(){let e=(0,D._)(["\n                  white-space: nowrap;\n                  overflow: hidden;\n                  text-overflow: ellipsis;\n                "]);return LinkItem_templateObject3=function(){return e},e}let LinkItem=e=>{var t;let{item:n,index:o,eventProperties:r,setInput:i,isDeletable:a=!1}=e,{url:l,title:c,favicon:d,status:s,_id:u,errorReason:p}=n,_=(null===(t=l.match(/https?:\/\/([^/]+)/))||void 0===t?void 0:t[1])||l,h=(0,G.T_)(),m=(0,eC.Zl)(ey.DY),[g,x]=(0,X.useState)(null),[v,f]=(0,eC.FV)(ey.u3),{trigger:b}=(0,ew.y5)(),{trigger:y}=(0,ew.fw)(),{updateAttachment:C}=(0,ew.sH)(),{getChatIdFromPath:k}=(0,ep.dt)(),w=k(),{trackEvent:Z}=(0,H.Ke)(),I={index:o,type:"link",url:n.url},O="success"===s,openUrl=()=>{n.url&&(Z("click_reference_box",{...r,...I}),window.open(n.url,"_blank","noopener,noreferrer"))},applyMetadata=async()=>{try{let e=await b({url:l});e&&(C(u,{title:""===e.title?l:e.title,favicon:e.favicon,url:e.url,status:"analyzing"}),x(null))}catch(n){var e,t;C(u,{url:l,title:"",favicon:"",status:"error",errorReason:(0,q.IZ)(n)?null===(e=n.response)||void 0===e?void 0:e.data.message:"unknown"}),x(h("feature_assignment.form.fileAttachment.link.unreadable")),Z("upload_link_fail",{url:l,index:o,error_status:(0,q.IZ)(n)?null===(t=n.response)||void 0===t?void 0:t.data.message:"unknown",chat_id:w})}},requestAnalysis=async()=>{try{let e=await y({url:l,title:c,favicon:d,chatId:w||void 0});m(t=>({...t,[l]:e._id})),C(u,{status:"success"}),Z("upload_link_done",{url:l,index:o,chat_id:w}),x(null)}catch(n){var e,t;C(u,{status:"error",errorReason:(0,q.IZ)(n)?null===(e=n.response)||void 0===e?void 0:e.data.message:"unknown"}),x(h("chat.ui_attachment.error.cannot_read_link")),Z("upload_link_fail",{url:l,index:o,error_status:(0,q.IZ)(n)?null===(t=n.response)||void 0===t?void 0:t.data.message:"unknown"})}};return(0,X.useEffect)(()=>{"loading"===s&&(applyMetadata(),Z("expose_link_loading",{url:l,index:o,chat_id:w})),"analyzing"===s&&requestAnalysis(),"error"===s&&Z("expose_failed_link_box",{url:l,index:o,error_status:p,chat_id:w})},[l,s]),(0,U.BX)(z.gC,{onClick:()=>O&&openUrl(),onMouseEnter:()=>{Z("hover_reference_box",{...r,...I})},position:"relative",backgroundColor:"$color_surface_elevated",width:"196px",height:"60px",borderRadius:"8px",border:"1px solid",borderColor:"error"===s?"$color_alert_warning":"$color_outline_tertiary",padding:"15px 12px",css:e=>{var t,n;return(0,J.iv)(LinkItem_templateObject(),O?"pointer":"inherit",O?null===(t=e.colors)||void 0===t?void 0:t.$color_surface_quaternary_hover:null===(n=e.colors)||void 0===n?void 0:n.$color_surface_elevated,"error"===s?"flex":"none")},children:[a&&(0,U.tZ)(RemoveButton,{onClick:()=>{var e;let t=(null===(e=v[o])||void 0===e?void 0:e.url)||"";null==i||i(e=>e.replace(decodeURI(t),"").replace(t,"")),f(e=>e.filter((e,t)=>t!==o)),Z("click_reference_box_delete_btn",{...r,...I})},isError:"error"===s}),(0,U.BX)(z.Ug,{gap:"8px",width:"100%",children:[("loading"===s||"analyzing"===s)&&(0,U.tZ)(LoadingIcon,{}),"error"===s&&!d&&(0,U.tZ)(ErrorIcon,{}),("error"===s&&d||"success"===s)&&(0,U.tZ)(z.kC,{width:"30px",height:"30px",backgroundColor:"$color_surface_tertiary",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:d?(0,U.tZ)("img",{alt:c,src:d,width:"16px",height:"16px"}):(0,U.tZ)(ei.JO,{as:eo.kr2,size:16,color:"$color_text_accent_bg_blue"})}),(0,U.BX)(z.gC,{justifyContent:"center",width:"132px",gap:"6px",children:["error"===s&&!!g&&(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_primary",css:(0,J.iv)(LinkItem_templateObject1()),children:g}),("loading"===s||"analyzing"===s)&&(0,U.BX)(U.HY,{children:[(0,U.tZ)(V.Od,{width:"100%"}),(0,U.tZ)(V.Od,{width:"50px"})]}),"success"===s&&(0,U.BX)(U.HY,{children:[(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_primary",css:(0,J.iv)(LinkItem_templateObject2()),children:c}),(0,U.tZ)(z.Jd,{typo:"$100-10-semi",color:"$color_text_quaternary",css:(0,J.iv)(LinkItem_templateObject3()),children:_})]})]})]})]})},AttachmentItem=e=>{let{item:t,index:n,eventProperties:o,isDeletable:r=!1,setInput:i}=e;return"file"===t.type?(0,U.tZ)(FileItem,{index:n,item:t,eventProperties:o,isDeletable:r},t._id):"link"===t.type?(0,U.tZ)(LinkItem,{index:n,item:t,eventProperties:o,isDeletable:r,setInput:i},t._id):"image"===t.type?(0,U.tZ)(ImageItem,{item:t,index:n,eventProperties:o,isDeletable:r},t._id):null},AttachmentList=e=>{let{eventProperties:t,setInput:n,marginBottom:o="0"}=e,r=(0,eC.sJ)(ey.u3);return(null==r?void 0:r.length)?(0,U.tZ)(z.Ug,{width:"100%",height:"auto",gap:"6px",flexWrap:"wrap",marginBottom:o,children:r.map((e,o)=>(0,U.tZ)(AttachmentItem,{item:e,index:o,eventProperties:t,isDeletable:!0,setInput:n},e._id))}):null},ChatAttachmentList=e=>{let{eventProperties:t,references:n}=e;return n&&(null==n?void 0:n.length)!==0?(0,U.tZ)(z.Ug,{width:"100%",height:"auto",gap:"6px",flexWrap:"wrap",children:n.map((e,n)=>(0,U.tZ)(AttachmentItem,{item:e,index:n,eventProperties:t},e._id))}):null};var eZ=n(15982),eI=n(15229),eO=n(91980),eS=n(27682),eB=n(45570);let ChatInputState=e=>{let{children:t}=e,n=(0,eB.sJ)(ey.dW),{searchParams:o}=(0,W.je)(),r=o.get("qi"),[i,a]=(0,X.useState)(n),{input:l,changeInput:c}=(0,eb.Qc)(),{setItem:d}=(0,N.Xs)("CHAT_HOME_INPUT_STATE_SESSION_KEY","");return(0,X.useEffect)(()=>{if(r){a(r);return}l&&(a(l),c(""))},[c,l,r]),(0,eS.bX)(()=>{d(i)},[i],500),t({input:i,setInput:a,changeInput:e=>{a(e)}})},ChatLinkState=e=>{let{input:t,isDisabled:n,children:o}=e,{flag:r}=(0,el.T6)("fe-web-chat-link"),i=(0,eC.Zl)(ey.u3),{linkCount:a}=(0,eC.sJ)(ey.h5),{updateAttachmentsWithLinks:l}=(0,ew.nB)({linkLimitExceeded:a>=2}),c=(0,X.useCallback)(()=>{if(!r||n)return;let e=(0,ew.NH)(t).map(e=>(0,ew.R1)(e));i(t=>{let{newAttachments:n,isUpdated:o}=l(t,e);return o?n:t})},[t,i,l]);return(0,X.useEffect)(()=>{c()},[t,c]),o};var e$=n(18100),eA=n(31904),eM=n(51856);let ChatTextareaV2=e=>{var t;let{placeholder:n="",value:o,onChange:r,selectedModel:i,padding:a,adEvent:l}=e,{trackEvent:c}=(0,H.Ke)(),{handleEvent:d}=(0,e$.m)(),{generateAndPushNormalChatRoom:s}=(0,ep.Tt)(),{handleOpenAnonymousDialog:u}=(0,ep.Zr)(i),[p,_]=(0,X.useState)(!1),{isProMode:h}=(0,eb.M2)(),{changeFocus:m}=(0,eb.Qc)(),g=(0,eC.sJ)(ey.h5),[x,v]=(0,X.useState)([]),f=(0,X.useRef)(null),b=(0,G.bU)();(0,X.useEffect)(()=>{l&&l.adEventBody&&l.adEventBody.ad_campaign_id&&d("expose_ad_input_keyin",{...l.adEventBody,event_type:"expose"})},[null==l?void 0:null===(t=l.adEventBody)||void 0===t?void 0:t.ad_campaign_id]),(0,X.useEffect)(()=>{(async()=>{let e=await (0,eM._)(b);v(e)})()},[b]),(0,X.useEffect)(()=>{f.current&&f.current.focus()},[i]);let makeNewChat=async()=>{let e=u();if(!e||!o||!i)return;_(!0);let t=x.find(e=>e.name===eA.ChatModel.PRO_MODE);s({selectedModel:h&&t?t:i,generateMessage:o,callback:()=>{_(!1)}})};return(0,U.BX)(U.HY,{children:[p&&(0,U.tZ)(V.fz,{isVisible:p}),(0,U.tZ)(eZ.kb,{ref:f,width:"100%",height:"100%",padding:a,value:o,placeholder:n,onChange:e=>{null==r||r(e.target.value)},onClick:()=>{c("click_chat_input_btn",{model_name:null==i?void 0:i.name.toUpperCase(),feature_menu:"chat",section_order:1,purpose:null==i?void 0:i.displayName})},linkHighlight:h,onKeyPress:e=>{o&&g.success&&("Enter"!==e.key||e.shiftKey||e.preventDefault(),e.metaKey||e.shiftKey||"Enter"!==e.key||!(o.trim().length>0)||(e.preventDefault(),e.stopPropagation(),makeNewChat()))},onFocus:()=>m(!0),onBlur:()=>m(!1),autoFocus:!0})]})};var eR=n(56330),ej=n(14633),eE=n.n(ej);let FastSearchToggle=e=>{let{isFastSearch:t,isDarkMode:n,selectedModel:o,fastSearchABValue:r,onToggleFastSearchMode:i}=e,[a,l]=(0,X.useState)(!1),{trackEvent:c}=(0,H.Ke)(),d=(0,G.T_)(),s=(0,G.bU)(),u=(0,X.useCallback)(eE()(()=>{a||(l(!0),c("view_fast_ai_search_tool_tip",{purpose:null==o?void 0:o.displayName,is_fast_ai_search_toggle:t,chathome_fast_ai_search_abtest_group:r}))},1e3),[a,c,o,t]),p=(0,X.useCallback)(()=>{l(!1)},[]);return s.includes("AE")?null:(0,U.tZ)(U.HY,{children:(0,U.BX)(z.Ug,{alignItems:"center",justifyContent:"flex-end",width:"140px",gap:"4px",children:[(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_brand",children:d("chat.feature_home.home.fast_search")}),(0,U.tZ)(V.u,{content:d("chat.feature_home.home.tool_tip.fast_search"),position:{top:"-150%",left:"-200%"},children:(0,U.tZ)(z.xu,{display:"flex",alignItems:"center",height:"28px",children:(0,U.tZ)(eR.Z,{toggle:t,shadow:!0,onMouseEnter:u,onMouseLeave:p,onToggle:i,containerData:{width:54,height:28,px:4,py:4,borderRadius:50,bg:{checked:n?"#271511":"$color_surface_accent_red",unchecked:"$palette_gray_gray_150"}},sliderData:{size:20,bg:{checked:"$color_icon_brand",unchecked:"$color_icon_white"}},innerItem:(0,U.tZ)(ei.JO,{as:ei.BZ,size:16,color:t?"$color_icon_white":"#F72F08"})})})})]})})},GenerateButton=e=>{let{active:t=!1,focus:n=!1,generateMessage:o,selectedModel:r,adContext:i,adEvent:a}=e,{generateAndPushNormalChatRoom:l}=(0,ep.Tt)(),{handleOpenAnonymousDialog:c}=(0,ep.Zr)(r),[d,s]=(0,X.useState)(!1),u=(null==r?void 0:r.name)===eA.ChatModel.SD3_TURBO,p=[eA.ChatModel.WRTN_SEARCH,eA.ChatModel.WRTN_FAST_SEARCH],_=(null==r?void 0:r.name)!=null&&p.includes(r.name),h=(null==r?void 0:r.name)===eA.ChatModel.PRO_MODE,{mode:m}=(0,er.TC)(),makeNewChat=async()=>{let e=c();e&&t&&r&&r&&(s(!0),l({selectedModel:r,generateMessage:o,adContext:i,adEvent:a,callback:()=>{s(!1)}}))};return(0,U.tZ)(z.zx,{onClick:makeNewChat,"data-testid":"generate-button",children:(0,U.BX)(z.xu,{width:"28px",height:"28px",backgroundColor:n&&t||t?h?"#7108F7":"$color_surface_brand":"$color_icon_primary",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",children:[d&&(0,U.tZ)(V.fz,{isVisible:d}),(0,U.tZ)(ei.JO,{as:u?eo.w6e:_?eo.hsj:eo.lA1,size:u?16:20,color:t?"dark"===m?"$color_text_primary":"$color_surface_ivory":"$color_surface_tertiary"})]})})};function DropdownOpenerWithButton_templateObject(){let e=(0,D._)(["\n        cursor: ",";\n      "]);return DropdownOpenerWithButton_templateObject=function(){return e},e}function DropdownOpenerWithButton_templateObject1(){let e=(0,D._)(["\n            :hover {\n              background-color: ",";\n            }\n          "]);return DropdownOpenerWithButton_templateObject1=function(){return e},e}function DropdownOpenerWithButton_templateObject2(){let e=(0,D._)(["\n                cursor: default;\n              "]);return DropdownOpenerWithButton_templateObject2=function(){return e},e}let DropdownOpenerWithButton=e=>{let{loading:t,selectedModel:n,onClick:o}=e,{trackEvent:r}=(0,H.Ke)(),[i,a]=(0,X.useState)(!1),{value:l,setItem:c}=(0,N.Xs)("CLICKED_MODEL_GUIDE_TOOLTIP_CLOSE",!1),{isProMode:d}=(0,eb.M2)(),s=(0,G.T_)(),onClickButton=()=>{t||(r("click_purpose_list_btn",{purpose:null==n?void 0:n.name.toUpperCase(),is_pro_mode:d}),o())};return(0,X.useEffect)(()=>{a(!l)},[l]),(0,U.tZ)(z.zx,{onClick:e=>{onClickButton(),e.stopPropagation()},css:(0,J.iv)(DropdownOpenerWithButton_templateObject(),t?"wait":"pointer"),"data-testid":"model-select-opener",children:(0,U.BX)(z.Ug,{gap:"5px",alignItems:"center",height:"100%",children:[(0,U.tZ)(z.xu,{width:"60px",height:"60px",backgroundColor:"$color_surface_tertiary",borderRadius:"1000px",display:"flex",alignItems:"center",justifyContent:"center",css:e=>{var t;return(0,J.iv)(DropdownOpenerWithButton_templateObject1(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary)},children:n&&(0,U.tZ)("img",{src:null==n?void 0:n.displayOptions.icon,width:"30px",height:"30px",alt:"model-icon"})}),(0,U.tZ)(V.ag,{position:"top",visible:i,closable:!1,content:(0,U.BX)(z.Ug,{gap:"8px",alignItems:"center",css:(0,J.iv)(DropdownOpenerWithButton_templateObject2()),onClick:e=>e.stopPropagation(),children:[(0,U.tZ)(z.Jd,{typo:"$100-14-bold",children:s("chat.feature_home.home.tool_tip.model_select")}),(0,U.tZ)(z.zx,{width:"16px",height:"16px",onClick:e=>{a(!1),c(!0),r("click_purpose_list_tool_tip_exit_btn",{purpose:null==n?void 0:n.name.toUpperCase(),is_pro_mode:d}),e.stopPropagation()},children:(0,U.tZ)(ei.JO,{as:eo.S5X,size:16,color:"$color_text_tertiary"})})]}),children:(0,U.tZ)(z.gC,{width:"100%",height:"60px",alignItems:"center",justifyContent:"center",children:(0,U.tZ)(ei.JO,{as:eo.jt3,size:20,color:"$color_icon_secondary"})})})]})})};var eT=n(54552);function ModelSelectButton_templateObject(){let e=(0,D._)(["\n          &:hover {\n            background-color: ",";\n          }\n        "]);return ModelSelectButton_templateObject=function(){return e},e}let ModelSelectButton=e=>{var t,n,o;let{item:r,onClick:i}=e,[a,l]=(0,X.useState)(),{isProMode:c}=(0,eb.M2)(),{trackEvent:d}=(0,H.Ke)();return(0,X.useEffect)(()=>{l(r)},[r]),(0,U.tZ)(z.zx,{onClick:()=>{d("select_purpose_btn",{purpose:null==r?void 0:r.name.toUpperCase(),last_purpose:a,is_pro_mode:c}),i()},"data-test-id":"model-select-button",children:(0,U.BX)(z.Ug,{gap:"10px",textAlign:"left",alignItems:"center",borderRadius:"8px",paddingX:"8px",marginX:"-8px",css:e=>{var t;return(0,J.iv)(ModelSelectButton_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_quaternary_hover)},children:[(0,U.tZ)(z.xu,{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"1000px",children:(0,U.tZ)(z.xu,{width:"30px",height:"30px",borderRadius:"1000px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"$palette_gray_gray_50",children:(0,U.tZ)("img",{src:null==r?void 0:null===(t=r.displayOptions)||void 0===t?void 0:t.icon,width:"16px",height:"16px",alt:"".concat(r.name,"-icon-alt")})})}),(0,U.tZ)(z.Ug,{paddingY:"8px",alignItems:"center",children:(0,U.BX)(z.gC,{gap:"2px",children:[(0,U.BX)(z.Ug,{alignItems:"center",gap:"4px",children:[(0,U.tZ)(z.Jd,{typo:"$160-13-med",color:"$color_text_primary",children:r.displayName}),(null===(n=r.displayOptions)||void 0===n?void 0:n.subDisplayName)&&(0,U.tZ)(z.Ug,{borderRadius:"4px",backgroundColor:"$color_surface_secondary",paddingX:"6px",paddingY:"3px",children:(0,U.tZ)(z.Jd,{typo:"$100-10-semi",color:"$color_text_brand",children:null===(o=r.displayOptions)||void 0===o?void 0:o.subDisplayName})})]}),(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_quaternary",children:r.description})]})})]})})},ModelSelectList=e=>{let{menuList:t,changeModel:n}=e,{id:o}=(0,e_.mn)(),{id:r}=(0,e_.Ob)(),{id:i}=(0,e_.q)(),a=[o,r,i,eT.uv],l=t.filter(e=>!a.includes(e._id));return(0,U.tZ)(z.gC,{children:l.map(e=>(0,U.tZ)(ModelSelectButton,{item:e,onClick:()=>n(e)},e._id))})};function DropdownRenderContent_templateObject(){let e=(0,D._)(["\n        border: 1px solid ",";\n        box-shadow: 0px 5px 30px 0px rgba(0, 0, 0, 0.08);\n      "]);return DropdownRenderContent_templateObject=function(){return e},e}let DropdownRenderContent=e=>{let{changeModel:t,close:n,menuList:o}=e,r=(0,X.useCallback)(e=>{t(e),n()},[t,n]);return(0,U.tZ)(z.xu,{backgroundColor:"$color_bg_elevated_primary",borderRadius:"16px",css:e=>{var t;return(0,J.iv)(DropdownRenderContent_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_secondary)},children:(0,U.tZ)(z.xu,{padding:"16px 20px",children:(0,U.tZ)(ModelSelectList,{menuList:o,changeModel:r})})})},ModelSelectDropdown=e=>{let{changeModel:t,modelList:n,selectedModel:o}=e,{id:r}=(0,e_.mp)(),{id:i}=(0,e_.hw)(),{id:a}=(0,e_.mn)(),{id:l}=(0,e_._n)(),c=!n.length,changeModel=e=>{let o=e;e._id===r&&(o=n.find(e=>e._id===a)||e),e._id===i&&(o=n.find(e=>e._id===l)||e),t(o)};return(0,U.tZ)(V.Lt,{x:"left",padding:11,renderOpener:e=>{let{open:t}=e;return(0,U.tZ)(z.xu,{height:"60px",children:(0,U.tZ)(DropdownOpenerWithButton,{loading:c,onClick:t,selectedModel:o})})},renderContent:e=>{let{close:t}=e;return(0,U.tZ)(z.xu,{width:"303px",children:(0,U.tZ)(DropdownRenderContent,{menuList:n,close:t,changeModel:changeModel})})}})},ProModeToggle=e=>{let{isProMode:t,isDarkMode:n,selectedModel:o,onToggleProMode:r}=e,{trackEvent:i}=(0,H.Ke)(),a=(0,G.T_)(),l=eE()(()=>{i("view_pro_mode_tool_tip",{purpose:null==o?void 0:o.displayName,is_pro_mode:t})},1e3);return(0,U.BX)(z.Ug,{alignItems:"center",gap:"12px",children:[(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"#9644FF",children:"Pro"}),(0,U.tZ)(V.u,{content:a("chat.feature_home.home.tool_tip.pro_mode"),position:{top:"-220%",left:"-200%"},children:(0,U.tZ)(z.xu,{display:"flex",alignItems:"center",height:"28px",children:(0,U.tZ)(eR.Z,{toggle:t,shadow:!0,onHover:l,onToggle:r,containerData:{width:54,height:28,px:4,py:4,borderRadius:50,bg:{checked:n?"#241536":"#DDCCF3",unchecked:"$palette_gray_gray_150"}},sliderData:{size:20,bg:{checked:"#7108F7",unchecked:"$color_icon_white"}},innerItem:(0,U.tZ)(ei.JO,{as:ei.GU,size:14,color:t?"$color_icon_white":"#7108F7"})})})})]})};function ChatTextAreaForKeyin(e){var t;let{children:n,selectedModel:o,input:r}=e,i=(0,K.TQ)({modelName:null!==(t=null==o?void 0:o.name)&&void 0!==t?t:""});if(i){let{keyin:e,getAdCreativeId:t,getPackageAdCreativeId:o,getInventoryCodes:a,getAdEvent:l}=i,c=0===r.trim().length?e:r,d=!!e,s=0===r.trim().length?e:r,u=s===e?{adCreativeId:t,packageAdCreativeId:o,inventoryCodes:a}:void 0;return n({placeholder:c,isGenerateButtonActive:d,advertOrInputMessage:s,adContext:u,adEvent:{adEventName:"click_ad_input_keyin",adEventBody:l}})}let a=null==o?void 0:o.displayOptions.placeholder,l=!!r;return n({placeholder:a,isGenerateButtonActive:l,advertOrInputMessage:r,adContext:void 0})}function ChatTextAreaGroup_templateObject(){let e=(0,D._)(["\n                              linear-gradient(",", ","),\n                              linear-gradient(to bottom, #C9A9F4 0%, #924CEC 100%);\n                                  background-origin: border-box;\n                                  background-clip: content-box, border-box;\n                              "]);return ChatTextAreaGroup_templateObject=function(){return e},e}function ChatTextAreaGroup_templateObject1(){let e=(0,D._)(["\n                    transition: border-color 0.4s ease-in-out,\n                      background-color 0.4s ease-in-out;\n                    background-image: ",";\n                  "]);return ChatTextAreaGroup_templateObject1=function(){return e},e}function ChatTextAreaGroup_templateObject2(){let e=(0,D._)(["\n                          linear-gradient(",", ","),\n                          linear-gradient(to bottom, #FF9A86 0%, "," 100%);\n                              background-origin: border-box;\n                              background-clip: content-box, border-box;\n                          "]);return ChatTextAreaGroup_templateObject2=function(){return e},e}function ChatTextAreaGroup_templateObject3(){let e=(0,D._)(["\n                      transition: border-color 0.4s ease-in-out,\n                        background-color 0.4s ease-in-out;\n                      background-image: ",";\n                    "]);return ChatTextAreaGroup_templateObject3=function(){return e},e}let isDrawable=(e,t)=>(null==e||!e.displayName.includes("GPT")||!!t)&&(null==e?void 0:e.enableOptions.draw),ChatTextAreaGroup=e=>{let{changeModel:t,modelList:n,selectedModel:o,isDarkMode:r}=e,{value:i}=(0,N._)("isFastSearch"),a=(0,eC.Zl)(ey.u3),{success:l,totalCount:c}=(0,eC.sJ)(ey.h5),d=(0,eC.Zl)(ey.Aq),[s,u]=(0,eC.FV)(ey.gn),{isProMode:p}=(0,eb.M2)(),{isFocus:_}=(0,eb.Qc)(),{trackEvent:h}=(0,H.Ke)(),{handleOpenLoginDialog:m}=(0,eI.tF)(),{id:g}=(0,e_.mp)(),{id:x}=(0,e_.Ob)(),{id:v}=(0,e_.Jv)(),{id:f}=(0,e_.mn)(),{id:b}=(0,e_.hw)(),{id:y}=(0,e_._n)(),{variant:C}=(0,el.i6)("fe-web-fasearch-toggle"),{user:k}=(0,eu.aF)(),w=!o,Z=(null==o?void 0:o._id)===g,I=(null==o?void 0:o._id)===b,O=(null==o?void 0:o._id)===v,[S,B]=(0,X.useState)(!!i);(0,X.useEffect)(()=>{if((null==C?void 0:C.feature_enabled)!==void 0){let e=localStorage.getItem("isFastSearch");null===e&&B(S)}},[S]);let[$,A]=(0,X.useState)(void 0);(0,X.useEffect)(()=>{let e=n.find(e=>e._id===x);A(e),s||(S?u("fast_ai_search_toggle_A"):u("fast_ai_search_toggle_B"))},[n,S]);let M={model_name:null==o?void 0:o.name.toUpperCase(),uploadPosition:"home",purpose:null==o?void 0:o.displayName,is_pro_mode:p,current_box_number:c},onToggleProMode=()=>{let e;if(!p&&!k){m();return}h("click_pro_mode_toggle",{purpose:null==o?void 0:o.displayName,is_pro_mode:p}),(e=p?(null==o?void 0:o._id)===y?n.find(e=>e._id===b):n.find(e=>e._id===g):(null==o?void 0:o._id)===b?n.find(e=>e._id===y):n.find(e=>e._id===f))&&t(e)},onToggleFastSearchMode=()=>{let e=!S;B(e),d(e),localStorage.setItem("isFastSearch",JSON.stringify(e)),A(e?n.find(e=>e._id===x):n.find(e=>e._id===v)),h("click_fast_ai_search_toggle",{purpose:null==o?void 0:o.displayName,is_fast_ai_search_toggle:!S,chathome_fast_ai_search_abtest_group:s})};return(0,X.useEffect)(()=>{(null==o?void 0:o._id)!==f&&a([])},[o,a]),(0,U.BX)(z.Ug,{gap:"5px",width:"100%",children:[(0,U.tZ)(ModelSelectDropdown,{changeModel:t,modelList:n,selectedModel:o}),(0,U.tZ)(ChatInputState,{children:e=>{var i,a;let{input:c,setInput:d,changeInput:u}=e;return(null==o?void 0:o._id)===g||(null==o?void 0:o._id)===b||(null==o?void 0:o._id)===f||(null==o?void 0:o._id)===y?(0,U.tZ)(ChatLinkState,{input:c,isDisabled:!p,children:(0,U.tZ)(z.gC,{width:"100%",minHeight:"60px",borderRadius:"30px",border:"2px solid",borderColor:p?"transparent":_?"$color_outline_secondary":"transparent",backgroundColor:"$color_surface_tertiary",css:e=>{var t,n;return(0,J.iv)(ChatTextAreaGroup_templateObject1(),p?(0,J.iv)(ChatTextAreaGroup_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_tertiary,null===(n=e.colors)||void 0===n?void 0:n.$color_surface_tertiary):"none")},children:(0,U.BX)(eZ.aA,{gap:"0",onFocus:()=>{},isDisabled:w,padding:"16px 18px 16px 18px",attachmentList:(null==o?void 0:null===(i=o.enableOptions)||void 0===i?void 0:i.image)&&(0,U.tZ)(AttachmentList,{eventProperties:M,setInput:d,marginBottom:"16px"}),children:[(0,U.tZ)(ChatTextareaV2,{value:c,placeholder:null==o?void 0:o.displayOptions.placeholder,onChange:u,selectedModel:o}),(0,U.tZ)(z.Ug,{height:"8px"}),(0,U.BX)(z.Ug,{justifyContent:"space-between",alignItems:"center",children:[(0,U.tZ)(eZ.Z,{isDisabled:w,drawable:isDrawable(o,!!k),promptHub:null==o?void 0:o.enableOptions.promptHub,code:null==o?void 0:o.enableOptions.code,file:(null==o?void 0:null===(a=o.enableOptions)||void 0===a?void 0:a.file)||Z||I,fileOptionCallback:()=>{var e;let r=n.find(e=>e._id===f||e._id===y);(null==o?void 0:null===(e=o.enableOptions)||void 0===e?void 0:e.file)||!r||t(r)},iconGroupEventProperties:{purpose:null==o?void 0:o.displayName,is_pro_mode:p},fileEventProperties:M,setInputText:d,onError:eO.wp}),(0,U.BX)(z.Ug,{alignItems:"center",gap:"8px",children:[(0,U.tZ)(ProModeToggle,{isProMode:p,isDarkMode:r,selectedModel:o,onToggleProMode:onToggleProMode}),(0,U.tZ)(GenerateButton,{generateMessage:c,selectedModel:o,active:!!c&&l,focus:_})]})]})]})})}):(0,U.tZ)(ChatTextAreaForKeyin,{selectedModel:o,input:c,children:e=>{let{placeholder:t,isGenerateButtonActive:n,advertOrInputMessage:i,adContext:a,adEvent:l}=e;return(0,U.BX)(z.Ug,{width:"100%",minHeight:"60px",borderRadius:"40px",alignItems:"flex-end",border:"2px solid",borderColor:O&&S?"transparent":_?"$color_outline_secondary":"transparent",backgroundColor:"$color_surface_tertiary",css:e=>{var t,n,o;return(0,J.iv)(ChatTextAreaGroup_templateObject3(),O&&S?(0,J.iv)(ChatTextAreaGroup_templateObject2(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_tertiary,null===(n=e.colors)||void 0===n?void 0:n.$color_surface_tertiary,null===(o=e.colors)||void 0===o?void 0:o.$color_surface_brand):"none")},children:[(0,U.tZ)(z.xu,{width:"100%",height:"100%",padding:"16px 16px 13px 25px",children:(0,U.tZ)(ChatTextareaV2,{value:c,placeholder:t,onChange:u,selectedModel:O&&S?$:o,adEvent:l})}),(0,U.tZ)(z.xu,{padding:"16px",children:(0,U.BX)(z.Ug,{height:28,alignItems:"center",gap:"6px",justifyContent:"flex-end",children:[O&&(0,U.tZ)(FastSearchToggle,{isFastSearch:S,isDarkMode:r,selectedModel:o,fastSearchABValue:s,onToggleFastSearchMode:onToggleFastSearchMode}),(0,U.tZ)(GenerateButton,{generateMessage:i,selectedModel:O&&S?$:o,active:n,focus:_,adContext:a,adEvent:l})]})})]})}})}})]})},getChipList=e=>{let{model:t,count:n}=e;return q.Np.William.get((0,Y.stringifyQueryParams)("/api/v2/chip",{model:t,count:n}))},getGPT4vChipList=()=>q.Np.William.get("/chip/gpt4v"),useChipList=e=>{let t=(0,G.bU)(),n="ja-JP"===t?6:3;return(0,et.dH)("/api/v2/chip?model=".concat(e,"&count=").concat(n),()=>getChipList({model:e,count:n}),{revalidateOnFocus:!1})},useGPT4vChipList=e=>(0,et.dH)("/chip/gpt4v",()=>getGPT4vChipList(),{revalidateOnFocus:!1});function ImageCachedChip_templateObject(){let e=(0,D._)(["\n        position: relative;\n        cursor: pointer;\n        aspect-ratio: 1;\n        box-shadow: 10px 10px 20px 0px rgba(0, 0, 0, 0.1);\n        background: url(thumbnail) lightgray 50%, no-repeat;\n\n        &:hover {\n          .overlay {\n            opacity: 1;\n          }\n        }\n      "]);return ImageCachedChip_templateObject=function(){return e},e}function ImageCachedChip_templateObject1(){let e=(0,D._)(["\n          transition: opacity 0.3s ease-out;\n        "]);return ImageCachedChip_templateObject1=function(){return e},e}function ImageCachedChip_templateObject2(){let e=(0,D._)(["\n          transition: opacity 0.3s ease-out;\n        "]);return ImageCachedChip_templateObject2=function(){return e},e}let ImageCachedChip=e=>{let{item:{thumbnail:t,content:n,prompt:o},index:r}=e,{trackEvent:i}=(0,H.Ke)(),{selectedModel:a}=(0,eb.M2)(),{changeInput:l}=(0,eb.Qc)();return(0,U.BX)(z.xu,{flex:1,borderRadius:"20px",overflow:"hidden",onMouseOver:()=>{i("hover_cached_chip_img_card",{model_name:eA.ChatModel.SD3_TURBO.toUpperCase(),input_content:o,title:n,index:r,purpose:null==a?void 0:a.displayName})},onClick:()=>{i("click_cached_chip",{model_name:eA.ChatModel.SD3_TURBO.toUpperCase(),command_chip_name:o,index:r,purpose:null==a?void 0:a.displayName}),l(null!=o?o:"")},css:(0,J.iv)(ImageCachedChip_templateObject()),children:[(0,U.tZ)("img",{src:t,style:{background:"lightgray 50%",objectFit:"cover",aspectRatio:1,width:"100%",zIndex:-1}}),(0,U.tZ)(z.xu,{className:"overlay",position:"absolute",width:"100%",height:"100%",top:"0",left:"0",background:"linear-gradient(180deg, rgba(0, 0, 0, 0.00) 0%, #000 100%)",zIndex:0,opacity:0,css:(0,J.iv)(ImageCachedChip_templateObject1())}),(0,U.tZ)(z.Jd,{className:"overlay",position:"absolute",bottom:0,typo:"$140-14-med",color:"$color_text_white",opacity:0,margin:"20px",css:(0,J.iv)(ImageCachedChip_templateObject2()),children:n})]})};var eL=n(701),eF=n(70810);let useComponetEffect=e=>{let{chipList:t,selectedUnit:n,uuid:o,trackEvent:r}=e;(0,X.useEffect)(()=>{if((null==t?void 0:t.length)&&(null==n?void 0:n.name)){let e=t.filter(e=>isAdChocoChip(e));o.current=(0,eF.Z)(),r("expose_cached_chip",{model_name:null==n?void 0:n.name.toUpperCase(),content:{...null==t?void 0:t.map(e=>e.content)},section_order:2,uuid:o.current,...e.length>0&&{is_ad:!0,_id:{...e.map(e=>e.adId)},...e[0].eventProperty}})}},[null==t?void 0:t.length,null==n?void 0:n.name])},handleClick=e=>{let{selectedUnit:t,isRedirecting:n,hoverStyles:o,uuid:r,trackEvent:i,setIsRedirecting:a,onMakeNewChat:l}=e;return{onClickNewChat:(e,c)=>async()=>{if(!(null==t?void 0:t._id)||n)return;if(performance.mark("startTask"),isAdChocoChip(e)){var d,s,u;let t=null!==(d=/\[🔗바로가기\]\(([^)]+)\)/.exec(null==e?void 0:e.answer))&&void 0!==d?d:[],n=null!==(s=/\[\[1\]\]\(([^)]+)\)/.exec(null==e?void 0:e.answer))&&void 0!==s?s:[],o=null!==(u=t[1])&&void 0!==u?u:n[1];if(o)try{await eL.default.get(o+"&position=home",{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(e){}}i("click_cached_chip",{section_order:2,model_name:null==t?void 0:t.name.toUpperCase(),index:c,command_chip_name:e.content,uuid:r.current,...isAdChocoChip(e)?{is_ad:!0,_id:e.adId,...e.eventProperty}:{color_name:o[c]}}),a(!0);let p=await l({unitId:null==t?void 0:t._id,input:e.content,isChocoChip:!0,adId:isAdChocoChip(e)?e.adId:void 0,inventory:isAdChocoChip(e)?"chip":void 0});(null==p?void 0:p.newChatCreated)||a(!1)}}},isAdChocoChip=e=>"advertise"===e.category;function ImageCachedChipList_templateObject(){let e=(0,D._)(["\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr;  \n      "]);return ImageCachedChipList_templateObject=function(){return e},e}let ImageCachedChipList=()=>{let{data:e,isLoading:t,isValidating:n}=useChipList(eA.ChatModel.SD3_TURBO),{trackEvent:o}=(0,H.Ke)(),r=(0,G.T_)(),{selectedModel:i}=(0,eb.M2)();return((0,X.useEffect)(()=>{(null==e?void 0:e.length)&&o("expose_cached_chip",{model_name:eA.ChatModel.SD3_TURBO.toUpperCase(),content:{...null==e?void 0:e.map(e=>e.content)},purpose:null==i?void 0:i.displayName})},[e]),t||n)?null:e&&!(e.length<1)?(0,U.BX)(z.gC,{pt:"30px",gap:"20px",children:[(0,U.tZ)(z.Jd,{typo:"$100-16-semi",color:"$color_text_primary",children:r("chat.feature_home.contents_section.title.image")}),(0,U.tZ)(z.Ug,{gap:"15px",css:(0,J.iv)(ImageCachedChipList_templateObject()),children:e.map((e,t)=>{if(!isAdChocoChip(e))return(0,U.tZ)(ImageCachedChip,{item:e,index:t},e.content)})})]}):void 0};var eP=n(11286),eU=n.n(eP);let deleteMenuListItem=(e,t)=>t.length<1?e:e.filter(e=>!t.includes(e.path)),eD=[{title:"feature_voice_note.meta.title",path:"/voice-note",src:"https://fe-web-assets.wow.wrtn.ai/home/VoiceNoteHomeIcon.svg",textColor:"#7B2E0C",textDarkColor:"#FFF2E3",backgroundColor:"#FFF2E3",backgroundDarkColor:"#40270B",iconBackgroundColor:"#FFF2E3",iconBackgroundDarkColor:"#40270B",tooltipMessage:"feature_voice_note.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 92.5px)"},event:{name:"click_meeting_note_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_blog.meta.title",path:"/blog-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/BlogHomeIcon.svg",textColor:"var(--color_text_accent_green)",backgroundColor:"var(--color_surface_accent_green)",iconBackgroundColor:"var(--color_surface_accent_bg_green)",tooltipMessage:"feature_blog.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 93px)"},event:{name:"click_blog_icon_btn"},availableLocale:["ko-KR","ja-JP"]},{title:"feature_assignment.meta.title",path:"/assignment",src:"https://fe-web-assets.wow.wrtn.ai/home/ReportHomeIcon.svg",textColor:"var(--color_text_accent_pink)",backgroundColor:"var(--color_surface_accent_pink)",iconBackgroundColor:"var(--color_surface_accent_bg_pink)",tooltipMessage:"feature_assignment.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 139px)"},event:{name:"click_assignment_icon_btn"},availableLocale:["ko-KR","ja-JP"]},{title:"feature_cover_letter.meta.title",path:"/cover-letter",src:"https://fe-web-assets.wow.wrtn.ai/home/CoverletterHomeIcon.svg",textColor:"var(--color_text_accent_violet)",backgroundColor:"var(--color_surface_accent_violet)",iconBackgroundColor:"var(--color_surface_accent_bg_violet)",tooltipMessage:"feature_cover_letter.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 142px)"},event:{name:"click_job_application_icon_btn"},availableLocale:["ko-KR","ja-JP"]},{title:"feature_ppt.meta.title",path:"/slide-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/PPTHomeIcon.svg",textColor:"var(--color_text_accent_blue)",backgroundColor:"var(--color_surface_accent_blue)",iconBackgroundColor:"var(--color_surface_accent_bg_blue)",tooltipMessage:"feature_ppt.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 118px)"},event:{name:"click_ppt_generator_icon_btn"},availableLocale:["ko-KR","ja-JP"]},{title:"feature_ai_protection.meta.title",path:"/ai-protect",src:"https://fe-web-assets.wow.wrtn.ai/home/AiProtectHomeIcon.svg",textColor:"var(--color_text_accent_red)",backgroundColor:"var(--color_surface_accent_red)",iconBackgroundColor:"var(--color_surface_accent_bg_red)",tooltipMessage:"feature_ai_protection.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 162.5px)"},event:{name:"click_ai_protect_icon_btn"},availableLocale:["ko-KR","ja-JP"]},{title:"feature_summary.meta.title",path:"/summary",src:"https://fe-web-assets.wow.wrtn.ai/home/SummaryHomeIcon.svg",textColor:"#0A4134",textDarkColor:"#ECFFFB",backgroundColor:"#ECFFFB",backgroundDarkColor:"#0A4134",iconBackgroundColor:"#ECFFFB",iconBackgroundDarkColor:"#0A4134",tooltipMessage:"feature_summary.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 171.5px)"},event:{name:"click_summary_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_resume_generator.meta.title",path:"/resume-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/ResumeHomeIcon.svg",textColor:"#77660B",textDarkColor:"#FCF7BE",backgroundColor:"#FCF7BE",backgroundDarkColor:"#77660B",iconBackgroundColor:"#FFFDD8",iconBackgroundDarkColor:"#333010",tooltipMessage:"feature_resume_generator.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 135px)"},event:{name:"resume"},availableLocale:["ko-KR"]},{title:"feature_coding_task.meta.title",path:"/coding-task",src:"https://fe-web-assets.wow.wrtn.ai/home/CodingTaskHomeIcon.svg",textColor:"#0A4134",textDarkColor:"#FBF1FF",backgroundColor:"#FBF1FF",backgroundDarkColor:"#372456",iconBackgroundColor:"#FBF1FF",iconBackgroundDarkColor:"#352353",tooltipMessage:"feature_coding_task.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 130px)"},event:{name:"click_coding_assignment_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_presentation_script_generator.meta.title",path:"/presentation-script-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/Presentation.svg",textColor:"#7B2E0C",textDarkColor:"#FFF2E3",backgroundColor:"#FFF2E3",backgroundDarkColor:"#40270B",iconBackgroundColor:"#FFF2E3",iconBackgroundDarkColor:"#40270B",tooltipMessage:"feature_presentation_script_generator.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 95px)"},event:{name:"click_coding_assignment_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_book_review_generator.meta.title",path:"/book-review-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/BookReviewHomeIcon.svg",textColor:"#2C5C77",textDarkColor:"#D7EBFF",backgroundColor:"#D7EBFF",backgroundDarkColor:"#2C5C77",iconBackgroundColor:"#E9F6FF",iconBackgroundDarkColor:"#1F3444",tooltipMessage:"feature_book_review_generator.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 87px)"},event:{name:"click_book_review_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_scenario_generator.meta.title",path:"/video-scenario",src:"https://fe-web-assets.wow.wrtn.ai/home/ScenarioGeneratorIcon.svg",textColor:"#3F457A",textDarkColor:"#F0EFEB",backgroundColor:"#D7DFFF",backgroundDarkColor:"#3F457A",iconBackgroundColor:"#EDF1FF",iconBackgroundDarkColor:"#1F2146",tooltipMessage:"feature_scenario_generator.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 100px)"},event:{name:"click_video_scenario_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_news_draft.meta.title",path:"/news-draft",src:"https://fe-web-assets.wow.wrtn.ai/home/NewsArticleHomeIcon.svg",textColor:"#3E462F",textDarkColor:"#F6FFE3",backgroundColor:"#F1FFD3",backgroundDarkColor:"#2C331F",iconBackgroundColor:"#F6FFE3",iconBackgroundDarkColor:"#2C331F",tooltipMessage:"feature_news_draft.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 94.5px)"},event:{name:"click_article_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_interview_practice.meta.title",path:"/interview-practice",src:"https://fe-web-assets.wow.wrtn.ai/home/InterviewPracticeHomeIcon.svg",textColor:"#703469",backgroundColor:"#FFE6F8",backgroundDarkColor:"#703469",iconBackgroundColor:"#FFF3FC",iconBackgroundDarkColor:"#3E1C3F",textDarkColor:"#FFE6F8",tooltipMessage:"feature_interview_practice.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 114px)"},event:{name:"click_interview_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_student_record.meta.title",path:"/student-record",src:"https://fe-web-assets.wow.wrtn.ai/home/StudentRecordHomeIcon.svg",textColor:"var(--color_text_accent_red)",backgroundColor:"var(--color_surface_accent_red)",iconBackgroundColor:"var(--color_surface_accent_bg_red)",tooltipMessage:"feature_student_record.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 104px)"},event:{name:"click_school_record_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_sns_generator.meta.title",path:"/sns-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/SNSHomeIcon.svg",textColor:"var(--color_text_accent_violet)",backgroundColor:"var(--color_surface_accent_violet)",iconBackgroundColor:"var(--color_surface_accent_bg_violet)",tooltipMessage:"feature_sns_generator.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 110.5px)"},event:{name:"click_sns_post_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_product_review_generator.meta.title",path:"/product-review-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/ProductReviewHomeIcon.svg",textColor:"var(--color_text_accent_pink)",backgroundColor:"var(--color_surface_accent_pink)",iconBackgroundColor:"var(--color_surface_accent_bg_pink)",tooltipMessage:"feature_product_review_generator.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 103.5px)"},event:{name:"click_review_generator_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_product_detail_generator.meta.title",path:"/product-detail-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/ProductDetailHomeIcon.svg",textColor:"var(--color_text_accent_green)",backgroundColor:"var(--color_surface_accent_green)",iconBackgroundColor:"var(--color_surface_accent_bg_green)",tooltipMessage:"feature_product_detail_generator.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 113.5px)"},event:{name:"click_product_detail_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_ad_copy.meta.title",path:"/ad-copy",src:"https://fe-web-assets.wow.wrtn.ai/home/AdCopyHomeIcon.svg",textColor:"var(--color_text_accent_blue)",backgroundColor:"var(--color_surface_accent_blue)",iconBackgroundColor:"var(--color_surface_accent_bg_blue)",tooltipMessage:"feature_ad_copy.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 110px)"},event:{name:"click_copywriter_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_ebook_generator.meta.title",path:"/ebook-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/EbookHomeIcon.svg",textColor:"var(--color_text_accent_red)",backgroundColor:"var(--color_surface_accent_red)",iconBackgroundColor:"var(--color_surface_accent_bg_red)",tooltipMessage:"feature_ebook_generator.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 103.5px)"},event:{name:"click_ebook_icon_btn"},availableLocale:["ko-KR"]}];function MenuListItem_templateObject(){let e=(0,D._)(["\n          cursor: pointer;\n\n          &:hover {\n            background-color: ",";\n\n            p {\n              color: "," !important;\n            }\n\n            .aiWorkHomeMenuImage {\n              background-color: ",";\n            }\n          }\n        "]);return MenuListItem_templateObject=function(){return e},e}function MenuListItem_templateObject1(){let e=(0,D._)(["\n            background-color: ",";\n          "]);return MenuListItem_templateObject1=function(){return e},e}let MenuListItem=e=>{let{menu:t}=e,{push:n}=(0,W.tv)(),{trackEvent:o}=(0,H.Ke)(),{mode:r}=(0,er.TC)(),i=(0,G.T_)();return(0,U.tZ)(V.u,{content:i(t.tooltipMessage),position:t.tooltipPosition,children:(0,U.BX)(z.gC,{onClick:()=>{n(t.path),o(t.event.name)},gap:"8px",alignItems:"center",borderRadius:"12px",width:"104px",height:"104px",justifyContent:"center",css:e=>{var n;return(0,J.iv)(MenuListItem_templateObject(),"dark"===r&&t.backgroundDarkColor?t.backgroundDarkColor:t.backgroundColor,"dark"===r&&t.textDarkColor?t.textDarkColor:t.textColor,null===(n=e.colors)||void 0===n?void 0:n.$color_icon_white)},children:[(0,U.tZ)(z.xu,{width:"60px",height:"60px",borderRadius:"60px",className:"aiWorkHomeMenuImage",display:"flex",alignItems:"center",justifyContent:"center",css:(0,J.iv)(MenuListItem_templateObject1(),"dark"===r&&t.iconBackgroundDarkColor?t.iconBackgroundDarkColor:t.iconBackgroundColor),children:(0,U.tZ)("img",{src:t.src,alt:i(t.title),width:"36px",height:"36px"})}),(0,U.tZ)(z.Jd,{typo:"$100-16-med",color:"$color_text_primary",children:i(t.title)})]},t.title)})},MenuList=()=>{let e=(0,G.bU)(),t=eD.filter(t=>t.availableLocale.includes(e)),n=[],o=(0,el.T6)("fe-web-voice-note-enabled");(o.loading||!o.flag)&&n.push("/voice-note");let r=deleteMenuListItem(t,n),i=(0,N.ac)("(max-width: 1024px)",!1),a=eU()(r,i?6:8);return(0,U.tZ)(z.gC,{gap:"10px",flexWrap:["wrap","wrap","wrap","wrap"],paddingX:["68px","68px","68px",0],justifyContent:"center",children:a.map((e,t)=>(0,U.tZ)(z.Ug,{gap:"10px",justifyContent:"center",children:e.map(e=>(0,U.tZ)(MenuListItem,{menu:e},e.title))},t))})};function TipBoxItem_templateObject(){let e=(0,D._)(["\n        cursor: pointer;\n        flex-shrink: 0;\n\n        border: 1px solid ",";\n\n        :hover {\n          background-color: ",";\n        }\n      "]);return TipBoxItem_templateObject=function(){return e},e}let TipBoxItem=e=>{let{item:t,eventProperties:n}=e,{changeInput:o}=(0,eb.Qc)(),{trackEvent:r}=(0,H.Ke)(),i=(0,X.useCallback)(()=>{r("click_tip_box",n),o(t.prompt)},[t,o,n,r]);return(0,X.useEffect)(()=>{r("expose_tip_box",n)},[]),(0,U.BX)(z.Ug,{onClick:i,paddingX:"12px",borderRadius:"40px",height:"36px",alignItems:"center",backgroundColor:"$color_surface_tertiary",css:e=>{var t,n;return(0,J.iv)(TipBoxItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary,null===(n=e.colors)||void 0===n?void 0:n.$color_surface_secondary)},children:[(0,U.tZ)(z.Jd,{typo:"$100-16-med",color:"$color_text_primary",children:t.content}),(0,U.tZ)(ei.JO,{as:eo.lA1,color:"$color_icon_primary",size:18})]})},getTipBox=async e=>await q.Np.William.get("/api/v2/chip/tip-box?limit=8&model=".concat(e)),useGetTipBox=e=>(0,et.dH)("/api/v2/chip/tip-box",()=>getTipBox(e)),TipBoxList=e=>{let{isProMode:t,selectedModel:n}=e,[o]=(0,X.useState)(0),{data:r,mutate:i}=useGetTipBox(n.name);if((0,X.useEffect)(()=>{i()},[t,i]),r)return(0,U.tZ)(z.Ug,{gap:"4px",overflow:"hidden",flexWrap:"wrap",height:"36px",justifyContent:"center",children:r.map((e,r)=>(0,U.tZ)(TipBoxItem,{item:e,eventProperties:{purpose:n.displayName,is_pro_mode:t,index:r,title:e.content,input_content:e.prompt,set_order:o}},e.content))})};function Infographic_Write_extends(){return(Infographic_Write_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var Infographic_Write=function(e){return X.createElement("svg",Infographic_Write_extends({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none"},e),s||(s=X.createElement("g",{clipPath:"url(#Infographic_Write_svg__a)"},X.createElement("path",{stroke:"#0A811E",strokeLinecap:"square",strokeMiterlimit:10,strokeWidth:.84,d:"M20.794 7.194 3.187 24.802"}),X.createElement("path",{fill:"#4BC662",d:"M23.672 11.602a5.12 5.12 0 0 0 0-7.23 5.12 5.12 0 0 0-7.23 0l-2.055 2.054-.493 3.448-1.477-1.477-6.18 6.18-.363 5.45-.167 2.31 7.76-.53 4.652-4.65-1.457-1.458h2.914l4.095-4.095z"}),X.createElement("path",{fill:"url(#Infographic_Write_svg__b)",d:"M23.672 11.602a5.12 5.12 0 0 0 0-7.23 5.12 5.12 0 0 0-7.23 0l-2.055 2.054-.493 3.448-1.477-1.477-6.18 6.18-.363 5.45-.167 2.31 7.76-.53 4.652-4.65-1.457-1.458h2.914l4.095-4.095z"}),X.createElement("path",{stroke:"#0A811E",strokeLinecap:"square",strokeWidth:.84,d:"M6.927 24.802h14.145"}))),u||(u=X.createElement("defs",null,X.createElement("linearGradient",{id:"Infographic_Write_svg__b",x1:7.154,x2:14.153,y1:14.054,y2:21.054,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{offset:.171,stopColor:"#00AA1E",stopOpacity:0}),X.createElement("stop",{offset:.441,stopColor:"#95E3A5",stopOpacity:.3}),X.createElement("stop",{offset:.536,stopColor:"#00AA1E",stopOpacity:.7}),X.createElement("stop",{offset:1,stopColor:"#00AA1E",stopOpacity:0})),X.createElement("clipPath",{id:"Infographic_Write_svg__a"},X.createElement("path",{fill:"#fff",d:"M0 0h28v28H0z"})))))};function TipBoxCardItem_templateObject(){let e=(0,D._)(["\n        :hover {\n          background-color: ",";\n          border-color: ",";\n        }\n      "]);return TipBoxCardItem_templateObject=function(){return e},e}let TipBoxCardItem=e=>{let{item:t,eventProperties:n}=e,{changeInput:o}=(0,eb.Qc)(),{trackEvent:r}=(0,H.Ke)(),i=(0,X.useCallback)(()=>{r("click_tip_box",n),o(t.prompt)},[t,o,n,r]);return(0,X.useEffect)(()=>{r("expose_tip_box",n)},[]),(0,U.BX)(z.gC,{style:{cursor:"pointer"},onClick:i,width:"212px",height:"180px",padding:"16px",borderRadius:"10px",border:"1px solid",borderColor:"$color_outline_tertiary",justifyContent:"space-between",position:"relative",css:e=>{var t,n;return(0,J.iv)(TipBoxCardItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_bg_elevated_secondary,null===(n=e.colors)||void 0===n?void 0:n.$color_outline_secondary)},children:[(0,U.BX)(z.gC,{gap:"8px",children:[(0,U.tZ)(z.xu,{width:"28px",height:"28px",children:(0,U.tZ)(ei.JO,{as:Infographic_Write,size:28})}),(0,U.tZ)(z.Jd,{style:{whiteSpace:"pre-wrap"},typo:"$140-16-med",color:"$color_text_primary",children:t.content})]}),(0,U.tZ)(z.Ug,{justifyContent:"flex-end",children:(0,U.tZ)(z.xu,{display:"flex",width:"24px",height:"24px",borderRadius:"50%",bg:"$color_surface_tertiary",justifyContent:"center",alignItems:"center",children:(0,U.tZ)(ei.JO,{as:eo.lA1,color:"$color_icon_primary",size:18})})})]})},TipBoxCardList=e=>{let{isProMode:t,selectedModel:n}=e,[o,r]=(0,X.useState)(0),{trackEvent:i}=(0,H.Ke)(),{data:a,mutate:l}=useGetTipBox(t?"pro_mode":"gpt4");if((0,X.useEffect)(()=>{l()},[t,l]),a)return(0,U.tZ)(CarouselContainer,{mt:"40px",gap:"12px",onClickScrollButton:e=>{"left"===e?r(e=>e-1):r(e=>e+1),i("click_next_btn",{purpose:n.displayName,direction:"left"===e?"previous":"next",set_order:o})},isCharacterCarousel:!1,renderContent:()=>(0,U.tZ)(z.Ug,{gap:"20px",children:a.map((e,r)=>(0,U.tZ)(TipBoxCardItem,{item:e,eventProperties:{purpose:n.displayName,is_pro_mode:t,index:r,title:e.content,input_content:e.prompt,set_order:o}},e.content))})})},ProModeContentSection=e=>{let{selectedModel:t,isProMode:n}=e,o=(0,G.bU)();return(0,U.BX)(z.gC,{alignItems:"center",children:[(0,U.tZ)(z.xu,{height:"11px"}),"ja-JP"!==o&&(0,U.tZ)(TipBoxList,{selectedModel:t,isProMode:n}),(0,U.tZ)(z.xu,{height:"20px"}),(0,U.tZ)(MenuList,{}),"ja-JP"===o&&(0,U.tZ)(TipBoxCardList,{isProMode:n,selectedModel:t})]})};var eX=n(76436),eJ=n(37047);let GetRealTimeSearchRank=e=>{var t;let{children:n}=e,{trackEvent:o}=(0,H.Ke)(),{user:r}=(0,eu.aF)(),{data:i,isLoading:a}=useGetTrend(),{collect:l}=(0,eJ.B)(),c=(0,X.useMemo)(()=>{var e;return null!==(e=null==i?void 0:i.items.slice(0,10))&&void 0!==e?e:[]},[null==i?void 0:i.items]),d=null!==(t=null==i?void 0:i.updated_at)&&void 0!==t?t:"";return(0,X.useEffect)(()=>{var e,t;a||(o("expose_search_trend",{query_list:i}),l("ExposeSearchTrend",{is_login:!!r,is_wrtn:null!=r&&null!==(e=r.email)&&void 0!==e&&!!e.includes("@wrtn.io"),purpose:"AI 검색",query_list:null!==(t=null==i?void 0:i.items.map(e=>e.keyword))&&void 0!==t?t:[]}))},[a,i,o,l]),n({rankingList:c,updatedAt:d,loading:a})};function ItemLabel_templateObject(){let e=(0,D._)(["\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            width: 240px;\n          "]);return ItemLabel_templateObject=function(){return e},e}let ItemLabel=e=>{var t;let{item:n}=e,o=n.keyword,r=null!==(t=null==n?void 0:n.fluctuation)&&void 0!==t?t:0,i=!n.is_new&&r&&0!==r;return(0,U.BX)(z.Ug,{justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,U.tZ)(z.xu,{display:"flex",alignItems:"center",children:(0,U.tZ)(z.Jd,{typo:"$160-15-med",color:"$color_text_primary",overflow:"hidden",css:(0,J.iv)(ItemLabel_templateObject()),children:o})}),(i||n.is_new)&&(0,U.BX)(z.xu,{width:"30px",display:"flex",alignItems:"center",justifyContent:"flex-end",children:[i&&(0,U.BX)(z.Ug,{gap:"1px",children:[(0,U.tZ)(z.Jd,{typo:"$110-12-semi",color:r>0?"$palette_main_inspire_red_900":"$palette_sub_blue_500",children:Math.abs(r)}),(0,U.tZ)(ei.JO,{as:r>0?eo.wtG:eo.aEp,size:14,color:r>0?"$palette_main_inspire_red_900":"$palette_sub_blue_500"})]}),n.is_new&&(0,U.tZ)(z.Jd,{typo:"$110-12-semi",color:"$color_alert_warning",children:"NEW"})]})]})};var ez=n(6644),eN=n(32060);let RankingListUpdateAnimation=e=>{let{children:t,item:n}=e,[o,r]=(0,X.useState)(),i={enter:{y:-30,opacity:0,position:"absolute"},center:e=>({y:0,opacity:1,position:"relative",transition:{duration:.5,delay:e}}),exit:e=>({y:30,opacity:0,position:"absolute",transition:{duration:.5,delay:e}})};return(0,X.useEffect)(()=>{o||r(n)},[n,o]),(0,U.tZ)(ez.M,{initial:!1,children:(0,U.BX)(z.gC,{overflow:"hidden",width:"100%",height:"30px",position:"relative",alignItems:"center",children:[(0,U.tZ)(eN.E.div,{initial:!!o&&"center",animate:"exit",exit:"exit",custom:.75*n.rank,variants:i,style:{width:"100%",height:"30px",display:"flex",alignItems:"center"},onAnimationComplete:()=>{r(n)},children:t({item:o})},"previous-".concat(n.id)),(0,U.tZ)(eN.E.div,{initial:!!o&&"enter",animate:"center",exit:"exit",custom:.75*n.rank,variants:i,style:{width:"100%",height:"30px",display:"flex",alignItems:"center"},children:t({item:n})},n.id)]})})};function RankingListItem_templateObject(){let e=(0,D._)(["\n          cursor: pointer;\n\n          &:hover {\n            background-color: ",";\n          }\n        "]);return RankingListItem_templateObject=function(){return e},e}let RankingListItem=e=>{let{item:t,ranking:n,topNumber:o=3}=e,{user:r}=(0,eu.aF)(),[i,a]=(0,X.useState)(!1),{trackEvent:l}=(0,H.Ke)(),{collect:c}=(0,eJ.B)(),{selectedModel:d}=(0,eb.M2)(),{generateAndPushNormalChatRoom:s}=(0,ep.Tt)(),u=(0,eB.Zl)(ey._8),openNewChat=async()=>{var e;d&&(l("click_search_trend_query",{ranking:t.rank,query:t.question}),c("ClickSearchTrend",{is_login:!!r,is_wrtn:!!(null==r?void 0:null===(e=r.email)||void 0===e?void 0:e.includes("@wrtn.io")),ranking:t.rank,query:t.question}),a(!0),u(e=>({...e,isChocoChip:!0})),await s({selectedModel:d,generateMessage:t.question,trendId:t.id,callback:()=>{a(!1)},generation_type:"real_time_search"}))};return(0,U.BX)(U.HY,{children:[i&&(0,U.tZ)(V.fz,{isVisible:i}),(0,U.tZ)(z.xu,{width:"100%",borderRadius:"12px",padding:"4px 6px",margin:"-4px -6px",css:e=>{var t;return(0,J.iv)(RankingListItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary)},onClick:openNewChat,children:(0,U.tZ)(z.Ug,{width:"100%",alignItems:"center",justifyContent:"space-between",overflow:"hidden",children:(0,U.BX)(z.Ug,{alignItems:"center",gap:"13px",width:"100%",children:[(0,U.tZ)(z.xu,{flexShrink:0,width:"30px",height:"30px",borderRadius:"9px",backgroundColor:"$color_bg_elevated_secondary",display:"flex",alignItems:"center",justifyContent:"center",children:(0,U.tZ)(z.Jd,{typo:"$160-15-med",color:n<=o?"$color_text_brand":"$color_text_quaternary",children:n})}),(0,U.tZ)(RankingListUpdateAnimation,{item:t,children:e=>{let{item:t}=e;return t&&(0,U.tZ)(ItemLabel,{item:t})}})]})})})]})},AdRankingList=e=>{let{rankingList:t}=e,{generateAndPushNormalChatRoom:n}=(0,ep.Tt)(),{selectedModel:o}=(0,eb.M2)(),r=(0,eB.Zl)(ey._8),handleAiSeacrh=async(e,t,i)=>{o&&(r(e=>({...e,isChocoChip:!0})),await n({selectedModel:o,generateMessage:e,adContext:t,adEvent:i}))};return(0,U.BX)(z.Ug,{width:"100%",gap:"23px",children:[(0,U.BX)(z.gC,{width:"50%",gap:"7px",children:[(0,U.tZ)(K.vf,{onClickAiSeacrh:handleAiSeacrh}),t.slice(0,4).map((e,t)=>(0,U.tZ)(RankingListItem,{ranking:t+1,item:e,topNumber:2},t+1))]}),(0,U.tZ)(z.gC,{width:"50%",gap:"7px",children:t.slice(4,9).map((e,t)=>(0,U.tZ)(RankingListItem,{ranking:t+1+4,item:e},t+1+4))})]})},RankingList=e=>{let{rankingList:t}=e;return(0,U.BX)(z.Ug,{width:"100%",gap:"23px",children:[(0,U.tZ)(z.gC,{width:"50%",gap:"7px",children:t.slice(0,5).map((e,t)=>(0,U.tZ)(RankingListItem,{ranking:t+1,item:e},t+1))}),(0,U.tZ)(z.gC,{width:"50%",gap:"7px",children:t.slice(5,10).map((e,t)=>(0,U.tZ)(RankingListItem,{ranking:t+1+5,item:e},t+1+5))})]})};function RealTimeSearchRanking_templateObject(){let e=(0,D._)(["\n          border: 1px solid ",";\n        "]);return RealTimeSearchRanking_templateObject=function(){return e},e}let RealTimeSearchRanking=()=>{let e=(0,G.T_)(),t=(0,G.bU)(),{flag:n}=(0,el.T6)("fe-web-pb-ai-search"),{data:o}=(0,ea.GE)(),r=n&&o;return(0,U.BX)(z.xu,{children:[(0,U.tZ)(z.xu,{height:"20px"}),(0,U.tZ)(z.gC,{width:"100%",height:"260px",backgroundColor:"$color_bg_screen",borderRadius:"16px",padding:"20px 30px 26px",css:e=>{var t;return(0,J.iv)(RealTimeSearchRanking_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},children:(0,U.tZ)(GetRealTimeSearchRank,{children:n=>{let{rankingList:o,updatedAt:i}=n;return(0,U.BX)(z.gC,{gap:"10px",children:[(0,U.BX)(z.Ug,{justifyContent:"space-between",children:[(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(eX.fN,{size:14}),(0,U.tZ)(z.Jd,{typo:"$160-13-med",color:"$color_text_brand",children:e("chat.feature_home.home.realtime_trend")})]}),(0,U.tZ)(z.Jd,{typo:"$160-13-med",color:"$color_text_quaternary",children:i&&(0,ee.WU)(new Date(i),"YYYY.MM.DD HH:mm",t)})]}),(0,U.tZ)(z.gC,{children:r?(0,U.tZ)(AdRankingList,{rankingList:o}):(0,U.tZ)(RankingList,{rankingList:o})})]})}})})]})};var eH=n(78591),eG=n(10434);function ChatHomeBannerSlide_templateObject(){let e=(0,D._)(["\n        transition: transform 0.5s ease-out;\n        aspect-ratio: ",";\n      "]);return ChatHomeBannerSlide_templateObject=function(){return e},e}n(76208);let ChatHomeBannerSlide=e=>{let{chatBanner:t,realIndex:n,viewType:o}=e,{trackEvent:r}=(0,H.Ke)(),{startTrack:i}=(0,H.aY)(),{selectedUnit:a}=(0,eb.XV)(),{mode:l}=(0,er.TC)(),c=(0,N.ac)("(max-width: 540px)"),{isActive:d}=(0,eG.c6)(),s=(0,X.useRef)((0,eF.Z)());return(0,X.useEffect)(()=>{s.current=(0,eF.Z)()},[n]),(0,X.useEffect)(()=>{d&&r("view_event",{section_order:0,index:n,type:"banner",bannerId:t._id,bannerTitle:t.title,uuid:s.current,view_type:o,...t.eventProperty&&{is_ad:!0,...t.eventProperty}})},[d]),(0,U.tZ)(z.xu,{as:"a",width:"100%",css:(0,J.iv)(ChatHomeBannerSlide_templateObject(),c?960/270:650/110),href:t.webDetail.link,target:"_blank",rel:"noopener",onClick:()=>{var e;let o={index:n,uuid:s.current,...t.eventProperty&&{is_ad:!0,...t.eventProperty}};r("click_event",{section_order:0,type:"banner",bannerId:t._id,bannerTitle:t.title,...o}),i({link:t.webDetail.link,type:"home_banner",model_name:null!==(e=null==a?void 0:a.name.toUpperCase())&&void 0!==e?e:"",...o})},children:(0,U.tZ)("img",{src:c?t.appDetail["".concat(l,"ImageUrl")]:t.webDetail["".concat(l,"ImageUrl")],width:"100%",height:"auto"})})},PrevButton=e=>{let{onAutoPalyPaused:t}=e,n=(0,eG.oc)();return(0,U.tZ)(z.kC,{as:"button",size:10,alignItems:"center",onClick:e=>{t(),n.slidePrev()},children:(0,U.tZ)(ei.JO,{as:eo._yY,color:"$color_icon_white",size:10})})},NextButton=e=>{let{onAutoPalyPaused:t}=e,n=(0,eG.oc)();return(0,U.tZ)(z.kC,{as:"button",size:10,alignItems:"center",onClick:()=>{t(),n.slideNext()},children:(0,U.tZ)(ei.JO,{as:eo.GGG,color:"$color_icon_white",size:10})})};function ChatHomeBanner_templateObject(){let e=(0,D._)(["\n        aspect-ratio: ",";\n      "]);return ChatHomeBanner_templateObject=function(){return e},e}function ChatHomeBanner_templateObject1(){let e=(0,D._)(["\n              aspect-ratio: ",";\n            "]);return ChatHomeBanner_templateObject1=function(){return e},e}let ChatHomeBanner=()=>{let{data:e,isLoading:t}=(0,et.dH)("/api/v2/chat-banners",()=>getChatBanners(),{fallbackData:[],revalidateOnFocus:!1}),n=(0,N.ac)("(max-width: 540px)"),[o,r]=(0,X.useState)(0),[i,a]=(0,X.useState)(0),[l,c]=(0,X.useState)("rolling"),d=(0,X.useRef)(null),handleClickPaused=()=>{var e;d.current&&d.current.autoplay&&(null===(e=d.current.autoplay)||void 0===e?void 0:e.running)&&(d.current.autoplay.paused=!0,c("click"))};return 0===e.length?null:(0,U.tZ)(z.gC,{width:"100%",maxWidth:"740px",position:"relative",overflow:"hidden",margin:"auto",mt:"20px",css:(0,J.iv)(ChatHomeBanner_templateObject(),n?960/270:650/110),children:(0,U.tZ)(z.kC,{children:t||e&&0===e.length?(0,U.tZ)(z.xu,{width:"100%",css:(0,J.iv)(ChatHomeBanner_templateObject1(),n?960/270:650/110)}):(0,U.BX)(eG.tq,{onSlideChange:e=>{var t,n,o,l;(null==e?void 0:e.touches.diff)!==0&&(null==e?void 0:e.touches.diff)!==i?(c("swipe"),a(null==e?void 0:e.touches.diff)):(null===(n=d.current)||void 0===n?void 0:null===(t=n.autoplay)||void 0===t?void 0:t.running)&&!(null===(l=d.current)||void 0===l?void 0:null===(o=l.autoplay)||void 0===o?void 0:o.paused)&&c("rolling"),r(null==e?void 0:e.realIndex)},autoplay:{delay:5e3,disableOnInteraction:!1},speed:500,modules:[eH.pt],loop:!0,onSwiper:e=>{d.current=e},children:[e.map(e=>(0,U.tZ)(eG.o5,{children:(0,U.tZ)(ChatHomeBannerSlide,{chatBanner:e,realIndex:o,viewType:l})},e._id)),e.length>1&&(0,U.BX)(z.Ug,{position:"absolute",bottom:"10px",right:"10px",bg:"rgba(13, 13, 12, 0.40)",borderRadius:"3px",p:"3px 6px",alignItems:"center",zIndex:3,children:[!N.P8&&(0,U.tZ)(PrevButton,{onAutoPalyPaused:()=>{handleClickPaused()}}),(0,U.BX)(z.Jd,{typo:"$100-10-semi",color:"$color_text_white",children:[o+1," / ",null==e?void 0:e.length]}),!N.P8&&(0,U.tZ)(NextButton,{onAutoPalyPaused:()=>{handleClickPaused()}})]})]})})})},ContentsSection=e=>{let{selectedModel:t,isProMode:n}=e,o=(0,G.bU)(),{id:r}=(0,e_.QW)(),{id:i}=(0,e_.mp)(),{id:a}=(0,e_.Jv)(),{id:l}=(0,e_.mn)(),{id:c}=(0,e_.Ob)(),{id:d}=(0,e_.hw)(),{id:s}=(0,e_._n)();switch(null==t?void 0:t._id){case a:case c:return(0,U.BX)(U.HY,{children:["ja-JP"===o&&(0,U.tZ)(ChatHomeBanner,{}),(0,U.tZ)(RealTimeSearchRanking,{})]});case r:return(0,U.tZ)(ImageCachedChipList,{});case i:case d:case l:case s:return(0,U.tZ)(ProModeContentSection,{selectedModel:t,isProMode:n});default:return null}},TitleSection=e=>{var t;let{selectedModel:n,isDarkMode:o,pbPullMaxHeight:r}=e,{id:i}=(0,e_.mp)(),{id:a}=(0,e_.mn)(),{id:l}=(0,e_.hw)(),{id:c}=(0,e_._n)(),d=null!==(t=null==n?void 0:n.displayOptions.title)&&void 0!==t?t:"",s=(null==n?void 0:n._id)===i||(null==n?void 0:n._id)===a||(null==n?void 0:n._id)===l||(null==n?void 0:n._id)===c,u=(null==n?void 0:n._id)===a||(null==n?void 0:n._id)===c,p=(null==n?void 0:n._id)===i||(null==n?void 0:n._id)===l?"":null==n?void 0:n.displayOptions.subTitle;return(0,U.BX)(z.gC,{ref:r,textAlign:"center",minHeight:"23px",gap:"10px",children:[(0,U.tZ)(z.Jd,{color:"$color_text_primary",fontSize:"32px",fontWeight:"600",fontFamily:"Pretendard",children:d}),(0,U.tZ)(z.Ug,{height:"14px",justifyContent:"center",children:s&&(0,U.tZ)(z.Jd,{typo:"$100-14-semi",color:u?o?"#A47CD7":"#7108F7":"$color_text_brand",children:p})})]})},useSelectModelContainer=()=>{let{isProMode:e,selectedModel:t,selectModel:n,modelList:o}=(0,eb.M2)(),{flag:r}=(0,el.T6)("fe-pb-banner-fix"),{flag:i}=(0,el.T6)("fe-web-pb-banner-interaction-wipe"),{isValidating:a,data:l}=(0,ea.Fu)(),c=null==l?void 0:l.displayType,{isLoading:d}=useGetTrend(),s=a||d,u=r&&(null==t?void 0:t.name)==="wrtn_search"&&!!l&&"FIX"===c,changeModel=e=>{n(e)},p=(0,X.useMemo)(()=>({isLoading:s,selectedModel:t,isProMode:e,modelList:null!=o?o:[],changeModel,isShowBannerFix:u,bannerInteractionWipe:i}),[t,e,o,changeModel,u,i]);return p},SelectModelWrapper=e=>{let{children:t}=e,n=useSelectModelContainer();return t(n)},SelectModelContainer=e=>{let{isDarkMode:t,pbPullMaxHeight:n}=e,o=(0,G.bU)(),r=(0,X.useCallback)(e=>{let{isProMode:r,selectedModel:i,changeModel:a,modelList:l,isShowBannerFix:c,bannerInteractionWipe:d}=e;return(0,U.BX)(U.HY,{children:[(0,U.tZ)(z.xu,{height:c||"ja-JP"===o?"18dvh":"32dvh"}),(0,U.BX)(z.gC,{width:"740px",children:[(0,U.tZ)(TitleSection,{selectedModel:i,isDarkMode:t,pbPullMaxHeight:n}),(0,U.tZ)(z.xu,{height:"20px"}),(0,U.tZ)(ChatTextAreaGroup,{changeModel:a,modelList:l,selectedModel:i,isDarkMode:t}),c&&(0,U.tZ)(K.yn,{}),d&&(0,U.tZ)(K.Q1,{}),(0,U.tZ)(ContentsSection,{selectedModel:i,isProMode:r}),(0,U.tZ)(IssueTalkFeatureFlagContainer,{children:e=>{let{opened:t}=e;return t?(0,U.tZ)(IssueTalkList,{selectedModel:i}):null}})]})]})},[t]);return(0,U.tZ)(SelectModelWrapper,{children:r})},SettingDefaultPageButton=()=>{let{trackEvent:e}=(0,H.Ke)(),t=(0,G.bU)();return"ko-KR"!==t?null:(0,U.tZ)(z.xu,{children:(0,U.tZ)(z.Wv,{size:"$small",hierarchy:"$tertiary",onClick:()=>{e("click_wrtn_startup_page_set_btn"),window.open("https://help.wrtn.ai/226e1966-140c-4d4d-8edd-e7acae574f01","_blank")},endContainer:(0,U.tZ)(ei.JO,{as:eo.xMl,size:12,color:"$color_icon_secondary"}),children:(0,U.tZ)(z.Jd,{typo:"$100-13-med",color:"$color_text_secondary",children:"뤼튼을 시작 페이지로"})})})},ToOnboardingPageButton=()=>{let{trackEvent:e}=(0,H.Ke)(),t=(0,G.T_)();return(0,U.tZ)(z.xu,{children:(0,U.tZ)(z.Wv,{size:"$small",hierarchy:"$tertiary",onClick:()=>{e("click_wrtn_to_onboaring_page_btn"),window.open("https://cyber-shake-de5.notion.site/1128ac4ce90480c4a0c9d2917bcb8ed1?pvs=4","_blank")},endContainer:(0,U.tZ)(ei.JO,{as:eo.xMl,size:12,color:"$color_icon_secondary"}),children:(0,U.tZ)(z.Jd,{typo:"$100-13-med",color:"$color_text_secondary",children:t("header.guide.title")})})})},OffboardingContent=e=>{let{retryOnboarding:t}=e,{trackEvent:n}=(0,H.Ke)(),{setItem:o}=(0,N._)("CLOSED_ONBOARDING_MODAL",!1);return(0,X.useEffect)(()=>{n("expose_chathome_onboarding_page",{pageName:"202406_last_page"})},[]),(0,U.BX)(z.xu,{width:"620px",backgroundColor:"$palette_gray_gray_white",borderRadius:"12px",overflow:"hidden",children:[(0,U.tZ)(z.xu,{width:"100%",height:"378px",backgroundImage:"url('".concat("https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/offboardingBanner2.png","')"),backgroundSize:"100% auto",backgroundRepeat:"no-repeat"}),(0,U.tZ)(z.xu,{width:"100%",justifyContent:"center",display:"flex",children:(0,U.BX)(z.Ug,{gap:"16px",paddingY:"25px",children:[(0,U.tZ)(z.xu,{width:"120px",height:"52px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,U.tZ)(z.zx,{onClick:()=>{n("click_chathome_onboarding_review_btn"),t()},children:(0,U.tZ)(z.Jd,{typo:"$140-14-semi",color:"$color_text_tertiary",children:"다시보기"})})}),(0,U.tZ)(z.zx,{onClick:()=>{n("click_chathome_onboarding_done_btn"),o(!0)},children:(0,U.tZ)(z.xu,{width:"300px",height:"52px",backgroundColor:"$color_action_blue_primary",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,U.tZ)(z.Jd,{typo:"$140-14-semi",color:"$color_text_white",children:"뤼튼 시작하기"})})})]})})]})},eW=["START","STEP1","STEP2","STEP3","STEP4","STEP5","STEP6","END"],OnboardingContentState=e=>{let{children:t}=e,[n,o]=(0,X.useState)(0),r=(0,X.useMemo)(()=>{let e=eW.slice(1,-1).includes(eW[n]);return e?"PROGRESS":eW[n]},[n]);return t({step:r,nextStep:()=>{o(e=>e+1)},prevStep:()=>{o(e=>e-1)},resetStep:()=>{o(1)}})};var eK=n(37590);let ArrowButtonGroup=e=>{let{nextStep:t,prevStep:n}=e;return(0,U.BX)(U.HY,{children:[(0,U.tZ)(z.zx,{onClick:n,position:"absolute",top:"calc(50% - 20px)",left:"calc(-12px - 40px)",children:(0,U.tZ)(z.xu,{width:"40px",height:"40px",justifyContent:"center",alignItems:"center",display:"flex",backgroundColor:"$palette_gray_gray_white",borderRadius:"40px",children:(0,U.tZ)(ei.JO,{size:24,as:eo.k9_,color:"$palette_gray_gray_black"})})}),(0,U.tZ)(z.zx,{onClick:t,position:"absolute",top:"calc(50% - 20px)",right:"calc(-12px - 40px)",children:(0,U.tZ)(z.xu,{width:"40px",height:"40px",justifyContent:"center",alignItems:"center",display:"flex",backgroundColor:"$palette_gray_gray_white",borderRadius:"40px",children:(0,U.tZ)(ei.JO,{size:24,as:eo.xMl,color:"$palette_gray_gray_black"})})})]})},eV=[{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-1.json",title:"3가지 주요 기능",subTitle:"클릭 1번으로 검색, 이미지 제작, 과제와 업무를\n 해결할 수 있도록 도와줄게요"},{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-2.json",title:"AI 검색",subTitle:"검색어를 입력하면 비교, 분석은 물론\n 최신 소식까지 한 번에 정리해서 알려드려요"},{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-3.json",title:"AI 과제와 업무",subTitle:"과제, 업무 준비부터 제출까지 필요한 모든 것을 요청하세요\n AI 과제와 업무는 보다 길고 전문적으로 답변해드려요"},{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-4.json",title:"AI 과제와 업무 : Pro 모드",subTitle:"AI 과제와 업무의 Pro 모드는 더 빠르고 똑똑해서\n 이미지 분석을 요청해도 이해할 수 있어요"},{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-5.json",title:"AI 이미지",subTitle:"만들고 싶은 이미지를 설명해 보세요\n 요청에 알맞는 이미지를 빠르게 제작해 드려요"},{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-6.json",title:"캐릭터 챗",subTitle:"캐릭터 챗에서 다양한 캐릭터와\n 롤플레잉을 즐겨보세요"}],SkipOnboadingButton=()=>{let{setItem:e}=(0,N._)("CLOSED_ONBOARDING_MODAL",!1),{trackEvent:t}=(0,H.Ke)(),n=(0,G.T_)();return(0,U.tZ)(z.zx,{onClick:()=>{e(!0),t("click_chathome_onboarding_skip_btn")},"data-testid":"onboarding-skip-button",children:(0,U.tZ)(z.Jd,{typo:"$140-14-semi",color:"$color_text_tertiary",children:n("feature_home.onboarding.skip")})})};function OnboardingProgressContent_templateObject(){let e=(0,D._)(["\n                white-space: pre-wrap;\n              "]);return OnboardingProgressContent_templateObject=function(){return e},e}let eY=["202406_purpose_list","202406_ai_search","202406_ai_work","202406_ai_work_pro_mode","202406_ai_image","202406_ai_character_chat"],OnboardingProgressContent=e=>{let{nextStep:t,prevStep:n}=e,{trackEvent:o}=(0,H.Ke)(),[r,i]=(0,X.useState)(0),[a,l]=(0,X.useState)();return(0,X.useEffect)(()=>{fetch(eV[r].lottiePath).then(e=>e.json()).then(e=>{l(e)})},[r]),(0,X.useEffect)(()=>{o("expose_chathome_onboarding_page",{pageName:eY[r]})},[r]),(0,U.BX)(z.xu,{width:"620px",position:"relative",children:[(0,U.BX)(z.xu,{width:"100%",borderRadius:"12px",overflow:"hidden",backgroundColor:"$palette_gray_gray_white",children:[(0,U.tZ)(z.xu,{width:"100%",height:"300px",color:"$palette_gray_gray_white",children:a&&(0,U.tZ)(eK.q,{options:{...eV[r].lottieOption,animationData:a}})}),(0,U.tZ)(z.xu,{height:"20px"}),(0,U.BX)(z.gC,{gap:"32px",alignItems:"center",children:[(0,U.BX)(z.gC,{gap:"8px",textAlign:"center",children:[(0,U.tZ)(z.Jd,{typo:"$140-18-semi",color:"$palette_gray_gray_black",children:eV[r].title}),(0,U.tZ)(z.Jd,{typo:"$140-16-med",color:"$color_text_secondary",css:(0,J.iv)(OnboardingProgressContent_templateObject()),children:eV[r].subTitle})]}),(0,U.tZ)(z.Ug,{gap:"12px",children:eV.map((e,t)=>(0,U.tZ)(z.xu,{width:"12px",height:"12px",borderRadius:"12px",backgroundColor:r===t?"$palette_main_inspire_red_900":"#C7C5BD"},t))})]}),(0,U.tZ)(z.xu,{height:"25px"})]}),(0,U.tZ)(ArrowButtonGroup,{nextStep:()=>{o("click_chathome_onboarding_next_btn",{pageName:eY[r]}),i(e=>eV.length<=e?e:e+1),t()},prevStep:()=>{o("click_chathome_onboarding_back_btn",{pageName:eY[r]}),i(e=>0===e?e:e-1),n()}}),(0,U.tZ)(z.xu,{position:"absolute",bottom:"21px",left:"28px",children:(0,U.tZ)(SkipOnboadingButton,{})})]})},OnboardingStartContent=e=>{let{startOnboarding:t}=e,{trackEvent:n}=(0,H.Ke)(),o=(0,G.T_)();return(0,X.useEffect)(()=>{n("expose_chathome_onboarding_page",{pageName:"202406_start_page"})},[]),(0,U.BX)(z.xu,{width:"620px",borderRadius:"12px",overflow:"hidden",children:[(0,U.tZ)(z.xu,{width:"100%",height:"300px",backgroundImage:"url('".concat("https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboardingBanner.png","')"),backgroundSize:"100% auto",backgroundRepeat:"no-repeat"}),(0,U.BX)(z.gC,{paddingY:"20px",gap:"32px",alignItems:"center",backgroundColor:"$color_surface_white",children:[(0,U.BX)(z.gC,{gap:"8px",textAlign:"center",children:[(0,U.tZ)(z.Jd,{typo:"$140-18-semi",color:"$palette_gray_gray_black",children:o("feature_home.onboarding.title")}),(0,U.tZ)(z.Jd,{typo:"$140-16-med",color:"$color_text_secondary",children:o("feature_home.onboarding.sub_title")})]}),(0,U.BX)(z.Ug,{gap:"12px",children:[(0,U.tZ)(z.xu,{width:"120px",height:"52px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,U.tZ)(SkipOnboadingButton,{})}),(0,U.tZ)(z.zx,{onClick:()=>{n("click_chathome_onboarding_start_btn"),t()},children:(0,U.tZ)(z.xu,{width:"300px",height:"52px",backgroundColor:"$color_action_blue_primary",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,U.tZ)(z.Jd,{typo:"$140-14-semi",color:"$color_text_white",children:o("feature_home.onboarding.start")})})})]})]})]})},OnboardingModalContentRenderer=()=>(0,U.tZ)(OnboardingContentState,{children:e=>{let{step:t,nextStep:n,prevStep:o,resetStep:r}=e;switch(t){case"START":return(0,U.tZ)(OnboardingStartContent,{startOnboarding:n});case"PROGRESS":return(0,U.tZ)(OnboardingProgressContent,{nextStep:n,prevStep:o});case"END":return(0,U.tZ)(OffboardingContent,{retryOnboarding:r});default:return(0,U.tZ)(U.HY,{})}}}),OnboardingModal=()=>{let e=(0,G.bU)(),{value:t}=(0,N._)("CLOSED_ONBOARDING_MODAL",!1),[n,o]=(0,X.useState)(!1);return((0,X.useEffect)(()=>{o(!0)},[]),n&&"ko-KR"===e)?(0,U.tZ)(V.CO,{opened:!t,closable:!1,renderContent:()=>(0,U.tZ)(OnboardingModalContentRenderer,{})}):null};function ChatHomeV2_templateObject(){let e=(0,D._)(["\n        transition: padding-top 0.2s ease;\n      "]);return ChatHomeV2_templateObject=function(){return e},e}function ChatHomeV2_templateObject1(){let e=(0,D._)(["\n          transition: padding-top 0.2s ease;\n        "]);return ChatHomeV2_templateObject1=function(){return e},e}let ChatHomeV2=()=>{let{mode:e}=(0,er.TC)(),t=(0,X.useRef)(null),n=(0,X.useRef)(null),o=(0,X.useRef)(null),r=(0,G.bU)(),{data:i}=(0,ea.Fu)(),a=null==i?void 0:i.displayType,{flag:l}=(0,el.T6)("fe-pb-banner-interaction-pull"),{flag:c}=(0,el.T6)("fe-pb-banner-interaction-pass");return(0,U.BX)(z.gC,{ref:t,width:"100%",minHeight:"100%",alignItems:"center",position:"relative",css:(0,J.iv)(ChatHomeV2_templateObject()),children:[(0,U.tZ)(z.xu,{ref:n,position:"fixed",marginTop:"24px",right:"24px",zIndex:1,css:(0,J.iv)(ChatHomeV2_templateObject1()),children:(0,U.BX)(z.Ug,{gap:"4px",children:[(0,U.tZ)(AppInstallButton,{}),"ja-JP"===r?(0,U.tZ)(ToOnboardingPageButton,{}):(0,U.tZ)(SettingDefaultPageButton,{})]})}),c&&"PASS"===a&&(0,U.tZ)(K.S,{}),l&&"PULL"===a&&(0,U.tZ)(K.Hi,{pbPullHomeRef:t,pbPullHomeButtonRef:n,pbPullMaxHeight:o}),SelectModelContainer({isDarkMode:"dark"===e,pbPullMaxHeight:o}),(0,U.tZ)(EventModal,{type:"event-modal"}),(0,U.tZ)(OnboardingModal,{}),(0,U.tZ)(z.xu,{height:"60px"}),(0,U.tZ)(EmptyChatController,{})]})};var eq=n(65786),eQ=n(90070),e0=n.n(eQ);let CharacterAvatar=e=>{let{imgSrc:t,imgStyle:n,status:o,isSmall:r,inActive:i,...a}=e,l=(0,G.T_)("character.feature_character_room.info.status"),c="https://d1k8apdmymvh8f.cloudfront.net/Wrtn/avatar_fallback.png";return N.sk?null:(0,U.BX)(z.xu,{position:"relative",overflow:"hidden",...a,children:[(0,U.tZ)("img",{src:t||c,onError:e=>{let t=e.target;t.src=c},alt:"thumbnail",style:{objectFit:"cover",borderRadius:"inherit",width:"100%",height:"100%",...n},loading:"lazy"}),(o&&"active"!==o||i)&&(0,U.tZ)(z.xu,{position:"absolute",top:"0",left:"0",borderRadius:a.borderRadius||"inherit",width:"100%",height:"100%",background:"linear-gradient(0deg, rgba(0, 0, 0, 0.50) 0%, rgba(0, 0, 0, 0.50) 100%)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,U.BX)(z.gC,{gap:"4px",alignItems:"center",children:[!r&&(0,U.tZ)(ei.JO,{as:"deleted"===o?eo.$yH:eo.uNt,color:"$color_icon_white",size:24}),(0,U.BX)(z.Jd,{typo:"$100-14-med",color:"$color_text_white",textAlign:"center",children:["blocked"===o&&l("blocked"),"deleted"===o&&l("deleted"),i&&l("private")]})]})})]})};function CharacterCard_templateObject(){let e=(0,D._)(["\n        &:hover {\n          cursor: pointer;\n        }\n        transition: all 0.3s ease-in-out;\n      "]);return CharacterCard_templateObject=function(){return e},e}function CharacterCard_templateObject1(){let e=(0,D._)(["\n          &:hover {\n            .character-description {\n              -webkit-line-clamp: 4;\n              word-break: break-all;\n            }\n\n            .overlay {\n              opacity: 1;\n            }\n          }\n        "]);return CharacterCard_templateObject1=function(){return e},e}function CharacterCard_templateObject2(){let e=(0,D._)(["\n            transition: opacity 0.3s ease-out;\n          "]);return CharacterCard_templateObject2=function(){return e},e}function CharacterCard_templateObject3(){let e=(0,D._)(["\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n          "]);return CharacterCard_templateObject3=function(){return e},e}function _templateObject4(){let e=(0,D._)(["\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n          "]);return _templateObject4=function(){return e},e}let CharacterCard=e=>{var t,n;let{character:o,imageSize:r,onClick:i}=e;return(0,U.BX)(z.xu,{width:"130px",minWidth:"130px",height:"160px",overflow:"hidden",borderRadius:"10px",onClick:i,border:"1px solid",borderColor:"$color_outline_tertiary",css:(0,J.iv)(CharacterCard_templateObject()),position:"relative",children:[(0,U.tZ)(CharacterAvatar,{imgSrc:o.profileImage&&((null===(t=o.profileImage)||void 0===t?void 0:t[r||"w200"])||(null===(n=o.profileImage)||void 0===n?void 0:n.w600)||o.profileImage.origin),width:"100%",height:"100%"}),(0,U.BX)(z.gC,{position:"absolute",bottom:"0px",width:"100%",height:"100%",justifyContent:"flex-end",pb:"14px",pl:"10px",pr:"6px",alignItems:"center",background:"linear-gradient(180deg,rgba(0, 0, 0, 0) 50%,rgba(0, 0, 0, 0.6) 100%)",css:(0,J.iv)(CharacterCard_templateObject1()),children:[(0,U.tZ)(z.xu,{className:"overlay",width:"100%",height:"100%",backgroundColor:"$color_bg_dimmed",position:"absolute",top:"0",left:"0",opacity:0,css:(0,J.iv)(CharacterCard_templateObject2())}),(0,U.tZ)(z.Jd,{zIndex:1,color:"$color_text_white",typo:"$ex_140-14-med",css:(0,J.iv)(CharacterCard_templateObject3()),children:o.name}),(0,U.tZ)(z.Jd,{zIndex:1,className:"character-description",fontSize:"12px",fontWeight:500,lineHeight:"140%",color:"$color_text_white",opacity:.8,css:(0,J.iv)(_templateObject4()),children:o.description})]})]})},getRecommendedCharacterList=e=>q.Np.BE.get(e),getRandomCharacterList=()=>q.Np.BE.get("/characters/random-subsets?limit=10"),useRecommendedCharacterList=()=>(0,et.dH)("/characters?recommended=true&limit=10",getRecommendedCharacterList,{fallback:[],revalidateOnFocus:!1}),useRandomCharacterList=function(){let{disabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,et.dH)(e?null:"/characters/random-subsets?limit=10",getRandomCharacterList,{fallback:[],revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1})},CharacterRandomListHeader=()=>{let e=(0,G.T_)("home.character_random_list");return(0,U.BX)(z.Ug,{justifyContent:"space-between",px:["20px","20px","40px"],children:[(0,U.tZ)(z.Jd,{typo:"$100-16-semi",color:"$color_text_primary",children:e("random_ai_character")}),(0,U.tZ)(ef(),{href:"/chat/character",children:(0,U.BX)(z.Ug,{gap:"2px",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_action_blue_primary",children:e("more")}),(0,U.tZ)(ei.JO,{as:eo.xMl,color:"$color_action_blue_primary",size:20})]})})]})};function CreateCharacter_templateObject(){let e=(0,D._)(["\n        &:hover {\n          cursor: pointer;\n          background-color: ",";\n        }\n      "]);return CreateCharacter_templateObject=function(){return e},e}let CreateCharacter=()=>{let e=(0,G.T_)("home.character_random_list"),{handleGoToSSOLogin:t}=(0,ex.Ae)(),{push:n}=(0,en.useRouter)(),{user:o}=(0,eu.aF)(),{trackEvent:r}=(0,H.Ke)();return(0,X.useEffect)(()=>{r("expose_main_page_character_builder_card",{section_order:4,index:1})},[]),(0,U.BX)(z.gC,{bg:"$color_surface_elevated",border:"1px solid",borderColor:"$color_outline_tertiary",gap:"24px",justifyContent:"end",width:"130px",minWidth:"130px",height:"160px",p:"32px 10px 14px 10px",borderRadius:"8px",alignItems:"center",css:e=>(0,J.iv)(CreateCharacter_templateObject(),(0,z.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_surface_elevated"})),onClick:()=>{if(r("click_main_page_character_builder_card",{section_order:4,index:1}),!o)return t();n("/chat/character/builder?type=create")},children:[(0,U.tZ)(z.kC,{alignItems:"center",justifyContent:"center",children:(0,U.tZ)(ei.JO,{as:eo.oDM,size:32,color:"$color_icon_tertiary"})}),(0,U.BX)(z.gC,{alignItems:"center",gap:"10px",children:[(0,U.tZ)(z.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:e("create")}),(0,U.tZ)(z.gC,{alignItems:"center",lineHeight:"160%",fontSize:"12px",fontWeight:500,color:"$color_text_tertiary",textAlign:"center",children:e.rich("create_description",{br:()=>(0,U.tZ)("br",{})})})]})]})},CharacterRandomList=()=>{let{moveRecentChat:e}=(0,ep.Jq)(),{data:t,isLoading:n}=useRandomCharacterList(),{trackEvent:o}=(0,H.Ke)(),{user:r}=(0,eu.aF)();return(0,X.useEffect)(()=>{var e,n;t&&o("view_character_card",{content:{...null==t?void 0:null===(e=t.characters)||void 0===e?void 0:e.map(e=>e._id)},name:{...null==t?void 0:null===(n=t.characters)||void 0===n?void 0:n.map(e=>e.name)}})},[t]),(0,U.BX)(z.gC,{width:"100%",gap:"14px",position:"relative",children:[(0,U.tZ)(CharacterRandomListHeader,{}),(0,U.tZ)(z.Ug,{px:N.P8?"0px":["20px","20px","40px"],children:(0,U.tZ)(CarouselContainer,{px:N.P8?["20px","20px","40px"]:"0px",gap:"12px",renderContent:()=>{var i;return(0,U.BX)(U.HY,{children:[(0,U.tZ)(CreateCharacter,{}),n?[,,,].fill(null).map((e,t)=>(0,U.tZ)(V.Od,{width:"130px",height:"160px"},t)):null==t?void 0:null===(i=t.characters)||void 0===i?void 0:i.map((t,n)=>(0,U.tZ)(CharacterCard,{character:t,index:n,sectionOrder:4,onClick:()=>{var i,a;o("click_character_card",{character_id:t._id,is_owner:t.creator.wrtnUid===(null==r?void 0:r._id),category:null===(a=t.categories)||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:i.name,index:n,section_order:4,name:t.name,character_name:t.name}),e(t._id,"c",{onMoveRecent:()=>{o("create_chat",{type:"character_card_click"})}})}},t._id))]})}})})]})},AppCharacterRandomListHeader=()=>{let e=(0,G.T_)("home.character_random_list"),{postMessage:t}=(0,N.sW)(),{user:n}=(0,eu.aF)();return(0,U.BX)(z.Ug,{justifyContent:"space-between",px:"20px",children:[(0,U.tZ)(z.Jd,{typo:"$140-18-semi",color:"$color_text_primary",children:e("random_ai_character")}),n&&(0,U.tZ)(z.zx,{onClick:()=>{t({type:"navigate",payload:{screen:"character_all",params:{},type:"push"}})},children:(0,U.tZ)(ei.JO,{as:eo.xMl,size:24,color:"$color_action_blue_primary"})})]})},AppCharacterRandomList=()=>{let{postMessage:e}=(0,N.sW)(),appCreateCharacterChat=(t,n)=>{e({type:"create-chat",payload:{mode:"character",params:{characterId:t,characterName:n}}})},{data:t,isLoading:n}=useRandomCharacterList(),{trackEvent:o}=(0,H.Ke)(),{user:r}=(0,eu.aF)();return(0,X.useEffect)(()=>{var e,n;t&&o("view_character_card",{content:{...null==t?void 0:null===(e=t.characters)||void 0===e?void 0:e.map(e=>e._id)},name:{...null==t?void 0:null===(n=t.characters)||void 0===n?void 0:n.map(e=>e.name)}})},[t]),(0,U.BX)(z.gC,{width:"100%",gap:"14px",position:"relative",children:[(0,U.tZ)(AppCharacterRandomListHeader,{}),(0,U.tZ)(CarouselContainer,{px:"20px",gap:"12px",renderContent:()=>{var e;return(0,U.tZ)(U.HY,{children:n?[,,,].fill(null).map((e,t)=>(0,U.tZ)(V.Od,{width:"130px",height:"160px"},t)):null==t?void 0:null===(e=t.characters)||void 0===e?void 0:e.map((e,t)=>(0,U.tZ)(CharacterCard,{character:e,index:t,sectionOrder:4,onClick:()=>{var n,i;o("create_chat",{type:"character_card_click"}),o("click_character_card",{character_id:e._id,is_owner:e.creator.wrtnUid===(null==r?void 0:r._id),category:null===(i=e.categories)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:n.name,index:t,section_order:4,name:e.name,character_name:e.name}),appCreateCharacterChat(e._id,e.name)},imageSize:"w600"},e._id))})}})]})};function CharacterRecommendListHeader_templateObject(){let e=(0,D._)(["\n            &:hover {\n              cursor: pointer;\n              color: ",";\n\n              path {\n                fill: ",";\n              }\n            }\n          "]);return CharacterRecommendListHeader_templateObject=function(){return e},e}let CharacterRecommendListHeader=()=>{let e=(0,G.T_)("home.character_recommned_list"),{trackEvent:t}=(0,H.Ke)();return(0,U.BX)(z.Ug,{justifyContent:"space-between",px:["20px","20px","40px"],children:[(0,U.tZ)(z.Jd,{typo:"$100-16-semi",color:"$color_text_primary",children:e("recommend_ai_character")}),(0,U.tZ)(ef(),{href:"/chat/character",onClick:()=>{t("click_more_btn",{sectionOrder:4,section_name:"캐릭터 AI"})},children:(0,U.BX)(z.Ug,{gap:"2px",alignItems:"center",color:"$color_action_blue_primary",css:e=>{var t,n;return(0,J.iv)(CharacterRecommendListHeader_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_action_blue_secondary,null===(n=e.colors)||void 0===n?void 0:n.$color_action_blue_secondary)},children:[(0,U.tZ)(z.Jd,{typo:"$100-14-med",children:e("more")}),(0,U.tZ)(ei.JO,{as:eo.xMl,color:"$color_action_blue_primary",size:20})]})})]})};function CharacterRecommendList_CreateCharacter_templateObject(){let e=(0,D._)(["\n        &:hover {\n          cursor: pointer;\n          background-color: ",";\n          border-color: ",";\n        }\n      "]);return CharacterRecommendList_CreateCharacter_templateObject=function(){return e},e}let CreateCharacter_CreateCharacter=()=>{let e=(0,G.T_)("home.character_recommned_list"),{handleGoToSSOLogin:t}=(0,ex.Ae)(),{push:n}=(0,en.useRouter)(),{user:o}=(0,eu.aF)(),{trackEvent:r}=(0,H.Ke)();return(0,X.useEffect)(()=>{r("expose_main_page_character_builder_card",{section_order:4,index:1})},[]),(0,U.BX)(z.gC,{bg:"$color_surface_elevated",border:"1px solid",borderColor:"$color_outline_tertiary",gap:"24px",justifyContent:"end",width:"130px",minWidth:"130px",height:"160px",p:"32px 10px 14px 10px",borderRadius:"8px",alignItems:"center",css:e=>(0,J.iv)(CharacterRecommendList_CreateCharacter_templateObject(),(0,z.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_surface_elevated"}),(0,z.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_outline_tertiary"})),onClick:()=>{if(r("click_main_page_character_builder_card",{section_order:4,index:1}),!o)return t();n("/chat/character/builder?type=create")},children:[(0,U.tZ)(z.kC,{alignItems:"center",justifyContent:"center",children:(0,U.tZ)(ei.JO,{as:eo.oDM,size:32,color:"$color_icon_tertiary"})}),(0,U.BX)(z.gC,{alignItems:"center",gap:"10px",children:[(0,U.tZ)(z.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:e("create")}),(0,U.tZ)(z.gC,{alignItems:"center",lineHeight:"140%",fontSize:"12px",fontWeight:500,color:"$color_text_tertiary",textAlign:"center",children:e.rich("create_description",{br:()=>(0,U.tZ)("br",{})})})]})]})},CharacterRecommendList=()=>{let{moveRecentChat:e}=(0,ep.Jq)(),{data:t,isLoading:n}=useRecommendedCharacterList(),{trackEvent:o}=(0,H.Ke)(),{user:r}=(0,eu.aF)();return(0,X.useEffect)(()=>{var e,n;t&&o("view_character_card",{content:{...null==t?void 0:null===(e=t.characters)||void 0===e?void 0:e.map(e=>e._id)},name:{...null==t?void 0:null===(n=t.characters)||void 0===n?void 0:n.map(e=>e.name)}})},[t]),(0,U.BX)(z.gC,{width:"100%",gap:"14px",position:"relative",children:[(0,U.tZ)(CharacterRecommendListHeader,{}),(0,U.tZ)(z.Ug,{px:N.P8?"0px":["20px","20px","40px"],children:(0,U.tZ)(CarouselContainer,{px:N.P8?["20px","20px","40px"]:"0px",gap:"12px",renderContent:()=>{var i,a;return(0,U.BX)(U.HY,{children:[(0,U.tZ)(CreateCharacter_CreateCharacter,{}),n?[,,,].fill(null).map((e,t)=>(0,U.tZ)(V.Od,{width:"130px",height:"160px"},t)):null==t?void 0:null===(a=t.characters)||void 0===a?void 0:null===(i=a.slice(0,6))||void 0===i?void 0:i.map((t,n)=>(0,U.tZ)(CharacterCard,{index:n,sectionOrder:4,character:t,onClick:()=>{var i,a;o("click_character_card",{character_id:t._id,is_owner:t.creator.wrtnUid===(null==r?void 0:r._id),category:null===(a=t.categories)||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:i.name,index:n,section_order:4,name:t.name,character_name:t.name}),e(t._id,"c",{onMoveRecent:()=>{o("create_chat",{type:"character_card_click"})}})}},t._id))]})}})})]})};var e1=n(73068),e2=n(14051),e4=n(28977),e3=n.n(e4);let getAdvertiseFloatingBanner=()=>q.Np.BE.get("/advertise/floating-banner");function useGetAdvertiseFloatingBanner(){return(0,et.dH)("get/adviertise/floatingbanner",async()=>{let e=await getAdvertiseFloatingBanner();return e[0]},{revalidateOnFocus:!1})}function ChatHomeRenderMedia(e){let{isShowWebm:t,imageUrl:n,videoUrl:o}=e,[r,i]=(0,X.useState)(!0);return(0,U.tZ)(U.HY,{children:t&&r?(0,U.tZ)(z.xu,{pt:"12px",children:(0,U.tZ)("video",{width:"135px",height:"135px",autoPlay:!0,muted:!0,playsInline:!0,preload:"auto",poster:n,disableRemotePlayback:!0,disablePictureInPicture:!0,onEnded:()=>{i(!1)},children:(0,U.tZ)("source",{"data-src":null!=o?o:"",src:null!=o?o:"",type:"video/webm"})})}):(0,U.tZ)(ed(),{src:null!=n?n:"",alt:"ad",width:135,height:135,style:{marginTop:"16px"}})})}function ChatHomeAdContent(e){let{onClose:t,onClickIsland:n}=e,o=X.useRef(null),{data:r}=useGetAdvertiseFloatingBanner(),i=(0,N.ac)("(max-width: 768px)"),a=!N.P8&&(0,N.i7)();return X.useEffect(()=>{let e=o.current,t=document.getElementById("chat-content"),passScrollEvent=e=>{e.stopPropagation(),t&&(t.scrollTop+=e.deltaY)};return null==e||e.addEventListener("wheel",passScrollEvent),()=>{null==e||e.removeEventListener("wheel",passScrollEvent)}},[]),(0,U.tZ)(z.xu,{ref:o,position:"absolute",right:"0",p:"24px 12px",zIndex:3,css:(0,J.iv)({...i?{bottom:"0"}:{top:"40%"}}),children:(0,U.BX)(z.gC,{textAlign:"center",children:[(0,U.BX)(z.Ug,{position:"absolute",top:"0",right:"12px",gap:"2px",p:"2px 4px",height:"16px",justifyContent:"end",alignItems:"center",backgroundColor:"$color_bg_screen",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"3px",typo:"$100-10-semi",color:"$color_text_textfield_disabled",children:[(0,U.tZ)(z.xu,{children:"AD"}),(0,U.tZ)(z.xu,{children:"|"}),(0,U.tZ)(z.zx,{onClick:t,zIndex:2,height:"16px",width:"16px",position:"relative",css:(0,J.iv)({svg:{position:"absolute",transform:"translate(-50%, -50%)"}}),children:(0,U.tZ)(ei.JO,{as:eo.Off,size:12,color:"$color_text_textfield_disabled"})})]}),(0,U.BX)(z.zx,{onClick:()=>{n(),window.open("".concat(null==r?void 0:r.link,"?inventory=floating_banner"),"_blank")},children:[(0,U.tZ)(z.xu,{mt:"12px",p:"4px 7px",mb:"-10px",backgroundColor:"#273646",justifyContent:"center",width:"120px",color:"#32E5D9",fontSize:"10px",fontWeight:700,borderRadius:"80px",children:null==r?void 0:r.content}),(0,U.tZ)(ChatHomeRenderMedia,{isShowWebm:a,imageUrl:null==r?void 0:r.imageUrl,videoUrl:null==r?void 0:r.videoUrl}),(0,U.tZ)(z.xu,{color:"$color_text_disabled",fontSize:"8px",fontWeight:500,lineHeight:"120%",width:"140px",children:null==r?void 0:r.adGuidelineText})]})]})})}function ChatHomeIsland(){let{data:e,isLoading:t}=useGetAdvertiseFloatingBanner(),{selectedUnit:n}=(0,eb.XV)(),{trackEvent:o}=(0,H.Ke)(),[r,i]=(0,X.useState)(!!(0,e1.ej)(e1.Mv.AD_ISLAND)),a=(0,eF.Z)();return((0,X.useEffect)(()=>{if(!r&&e){var t,i,l,c,d,s;o("expose_float_banner",{screen_name:"HomeScreen",model_name:null!==(c=null==n?void 0:n.name.toUpperCase())&&void 0!==c?c:"",id:e.adId,uuid:null!=a?a:"",request_id:null!==(d=null==e?void 0:null===(t=e.eventProperty)||void 0===t?void 0:t.request_id)&&void 0!==d?d:"",advertiser_id:null==e?void 0:null===(i=e.eventProperty)||void 0===i?void 0:i.advertiser_id,campaign_id:null!==(s=null==e?void 0:null===(l=e.eventProperty)||void 0===l?void 0:l.campaign_id)&&void 0!==s?s:""})}},[r,e]),r||t||!e)?null:(0,U.tZ)(ChatHomeAdContent,{onClose:()=>{var t,r,l,c,d,s;(0,e1.d8)(e1.Mv.AD_ISLAND,"close",{sameSite:"lax",domain:e2.JP,path:"/",expires:e3()("2024-05-28").toDate()}),i(e=>!e),o("click_float_banner_exit_btn",{screen_name:"HomeScreen",model_name:null!==(c=null==n?void 0:n.name.toUpperCase())&&void 0!==c?c:"",id:null==e?void 0:e.adId,uuid:null!=a?a:"",request_id:null!==(d=null==e?void 0:null===(t=e.eventProperty)||void 0===t?void 0:t.request_id)&&void 0!==d?d:"",advertiser_id:null==e?void 0:null===(r=e.eventProperty)||void 0===r?void 0:r.advertiser_id,campaign_id:null!==(s=null==e?void 0:null===(l=e.eventProperty)||void 0===l?void 0:l.campaign_id)&&void 0!==s?s:""})},onClickIsland:()=>{var t,r,i,l,c,d;o("click_float_banner",{screen_name:"HomeScreen",model_name:null!==(l=null==n?void 0:n.name.toUpperCase())&&void 0!==l?l:"",id:null==e?void 0:e.adId,uuid:null!=a?a:"",request_id:null!==(c=null==e?void 0:null===(t=e.eventProperty)||void 0===t?void 0:t.request_id)&&void 0!==c?c:"",advertiser_id:null==e?void 0:null===(r=e.eventProperty)||void 0===r?void 0:r.advertiser_id,campaign_id:null!==(d=null==e?void 0:null===(i=e.eventProperty)||void 0===i?void 0:i.campaign_id)&&void 0!==d?d:""})}})}var e6=n(24071);function TextChocoChipListItem_templateObject(){let e=(0,D._)(["\n        &:hover {\n          background-color: ",";\n          color: ",";\n          cursor: pointer;\n        }\n      "]);return TextChocoChipListItem_templateObject=function(){return e},e}let TextChocoChipListItem=e=>{let{content:t,hoverStyle:n,onClick:o}=e;return(0,U.tZ)(z.Ug,{justifyContent:"center",p:"6px 16px",border:"1px solid",borderColor:"$color_outline_secondary",color:"$color_text_primary",borderRadius:"22px",css:e=>{var t,o;return(0,J.iv)(TextChocoChipListItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t["".concat(n.background)],null===(o=e.colors)||void 0===o?void 0:o["".concat(n.color)])},onClick:o,lineHeight:"16px",fontSize:"13px",fontWeight:"500",height:"fit-content",children:t})};function AdTextChocoChipListItem_templateObject(){let e=(0,D._)(["\n        &:hover {\n          .overlay {\n            opacity: 1;\n          }\n          cursor: pointer;\n        }\n      "]);return AdTextChocoChipListItem_templateObject=function(){return e},e}let AdTextChocoChipListItem=e=>{var t,n,o,r,i,a;let{chip:l,hoverStyle:c,onClick:d}=e,{mode:s}=(0,er.TC)(),handleClick=()=>{d()};return l.designOption&&(null===(t=l.designOption)||void 0===t?void 0:t[s])?(0,U.BX)(z.Ug,{justifyContent:"center",alignItems:"center",p:"6px 16px",border:"1px solid",borderColor:null===(n=l.designOption[s])||void 0===n?void 0:n.strokeColor,backgroundColor:null===(o=l.designOption[s])||void 0===o?void 0:o.backgroundColor,color:null===(r=l.designOption[s])||void 0===r?void 0:r.contentTextColor,borderRadius:"22px",lineHeight:"16px",fontSize:"13px",fontWeight:"500",height:"fit-content",gap:"8px",position:"relative",css:e=>(0,J.iv)(AdTextChocoChipListItem_templateObject()),onClick:handleClick,children:[(0,U.tZ)(z.xu,{className:"overlay",width:"100%",height:"100%",position:"absolute",top:"0",left:"0",opacity:0,borderRadius:"22px",backgroundColor:"$color_surface_hover"}),l.content,(0,U.tZ)(z.kC,{justifyContent:"center",alignContent:"center",p:"3px 4px",borderRadius:"3px",backgroundColor:null===(i=l.designOption[s])||void 0===i?void 0:i.adBackgroundColor,minWidth:"fit-content",height:"fit-content",children:(0,U.tZ)(z.Jd,{typo:"$100-10-semi",color:null===(a=l.designOption[s])||void 0===a?void 0:a.adTextColor,children:"광고"})})]}):(0,U.tZ)(TextChocoChipListItem,{content:l.content,hoverStyle:c,onClick:handleClick},l.content)},e8=[{background:"$color_surface_accent_yellow",color:"$color_text_accent_yellow"},{background:"$color_surface_accent_green",color:"$color_text_accent_green"},{background:"$color_surface_accent_blue",color:"$color_text_accent_blue"}],TextChocoChipList=()=>{let{selectedUnit:e,isRedirecting:t,setIsRedirecting:n}=(0,eb.XV)(),{data:o,isLoading:r,isValidating:i}=useChipList((null==e?void 0:e.name)||""),{onMakeNewChat:a}=(0,e6.M)(e),{trackEvent:l}=(0,H.Ke)(),c=(0,X.useRef)(null),{onClickNewChat:d}=handleClick({selectedUnit:e,isRedirecting:t,hoverStyles:e8,uuid:c,trackEvent:l,setIsRedirecting:n,onMakeNewChat:a});return useComponetEffect({chipList:o,selectedUnit:e,uuid:c,trackEvent:l}),(0,U.tZ)(z.Ug,{flexWrap:"wrap",justifyContent:"center",gap:"10px",maxWidth:"650px",minHeight:"70px",children:r||i?[,,,].fill(null).map((e,t)=>(0,U.tZ)(V.Od,{width:"240px",height:"30px",borderRadius:"40px"},t)):null==o?void 0:o.map((e,t)=>isAdChocoChip(e)?(0,U.tZ)(AdTextChocoChipListItem,{chip:e,hoverStyle:e8[t%3],onClick:d(e,t)},e.content):(0,U.tZ)(TextChocoChipListItem,{content:e.content,hoverStyle:e8[t%3],onClick:d(e,t)},e.content))})};function GPT4vChocoChipListItem_templateObject(){let e=(0,D._)(["\n        &:hover {\n          cursor: pointer;\n        }\n      "]);return GPT4vChocoChipListItem_templateObject=function(){return e},e}let GPT4vChocoChipListItem=e=>{let{imgSrc:t,title:n}=e;return(0,U.BX)(z.Ug,{width:"305px",alignItems:"center",border:"1px solid",borderColor:"$color_outline_secondary",color:"$color_text_primary",borderRadius:"22px",maxWidth:"611px",minWidth:"300px",gap:"16px",css:(0,J.iv)(GPT4vChocoChipListItem_templateObject()),children:[(0,U.tZ)(z.xu,{width:"70px",minWidth:"70px",height:"70px",minHeight:"70px",borderTopLeftRadius:"22px",borderBottomLeftRadius:"22px",overflow:"hidden",position:"relative",children:(0,U.tZ)("img",{src:t,alt:"thumbnail",style:{width:"100%",height:"100%"}})}),(0,U.tZ)(z.Jd,{typo:"$160-13-med",color:"$color_text_primary",px:"16px",children:n})]})},GPT4vChocoChipList=()=>{let{selectedUnit:e}=(0,eb.XV)(),{data:t}=useGPT4vChipList((null==e?void 0:e.displayName)||"");return(0,U.tZ)(z.Ug,{flexWrap:"wrap",justifyContent:"center",gap:"10px",maxWidth:"650px",children:null==t?void 0:t.slice(0,2).map((e,t)=>{let{images:n,title:o}=e;return(0,U.tZ)(GPT4vChocoChipListItem,{title:o,imgSrc:n[0]})})})},ChocoChipList=()=>{let{selectedUnit:e}=(0,eb.XV)();return(null==e?void 0:e.displayName)==="GPT-4 Vision"?(0,U.tZ)(GPT4vChocoChipList,{}):(0,U.tZ)(TextChocoChipList,{})},AppChocoChipListHeader=()=>(0,U.BX)(z.Ug,{gap:"8px",children:[(0,U.tZ)(ei.JO,{as:eo.MQJ,size:16,color:"$color_icon_tertiary"}),(0,U.tZ)(z.Jd,{typo:"$140-13-semi",color:"$color_text_tertiary",children:"こんな質問をすることができます"})]}),AppChocoChipListItem=e=>{let{content:t,colors:n,onClick:o}=e;return(0,U.tZ)(z.Ug,{justifyContent:"center",p:"6px 16px",border:"1px solid",borderColor:"$color_outline_secondary",borderRadius:"24px",backgroundColor:n.background,color:n.color,onClick:o,lineHeight:"16px",fontSize:"13px",fontWeight:"500",height:"fit-content",children:t})};var e7=n(53889);let e5=(0,X.createContext)(null),ChocoChipABTestProvider=e=>{var t,n,o;let{children:r}=e,{user:i}=(0,eu.aF)(),{variant:a,loading:l}=(0,el.i6)("fe-web-chatHome-chocoChip"),c=null!==(t=null==i?void 0:i.wrtnUid.at(-1))&&void 0!==t?t:"",d=!0;d=!a.enabled||null==i||!i.wrtnUid||null===(o=null===(n=a.payload)||void 0===n?void 0:n.value.includes(c))||void 0===o||o;let s=(0,X.useMemo)(()=>({isVisibleGroup:d,loading:l}),[d,l]);return(0,U.tZ)(e5.Provider,{value:s,children:r})},e9=(0,e7.TR)(e5,"[ChocoChipABTestProvider] cannot find context provider"),te=[{background:"$color_surface_accent_yellow",color:"$color_text_accent_yellow"},{background:"$color_surface_accent_blue",color:"$color_text_accent_blue"},{background:"$color_surface_accent_pink",color:"$color_text_accent_pink"}],AppChocoChipList=()=>{let{user:e}=(0,eu.aF)(),{data:t,isLoading:n}=useChipList("wrtn_search"),{trackEvent:o}=(0,H.Ke)(),{postMessage:r}=(0,N.sW)(),{loading:i,isVisibleGroup:a}=e9(),l=n||i,appCreateChat=(e,t)=>{o("click_cached_chip",{section_order:2,model_name:"WRTN_SEARCH",index:t,command_chip_name:e}),r({type:"create-chat",payload:{mode:"chat",params:{isChocoChip:!0,message:e}}})};return((0,X.useEffect)(()=>{l||o("abtest_cached_chip",{is_visible:a})},[l,a]),(0,X.useEffect)(()=>{(null==t?void 0:t.length)&&o("expose_cached_chip",{model_name:"WRTN_SEARCH",content:{...null==t?void 0:t.map(e=>e)},section_order:2})},[null==t?void 0:t.length]),e&&!l&&a)?(0,U.BX)(z.gC,{alignItems:"center",gap:"16px",px:"20px",pt:24,children:[(0,U.tZ)(AppChocoChipListHeader,{}),(0,U.tZ)(z.Ug,{flexWrap:"wrap",justifyContent:"center",gap:"10px",maxWidth:"650px",minHeight:"70px",children:null==t?void 0:t.map((e,t)=>{let{content:n}=e;return(0,U.tZ)(AppChocoChipListItem,{content:n,colors:te[t],onClick:()=>appCreateChat(n,t)},n)})})]}):(0,U.tZ)(z.xu,{height:0})};function PromptSuggestionListItem_templateObject(){let e=(0,D._)(["\n        &:hover {\n          cursor: pointer;\n          background-color: ",";\n        }\n      "]);return PromptSuggestionListItem_templateObject=function(){return e},e}let PromptSuggestionListItem=e=>{var t;let{prompt:n,index:o}=e,r=(0,G.T_)(),{setSelectedUnit:i,unitList:a,chatInputRef:l}=(0,eb.XV)(),c=(0,eB.Zl)(ey.dW),{trackEvent:d}=(0,H.Ke)();return(0,U.BX)(z.Ug,{width:"100%",bg:"$color_surface_tertiary",p:"22px 16px",alignItems:"center",justifyContent:"space-between",borderRadius:"10px",css:e=>{var t;return(0,J.iv)(PromptSuggestionListItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},onClick:()=>{d("click_prompt_chip",{section_order:5,index:o,position:"chat",prompt_id:n._id,prompt_category_name:n.category.name,prompt_title:n.title});let e=a.find(e=>{var t;return e.name.toLowerCase()===(null===(t=n.recommendedModel)||void 0===t?void 0:t.toLowerCase())});e&&i(e),c(n.prompt);let t=l.current;if(t){let e=new IntersectionObserver(n=>{n.forEach(n=>{n.isIntersecting&&(t.focus(),e.disconnect())})},{root:null,threshold:1});e.observe(t),t.scrollIntoView({behavior:"smooth",block:"end"}),eO.Am.alert(r("common.alert.prompt_input"),"PROMPT_INPUT")}},children:[(0,U.BX)(z.Ug,{gap:"16px",alignItems:"center",children:[(0,U.tZ)(z.xu,{size:"48px",children:(0,U.tZ)("img",{src:n.category.iconImageUrl,alt:n.category.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}})}),(0,U.BX)(z.gC,{gap:"6px",children:[(0,U.tZ)(z.kC,{bg:"$color_surface_ivory",width:"fit-content",color:"$color_text_secondary",fontSize:"10px",fontWeight:600,p:"3px 6px",borderRadius:"3px",children:null===(t=n.tags)||void 0===t?void 0:t[0]}),(0,U.tZ)(z.Jd,{color:"$color_text_primary",typo:"$160-14-med",children:n.title})]})]}),(0,U.tZ)(ei.JO,{as:eo.xMl,size:24,color:"$color_icon_tertiary"})]})};function PromptSuggestionListHeader_templateObject(){let e=(0,D._)(["\n            &:hover {\n              cursor: pointer;\n              color: ",";\n\n              path {\n                fill: ",";\n              }\n            }\n          "]);return PromptSuggestionListHeader_templateObject=function(){return e},e}let PromptSuggestionListHeader=()=>{let e=(0,G.T_)("home.prompt_suggestion_list"),t=(0,en.useRouter)(),{trackEvent:n}=(0,H.Ke)();return(0,U.BX)(z.Ug,{justifyContent:"space-between",children:[(0,U.tZ)(z.Jd,{typo:"$100-16-semi",color:"$color_text_primary",children:e("title")}),eq.sO&&(0,U.BX)(z.Ug,{gap:"2px",alignItems:"center",onClick:()=>{n("click_more_btn",{section_name:"프롬프트 카드",sectionOrder:5}),t.push("/prompt")},color:"$color_action_blue_primary",css:e=>{var t,n;return(0,J.iv)(PromptSuggestionListHeader_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_action_blue_secondary,null===(n=e.colors)||void 0===n?void 0:n.$color_action_blue_secondary)},children:[(0,U.tZ)(z.Jd,{typo:"$100-14-med",children:e("more")}),(0,U.tZ)(ei.JO,{as:eo.xMl,size:20,color:"$color_action_blue_primary"})]})]})},getPromptTemplates=async e=>q.Np.BE2.get("/prompt-templates?limit=6",e),useGetRecommendPromptList=()=>(0,et.dH)("/prompt-templates",async()=>{let e=await getPromptTemplates({params:{recommended:!0}});return e.data.data},{errorRetryCount:0,fallbackData:{promptTemplates:[],totalCount:0}});function PromptSuggestionList_templateObject(){let e=(0,D._)(["\n          @media (max-width: 652px) {\n            grid-template-columns: 1fr;\n          }\n        "]);return PromptSuggestionList_templateObject=function(){return e},e}let PromptSuggestionList=()=>{let{data:e,isLoading:t}=useGetRecommendPromptList(),{trackEvent:n}=(0,H.Ke)();return(0,X.useEffect)(()=>{e&&n("view_prompthub_card",{content:e.promptTemplates.map(e=>e._id),section_order:5})},[e]),(0,U.BX)(z.gC,{width:"100%",gap:"14px",px:["20px","20px","40px"],children:[(0,U.tZ)(PromptSuggestionListHeader,{}),(0,U.tZ)(z.rj,{maxWidth:"767px",gridTemplateColumns:"repeat(2, 1fr)",rowGap:"12px",columnGap:"16px",css:(0,J.iv)(PromptSuggestionList_templateObject()),children:t?Array(6).fill(null).map((e,t)=>(0,U.tZ)(V.Od,{width:"100%",height:"92px",borderRadius:"10px"},t)):null==e?void 0:e.promptTemplates.map((e,t)=>(0,U.tZ)(PromptSuggestionListItem,{prompt:e,index:t},e._id))})]})};function RecentUnitListItem_templateObject(){let e=(0,D._)(["\n        cursor: pointer;\n\n        &:hover {\n          background-color: ",";\n        }\n      "]);return RecentUnitListItem_templateObject=function(){return e},e}let RecentUnitListItem=e=>{let{displayName:t,thumbnail:n,onClick:o}=e;return(0,U.BX)(z.Ug,{p:"6px 16px 6px 8px",gap:"6px",alignItems:"center",bg:"$color_surface_elevated",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"40px",css:e=>{var t;return(0,J.iv)(RecentUnitListItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},minWidth:"fit-content",onClick:o,children:[(0,U.tZ)(CharacterAvatar,{width:"24px",height:"24px",imgSrc:n,borderRadius:"24px",imgStyle:{width:"calc(100% + 2px)",height:"calc(100% + 2px)",transform:"translate(-1px, -1px)"}}),(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:t})]})};function RecentUnitListContainer_templateObject(){let e=(0,D._)(["\n              cursor: pointer;\n\n              &:hover {\n                background-color: ",";\n              }\n            "]);return RecentUnitListContainer_templateObject=function(){return e},e}let RecentUnitListContainer=()=>{let e=(0,G.T_)("home.recent_unit_list"),{chatList:t,isLoading:n}=(0,es.c)(),{moveRecentChat:o}=(0,ep.Jq)(),{push:r}=(0,en.useRouter)(),{trackEvent:i}=(0,H.Ke)(),a=(0,Q.mN)(t.map(e=>{var t;return e.character?{displayName:e.character.name,thumbnail:(null===(t=e.character.profileImage)||void 0===t?void 0:t.origin)||"",_id:e.character._id,type:"c"}:e.tempUnit?{displayName:e.tempUnit.displayName,thumbnail:e.tempUnit.thumbnail,_id:e.tempUnit._id,type:"u"}:null}),"_id").filter(e=>!!e).slice(0,3),renderRecentUnitList=()=>0===a.length?(0,U.tZ)(z.kC,{height:"38px",alignItems:"center",children:(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_tertiary",children:e("empty")})}):(0,U.BX)(U.HY,{children:[a.map((e,t)=>(0,U.tZ)(RecentUnitListItem,{...e,onClick:()=>{i("click_recent_model_chip",{name:e.displayName,index:t,section_order:3,feature_menu:"c"===e.type?"character":"chat"}),o(e._id,e.type,{onMoveRecent:()=>{i("create_chat",{type:"recent_chat_click",unit_id:e._id})}})}},e._id)),1===a.length&&(0,U.BX)(z.Ug,{p:"6px 12px 6px 16px",gap:"6px",alignItems:"center",bg:"$color_surface_tertiary",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"40px",css:e=>{var t;return(0,J.iv)(RecentUnitListContainer_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_tertiary_hover)},minWidth:"fit-content",onClick:()=>{r("/chat/character"),i("click_character_more_chip",{section_order:3})},children:[(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_tertiary",children:e("explore")}),(0,U.tZ)(ei.JO,{as:eo.xMl,color:"$color_icon_tertiary",size:16})]})]});return(0,X.useEffect)(()=>{a.length&&i("expose_recent_model_chip",{contents:{...a.map(e=>{let{displayName:t}=e;return t})},section_order:3})},[a]),(0,U.BX)(z.gC,{width:"100%",gap:"14px",children:[(0,U.tZ)(z.Jd,{color:"$color_text_primary",typo:"$100-16-semi",px:["20px","20px","40px"],children:e("recent_ai")}),(0,U.tZ)(z.Ug,{px:N.P8?"0px":["20px","20px","40px"],children:(0,U.tZ)(CarouselContainer,{px:N.P8?["20px","20px","40px"]:"0px",gap:"12px",renderContent:()=>(0,U.tZ)(U.HY,{children:n?[,,,].fill(null).map((e,t)=>(0,U.tZ)(V.Od,{width:"96px",height:"38px",borderRadius:"40px"},t)):renderRecentUnitList()})})})]})},tt=e0()(()=>n.e(4457).then(n.bind(n,94457)).then(e=>e.ChatInputContainer),{loadableGenerated:{webpack:()=>[94457]},ssr:!1}),ChatHome=()=>{let{mediaQueries:e}=(0,er.TC)(),t=(0,N.ac)(e.mobile),{user:n}=(0,eu.aF)();return(0,U.tZ)(eb.c6,{children:(0,U.BX)(z.gC,{maxWidth:["807px","807px","847px"],width:"100%",height:"calc(100%".concat(t?" - ".concat(56,"px"):"",");"),alignItems:"center",children:[t&&(0,U.tZ)(z.xu,{width:"100%",height:60,minHeight:60,borderBottom:"1px solid",borderColor:"$color_divider_secondary"}),(0,U.BX)(z.gC,{py:"30px",width:"100%",children:[(0,U.BX)(z.gC,{alignItems:"center",px:["20px","20px","40px"],children:[(0,U.tZ)(ChatHomeBanner,{}),(0,U.BX)(z.gC,{gap:"26px",width:"100%",alignItems:"center",children:[(0,U.tZ)(z.xu,{width:"100%",minHeight:"134px",children:(0,U.tZ)(tt,{})}),(0,U.tZ)(ChocoChipList,{})]})]}),(0,U.tZ)(z.xu,{height:86}),(0,U.BX)(z.gC,{width:"100%",gap:"48px",children:[n&&(0,U.tZ)(RecentUnitListContainer,{}),eq.sO&&(0,U.tZ)(CharacterRecommendList,{}),eq.vc&&(0,U.tZ)(CharacterRandomList,{}),(0,U.tZ)(PromptSuggestionList,{})]}),eq.sO&&(0,U.tZ)(ChatHomeIsland,{})]})]})})},LegacyHome=()=>(0,U.tZ)(ChatHome,{});function ChatPageLayoutV2_templateObject(){let e=(0,D._)(["\n          flex-grow: 1;\n\n          &::-webkit-scrollbar {\n            display: none;\n          }\n\n          -ms-overflow-style: none;\n          scrollbar-width: none;\n        "]);return ChatPageLayoutV2_templateObject=function(){return e},e}let ChatPageLayoutV2=e=>{let{content:t,footer:n}=e;return(0,U.tZ)(z.gC,{width:"100%",height:"100%",justifyContent:"center",children:(0,U.BX)(z.gC,{id:"chat-content",width:"100%",height:"100dvh",overflowY:"scroll",css:(0,J.iv)(ChatPageLayoutV2_templateObject()),children:[(0,U.tZ)(z.xu,{width:"100%",height:"100%",zIndex:1,overflowY:"auto",overflowX:"hidden",children:t}),(0,U.tZ)(z.xu,{width:"100%",children:n})]})})};var tn=n(32346);let to=(0,e2.dU)("NEXT_PUBLIC_OLD_APP_URL")+"/store",tr=(0,e2.dU)("NEXT_PUBLIC_STUDIO_URL")||"",useGetMenuList=()=>{let e=(0,G.T_)("footer"),t=(0,G.bU)(),{trackEvent:n}=(0,H.Ke)(),o=(0,X.useMemo)(()=>[{type:"store",name:e("store"),path:to,isOuterLink:!0,action:()=>{window.open(to,"_blank","noopener"),n("click_main_page_footer_btn",{btn_type:e("store")})}},{type:"studio",name:e("studio"),path:tr,isOuterLink:!0,action:()=>{window.open(tr,"_blank","noopener"),n("click_main_page_footer_btn",{btn_type:e("studio")})}},{type:"prompt",name:e("prompt"),path:"/prompt",action:()=>{n("click_main_page_footer_btn",{btn_type:e("prompt")})}}],[e,n]),r=o.filter(e=>{let{type:t}=e;return"prompt"===t}),i=t===eq.pS.ko?o:r;return{menuList:i}},DefaultFooter=()=>{let{defaultSSOLink:e}=(0,ex.Ae)(),t=(0,G.T_)(),n=(0,G.bU)(),{menuList:o}=useGetMenuList(),r=(0,N.ac)("(max-width: 539px)"),i=r?z.gC:z.Ug;return(0,U.tZ)(z.gC,{justifyContent:"center",alignItems:"center",backgroundColor:"$color_bg_screen",children:(0,U.BX)(i,{paddingY:"20px",gap:"28px",alignItems:"center",children:["ko-KR"===n&&(0,U.tZ)(z.Ug,{gap:"26px",alignItems:"center",children:o.map(e=>{let{name:t,type:n,isOuterLink:o,path:r,action:i}=e;return o?(0,U.tZ)(z.zx,{onClick:i,children:(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t})},n):(0,U.tZ)(ef(),{href:r,children:(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t})},n)})}),"ko-KR"===n&&o.length>0&&!r&&(0,U.tZ)(z.gC,{width:"1px",height:"14px",backgroundColor:"$color_divider_secondary"}),(0,U.BX)(z.Ug,{gap:"26px",alignItems:"center",children:["ja-JP"===n&&(0,U.BX)(U.HY,{children:[(0,U.tZ)(ef(),{href:"/about",target:"_blank",rel:"noopener noreferrer",children:(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("header.guide.company")})}),(0,U.tZ)(ef(),{href:"https://wrtn.notion.site/7f4ef7dfcd544c689bd6e040173ad8cc",target:"_blank",rel:"noopener noreferrer",children:(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("header.guide.community")})})]}),(0,U.tZ)(ef(),{href:"ko-KR"===n?"https://help.wrtn.ai":"ja-JP"===n?"https://docs.google.com/forms/d/e/1FAIpQLSczgUnpFrSKWMhINRBWfnCd4NYnoUupm9bUdXbK0YKdKYTrKQ/viewform":"",target:"_blank",rel:"noopener noreferrer",children:(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("footer.cs")})}),"ja-JP"===n&&!r&&(0,U.tZ)(z.xu,{width:"1px",height:"14px",backgroundColor:"$color_divider_secondary"}),(0,U.tZ)(ef(),{href:e("/policy/service"),target:"_blank",rel:"noopener noreferrer",children:(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("footer.terms")})}),"ko-KR"===n&&(0,U.tZ)(ef(),{href:e("/policy/privacy/location"),target:"_blank",rel:"noopener noreferrer",children:(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("footer.location_policy")})}),(0,U.tZ)(ef(),{href:e("/policy/privacy"),target:"_blank",rel:"noopener noreferrer",children:(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("footer.privacy")})}),"ko-KR"===n&&(0,U.tZ)(ef(),{href:e("/policy/youth"),target:"_blank",rel:"noopener noreferrer",children:(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("footer.youth")})})]})]})})};var ti=n(76467);let ChatLayout=e=>{let{pathname:t}=(0,W.tv)(),{mediaQueries:n}=(0,er.TC)(),o=(0,N.ac)(n.mobile);return(0,U.tZ)(ti.C,{chatList:(0,U.tZ)(tn.j,{}),content:(0,U.tZ)(ChatPageLayoutV2,{content:e.children,footer:o||"/"!==t&&"/chat"!==t?void 0:(0,U.tZ)(DefaultFooter,{})})})};n(33178),n(74548);var ta=n(24719),tl=n(55017);let ChatHomePage=()=>{let{trackEvent:e}=(0,H.Ke)(),{mode:t}=(0,er.TC)();return(0,X.useEffect)(()=>{e("view_main_page",{model_name:eA.ChatModel.WRTN_SEARCH.toUpperCase(),mode:t})},[]),(0,U.BX)(z.gC,{children:[(0,U.BX)(z.xu,{display:["block","block","none","none"],children:[(0,U.tZ)(tl.y,{displayMenu:!1}),(0,U.tZ)(MobileGuideView,{})]}),(0,U.tZ)(z.xu,{display:["none","none","block","block"],children:(0,U.tZ)(eb.Rm,{children:(0,U.tZ)(ta.b,{children:(0,U.tZ)(ChatHomeV2,{})})})})]})},tc=X.createContext(null),ChatProvider=e=>{let{children:t,initialValue:n}=e,o=X.useMemo(()=>!!n&&!!n.chat&&!!n.chatId,[n]),r=X.useMemo(()=>{var e;let t=null==n?void 0:null===(e=n.chat)||void 0===e?void 0:e.messages;return t&&t.flatMap(e=>e).filter(e=>"user"===e.role).pop()||null},[n]),i=X.useMemo(()=>{var e;let t=null==n?void 0:null===(e=n.chat)||void 0===e?void 0:e.messages;return t?t.length:0},[n]),a=X.useMemo(()=>{var e,t;return{chat:null!==(e=null==n?void 0:n.chat)&&void 0!==e?e:null,chatId:null!==(t=null==n?void 0:n.chatId)&&void 0!==t?t:null,isChatInsideRoom:o,lastUserMessage:r,messageLength:i}},[n]);return(0,U.tZ)(tc.Provider,{value:a,children:t})},td=(0,e7.TR)(tc,"[ChatProvider] cannot find context provider");function ai_fast_search_extends(){return(ai_fast_search_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var ai_fast_search=function(e){return X.createElement("svg",ai_fast_search_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),p||(p=X.createElement("path",{fill:"#F72F08",d:"m6.018 13.031 2.935-10.57a.515.515 0 0 1 .497-.38h7.882c.376 0 .626.39.468.731l-3.678 7.145h3.501c.445 0 .681.525.385.858L8.851 22.109c-.35.394-.996.07-.89-.447l1.963-7.988-3.407.008a.515.515 0 0 1-.499-.65"})))};function ai_search_extends(){return(ai_search_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var ai_search=function(e){return X.createElement("svg",ai_search_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),_||(_=X.createElement("path",{fill:"#FFBDB1",d:"M12 23.992c6.63 0 12-5.37 12-11.999C24 5.365 18.623 0 12 0S0 5.37 0 11.999s5.37 11.999 12 11.999z"})),h||(h=X.createElement("path",{fill:"#FF7963",d:"M12 20.995c4.967 0 8.997-4.029 8.997-8.996S16.967 3.003 12 3.003s-8.997 4.03-8.997 8.996 4.03 8.996 8.997 8.996"})),m||(m=X.createElement("path",{fill:"#FF4825",d:"M12 17.993c3.312 0 6-2.689 6-6s-2.688-6-6-6-6 2.689-6 6 2.688 6 6 6"})),g||(g=X.createElement("path",{fill:"#F72F08",d:"M12 15.002a3.003 3.003 0 1 0 0-6.006A3 3 0 0 0 8.997 12 3 3 0 0 0 12 15.002"})),x||(x=X.createElement("path",{fill:"url(#ai_search_svg__a)",d:"M22.392 6C20.314 2.41 16.439 0 12 0v11.999z",opacity:.5})),v||(v=X.createElement("defs",null,X.createElement("linearGradient",{id:"ai_search_svg__a",x1:12.243,x2:17.103,y1:11.512,y2:3.151,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#fff"}),X.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})))))};function ai_search_dark_extends(){return(ai_search_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var ai_search_dark=function(e){return X.createElement("svg",ai_search_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),f||(f=X.createElement("g",{clipPath:"url(#ai_search_dark_svg__a)"},X.createElement("path",{fill:"#431A11",d:"M12 23.998c6.63 0 12-5.37 12-11.999S18.63 0 12 0 0 5.376 0 12.005s5.37 11.999 12 11.999z"}),X.createElement("path",{fill:"#7C2614",d:"M12 21.001c4.967 0 8.997-4.03 8.997-8.996S16.967 3.009 12 3.009s-8.997 4.029-8.997 8.996 4.03 8.996 8.997 8.996"}),X.createElement("path",{fill:"#B3331A",d:"M12 17.999c3.312 0 6-2.689 6-6s-2.688-6-6-6-6 2.689-6 6 2.688 6 6 6"}),X.createElement("path",{fill:"#F95939",d:"M12 15.002a3.003 3.003 0 1 0 0-6.006A3 3 0 0 0 8.997 12 3 3 0 0 0 12 15.002"}),X.createElement("path",{fill:"url(#ai_search_dark_svg__b)",d:"M22.392 6.005C20.314 2.421 16.439.006 12 .006v11.999z",opacity:.4}))),b||(b=X.createElement("defs",null,X.createElement("linearGradient",{id:"ai_search_dark_svg__b",x1:12.243,x2:17.103,y1:11.518,y2:3.157,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#320C04"}),X.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),X.createElement("clipPath",{id:"ai_search_dark_svg__a"},X.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function gpt4o_extends(){return(gpt4o_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var gpt4o=function(e){return X.createElement("svg",gpt4o_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),y||(y=X.createElement("g",{clipPath:"url(#gpt4o_svg__a)"},X.createElement("path",{fill:"#FFBDB1",d:"m24 18.092-13.41-7.74V0L24 7.74z"}),X.createElement("path",{fill:"#FF7963",d:"m20.468 20.063-13.41-7.74V1.97l13.41 7.74z"}),X.createElement("path",{fill:"#FF4825",d:"m16.936 22.033-13.41-7.74V3.941l13.41 7.74z"}),X.createElement("path",{fill:"#F72F08",d:"M13.41 24.004 0 16.264V5.906l13.41 7.74v10.358"}),X.createElement("path",{fill:"url(#gpt4o_svg__b)",d:"m3.585 14.293 9.825 5.669v-6.31L3.585 7.978z",opacity:.5}))),C||(C=X.createElement("defs",null,X.createElement("linearGradient",{id:"gpt4o_svg__b",x1:9.694,x2:7.967,y1:19.267,y2:11.616,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#fff"}),X.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),X.createElement("clipPath",{id:"gpt4o_svg__a"},X.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function gpt4o_dark_extends(){return(gpt4o_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var gpt4o_dark=function(e){return X.createElement("svg",gpt4o_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),k||(k=X.createElement("g",{clipPath:"url(#gpt4o_dark_svg__a)"},X.createElement("path",{fill:"#431A11",d:"m24 18.092-13.41-7.74V0L24 7.74z"}),X.createElement("path",{fill:"#7C2614",d:"m20.468 20.063-13.41-7.74V1.97l13.41 7.74z"}),X.createElement("path",{fill:"#B3331A",d:"m16.936 22.033-13.41-7.74V3.941l13.41 7.74z"}),X.createElement("path",{fill:"#F95939",d:"M13.41 24.004 0 16.264V5.912l13.41 7.74z"}),X.createElement("path",{fill:"url(#gpt4o_dark_svg__b)",d:"m3.585 14.293 9.825 5.669v-6.31L3.585 7.978z",opacity:.4}))),w||(w=X.createElement("defs",null,X.createElement("linearGradient",{id:"gpt4o_dark_svg__b",x1:12.642,x2:7.07,y1:22.004,y2:11.327,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#320C04"}),X.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),X.createElement("clipPath",{id:"gpt4o_dark_svg__a"},X.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function icon_pro_symbol_dark_extends(){return(icon_pro_symbol_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var icon_pro_symbol_dark=function(e){return X.createElement("svg",icon_pro_symbol_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),Z||(Z=X.createElement("g",{clipPath:"url(#icon_pro_symbol_dark_svg__a)"},X.createElement("path",{fill:"#3F008F",d:"M21.27 2.731c-1.576-1.577-5.314-.525-9.262 2.309v13.914a30.4 30.4 0 0 0 3.754-3.2c5.12-5.12 7.583-10.948 5.509-13.023"}),X.createElement("path",{fill:"#6C09EA",d:"M2.735 2.732C4.307 1.16 8.05 2.206 11.998 5.04v13.915a30.4 30.4 0 0 1-3.754-3.2C3.124 10.635.661 4.806 2.735 2.732"}),X.createElement("path",{fill:"#7230C5",d:"M15.754 8.246c5.12 5.12 7.583 10.948 5.509 13.023-1.577 1.577-5.314.525-9.263-2.309V5.04a30.4 30.4 0 0 1 3.754 3.2z"}),X.createElement("path",{fill:"url(#icon_pro_symbol_dark_svg__b)",d:"M18.962 12a30.4 30.4 0 0 0-3.2-3.754 30.4 30.4 0 0 0-3.754-3.2V18.96a30.4 30.4 0 0 0 3.754-3.2 30.4 30.4 0 0 0 3.2-3.754z",opacity:.5}),X.createElement("path",{fill:"#A863FF",d:"M8.244 8.246C3.124 13.36.661 19.189 2.735 21.263c1.578 1.577 5.315.526 9.263-2.309V5.04a30.4 30.4 0 0 0-3.754 3.2z"}))),I||(I=X.createElement("defs",null,X.createElement("linearGradient",{id:"icon_pro_symbol_dark_svg__b",x1:15.482,x2:15.482,y1:20.537,y2:7.44,gradientUnits:"userSpaceOnUse"},X.createElement("stop",null),X.createElement("stop",{offset:1,stopOpacity:0})),X.createElement("clipPath",{id:"icon_pro_symbol_dark_svg__a"},X.createElement("path",{fill:"#fff",d:"M2 2h20v20H2z"})))))};function icon_pro_symbol_light_extends(){return(icon_pro_symbol_light_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var icon_pro_symbol_light=function(e){return X.createElement("svg",icon_pro_symbol_light_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),O||(O=X.createElement("path",{fill:"#DDCCF3",d:"M21.27 2.731c-1.576-1.577-5.314-.525-9.262 2.309v13.914a30.4 30.4 0 0 0 3.754-3.2c5.12-5.12 7.583-10.948 5.509-13.023"})),S||(S=X.createElement("path",{fill:"#CFA8FF",d:"M2.735 2.732C4.307 1.16 8.05 2.206 11.998 5.04v13.915a30.4 30.4 0 0 1-3.754-3.2C3.124 10.635.661 4.806 2.735 2.732"})),B||(B=X.createElement("path",{fill:"#B880FF",d:"M15.754 8.246c5.12 5.12 7.583 10.948 5.509 13.023-1.577 1.577-5.314.525-9.263-2.309V5.04a30.4 30.4 0 0 1 3.754 3.2z"})),$||($=X.createElement("path",{fill:"url(#icon_pro_symbol_light_svg__a)",d:"M18.962 12a30.4 30.4 0 0 0-3.2-3.754 30.4 30.4 0 0 0-3.754-3.2V18.96a30.4 30.4 0 0 0 3.754-3.2 30.4 30.4 0 0 0 3.2-3.754z",opacity:.5})),A||(A=X.createElement("path",{fill:"#A863FF",d:"M8.244 8.246C3.124 13.36.661 19.189 2.735 21.263c1.578 1.577 5.315.526 9.263-2.309V5.04a30.4 30.4 0 0 0-3.754 3.2z"})),M||(M=X.createElement("defs",null,X.createElement("linearGradient",{id:"icon_pro_symbol_light_svg__a",x1:15.482,x2:15.482,y1:20.537,y2:7.44,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#fff"}),X.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})))))};function icon_wrtn_flame_extends(){return(icon_wrtn_flame_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var icon_wrtn_flame=function(e){return X.createElement("svg",icon_wrtn_flame_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none"},e),R||(R=X.createElement("path",{fill:"url(#icon_wrtn_flame_svg__a)",d:"M14.992 7.758c-.11-.113-.307-.041-.312.113l-.001.014c-.03.643-.581 1.166-1.257 1.19A1.4 1.4 0 0 1 12.925 9c-.808-.323-.859-.987-.801-1.396 0 0 .02-.158.127-.448l.021-.056.014-.035c.052-.122.38-.965.153-2.189-.35-2.222-1.983-3.397-2.715-3.82-.137-.078-.308.028-.288.179.046.35.07.91-.102 1.486-.157.497-.523.965-.729 1.202-1.426 1.657-3.154 3.468-3.627 3.96-.102.108-.53.583-.984 1.394a6.14 6.14 0 0 0-.69 2.831c0 4.003 3.842 7.15 8.202 6.274 2.529-.508 4.528-2.382 5.094-4.786.53-2.251-.181-4.364-1.607-5.839"})),j||(j=X.createElement("path",{fill:"url(#icon_wrtn_flame_svg__b)",d:"M10 16.819a2.917 2.917 0 1 0 0-5.833 2.917 2.917 0 0 0 0 5.833"})),E||(E=X.createElement("defs",null,X.createElement("linearGradient",{id:"icon_wrtn_flame_svg__a",x1:10.04,x2:10.04,y1:1.031,y2:18.531,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#F72F08"}),X.createElement("stop",{offset:1,stopColor:"#FF5A13"})),X.createElement("linearGradient",{id:"icon_wrtn_flame_svg__b",x1:10,x2:10,y1:16.819,y2:10.986,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#FE884D"}),X.createElement("stop",{offset:1,stopColor:"#FF712E"})))))};function image_extends(){return(image_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var assets_image=function(e){return X.createElement("svg",image_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),T||(T=X.createElement("g",{clipPath:"url(#image_svg__a)"},X.createElement("path",{fill:"#FFBDB1",d:"m2 10.002.006-4.003 3.463-2.002L22.8 14.005 22.795 18l-3.463 2.008z"}),X.createElement("path",{fill:"#FF7963",d:"m22.8 10.002-.005-4.003-3.463-2.002L2 14.005 2.006 18l3.463 2.008z"}),X.createElement("path",{fill:"#FF4825",d:"M8.931 1.996 12.401 0l3.462 1.996V22.01L12.4 24l-3.469-1.99z"}),X.createElement("path",{fill:"#F72F08",d:"m12.4 8 3.463 2.002v4.002L12.4 16.006l-3.469-2.001V10z"}),X.createElement("path",{fill:"url(#image_svg__b)",d:"M15.863 18.008 12.4 16.006l3.463-2.001z",opacity:.5}),X.createElement("path",{fill:"url(#image_svg__c)",d:"M8.938 10.002 12.4 8 8.937 6z",opacity:.5}))),L||(L=X.createElement("defs",null,X.createElement("linearGradient",{id:"image_svg__b",x1:13.19,x2:15.916,y1:13.155,y2:18.524,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#fff"}),X.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),X.createElement("linearGradient",{id:"image_svg__c",x1:11.61,x2:8.884,y1:5.149,y2:10.518,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#fff"}),X.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),X.createElement("clipPath",{id:"image_svg__a"},X.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function image_dark_extends(){return(image_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)({}).hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(null,arguments)}var image_dark=function(e){return X.createElement("svg",image_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),F||(F=X.createElement("g",{clipPath:"url(#image_dark_svg__a)"},X.createElement("path",{fill:"#431A11",d:"m2 10.002.006-4.003 3.463-2.002L22.8 14.005 22.795 18l-3.463 2.002z"}),X.createElement("path",{fill:"#7C2614",d:"m22.8 10.002-.005-4.003-3.463-2.002L2 14.005 2.006 18l3.463 2.002z"}),X.createElement("path",{fill:"#B3331A",d:"M8.931 1.996 12.401 0l3.462 1.996V22.01L12.4 24l-3.469-1.99z"}),X.createElement("path",{fill:"#F95939",d:"m12.4 8 3.463 2.002v3.997L12.4 16.006l-3.469-2.007V10z"}),X.createElement("path",{fill:"url(#image_dark_svg__b)",d:"M15.863 18.008 12.4 16.006l3.463-2.007z",opacity:.4}),X.createElement("path",{fill:"url(#image_dark_svg__c)",d:"M8.938 10.002 12.4 8 8.937 6z",opacity:.4}))),P||(P=X.createElement("defs",null,X.createElement("linearGradient",{id:"image_dark_svg__b",x1:13.19,x2:15.916,y1:13.155,y2:18.524,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#320C04"}),X.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),X.createElement("linearGradient",{id:"image_dark_svg__c",x1:11.61,x2:8.884,y1:5.149,y2:10.518,gradientUnits:"userSpaceOnUse"},X.createElement("stop",{stopColor:"#320C04"}),X.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),X.createElement("clipPath",{id:"image_dark_svg__a"},X.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};let ModelSymbol=e=>{let{model:t}=e,{mode:n}=(0,er.TC)(),o="dark"===n,r=(0,X.useMemo)(()=>{switch(t){case eA.ChatModel.WRTN_SEARCH:return o?ai_search_dark:ai_search;case eA.ChatModel.WRTN_FAST_SEARCH:return ai_fast_search;case eA.ChatModel.GPT4:case eA.ChatModel.GPT4_ASSIGNMENT:return o?gpt4o_dark:gpt4o;case eA.ChatModel.PRO_MODE:return o?icon_pro_symbol_dark:icon_pro_symbol_light;case eA.ChatModel.SD3_TURBO:return o?image_dark:assets_image;case"flame":return icon_wrtn_flame;default:return o?ai_search_dark:ai_search}},[o,t]);return(0,U.tZ)(r,{})},ChatSkeleton=()=>{let{chat:e}=td(),t=(0,G.T_)();return(0,U.BX)(z.gC,{mt:"20px",pb:"38px",gap:"16px",width:"100%",children:[(0,U.BX)(z.gC,{gap:"28px",children:[(0,U.tZ)(V.Od,{width:"400px",maxWidth:"90vw",height:"29px",borderRadius:"8px"}),(0,U.BX)(z.Ug,{gap:"8px",alignItems:"center",children:[(null==e?void 0:e.model)&&(0,U.tZ)(ModelSymbol,{model:e.model}),(0,U.tZ)(z.Jd,{typo:"$100-18-semi",color:"$color_text_primary",children:t("chat.feature_home.home.answer")})]})]}),(0,U.BX)(z.gC,{gap:"12px",children:[(0,U.tZ)(V.Od,{width:"100%",height:"24px",borderRadius:"8px"}),(0,U.tZ)(V.Od,{width:"626px",height:"24px",borderRadius:"8px"}),(0,U.tZ)(V.Od,{width:"461px",height:"24px",borderRadius:"8px"}),(0,U.tZ)(V.Od,{width:"302px",height:"24px",borderRadius:"8px"})]})]})};function EmptyLayout_templateObject(){let e=(0,D._)(["\n            flex-shrink: 0;\n          "]);return EmptyLayout_templateObject=function(){return e},e}function EmptyLayout_templateObject1(){let e=(0,D._)(["\n            &::-webkit-scrollbar {\n              display: none;\n            }\n\n            -ms-overflow-style: none;\n            scrollbar-width: none;\n          "]);return EmptyLayout_templateObject1=function(){return e},e}let EmptyLayout=e=>{let{leftSection:t,rightSection:n}=e;return(0,U.tZ)(z.xu,{paddingX:"40px",width:"100%",height:"100%",children:(0,U.BX)(z.Ug,{width:"100%",height:"100%",maxWidth:"1024px",margin:"0 auto",gap:"12px",children:[(0,U.tZ)(z.gC,{width:780,css:(0,J.iv)(EmptyLayout_templateObject()),children:t}),(0,U.tZ)(z.xu,{display:["none","none","flex","flex"],overflow:"auto",width:280,py:"24px",flexDirection:"row",flexShrink:0,css:(0,J.iv)(EmptyLayout_templateObject1()),children:n})]})})};function EmptyContent_templateObject(){let e=(0,D._)(["\n            > svg {\n              transform: scale(6.8354);\n            }\n          "]);return EmptyContent_templateObject=function(){return e},e}let EmptyContent=e=>{let{model:t}=e;return(0,U.tZ)(EmptyLayout,{leftSection:(0,U.tZ)(z.xu,{width:"100%",height:"calc(100dvh - 56px)",display:"flex",alignItems:"center",justifyContent:"center",opacity:.2,css:(0,J.iv)(EmptyContent_templateObject()),position:"fixed",bottom:0,left:0,children:(0,U.tZ)(ModelSymbol,{model:t||"flame"})})})};var ts=n(58923),tu=n(90722);let useDisplayStreamMessage=e=>{let[t,n]=X.useState(""),o=(0,eC.sJ)(ey.CU),r="streaming"===o&&e;return X.useEffect(()=>{"ready"!==o&&"canceling"!==o&&n("")},[o]),X.useEffect(()=>{if(!e)return;let t=tu.k0.subscribe(e=>{e.idle||n(e.content)});return()=>{t.unsubscribe()}},[e]),{streamMessage:t,isStreaming:r}};n(80318);var tp=n(22260);let t_=X.createContext(null),MessageProvider=e=>{let{children:t,message:n,isLastMessage:o}=e,r=X.useMemo(()=>({message:n,isLastMessage:o,role:n[0].role,uuid:(0,eF.Z)()}),[n,o]);return(0,U.tZ)(t_.Provider,{value:r,children:t})},th=(0,e7.TR)(t_,"[MessageProvider] cannot find context provider"),tm=X.createContext(null),UnitProvider=e=>{let{children:t,initialValue:n}=e,{user:o}=(0,eu.aF)(),r=(null==n?void 0:n.character)?null==n?void 0:n.character:(null==n?void 0:n.unit)?null==n?void 0:n.unit:null,i=(null==r?void 0:r._id)||null,a=(null==r?void 0:r.enableOptions)||null,l=X.useMemo(()=>{var e;return(null==n?void 0:null===(e=n.unit)||void 0===e?void 0:e.displayOptions)?"model":(null==n?void 0:n.unit)?"unit":(null==n?void 0:n.character)?"character":null},[n]),c=X.useMemo(()=>{var e;return"unit"===l||"model"===l?null==r?void 0:r.name:null==n?void 0:null===(e=n.character)||void 0===e?void 0:e.model},[l,n]),d=X.useMemo(()=>{if("character"===l){var e,t,i,a;if((null==n?void 0:null===(e=n.character)||void 0===e?void 0:e.status)==="blocked"||(null==n?void 0:null===(t=n.character)||void 0===t?void 0:t.status)==="deleted"||(null==n?void 0:null===(i=n.character)||void 0===i?void 0:i.visibility)==="private"&&(null==n?void 0:null===(a=n.character)||void 0===a?void 0:a.wrtnUid)!==(null==o?void 0:o.wrtnUid))return!0}return"unit"===l&&(null==r?void 0:r.webStatus)!=="released"},[l,null==r?void 0:r.webStatus,n,null==o?void 0:o.wrtnUid]),s=X.useMemo(()=>{if("character"===l){var e,t,i,a;if((null==n?void 0:null===(e=n.character)||void 0===e?void 0:e.status)==="blocked")return"blocked";if((null==n?void 0:null===(t=n.character)||void 0===t?void 0:t.status)==="deleted")return"deleted";if((null==n?void 0:null===(i=n.character)||void 0===i?void 0:i.visibility)==="private"&&(null==n?void 0:null===(a=n.character)||void 0===a?void 0:a.wrtnUid)!==(null==o?void 0:o.wrtnUid))return"private"}return"unit"===l&&(null==r?void 0:r.webStatus)!=="released"?"notSupported":null},[l,n]),u=X.useMemo(()=>"pro_mode"===c,[c]),p=X.useMemo(()=>"sd3_turbo"===c,[c]),_=X.useMemo(()=>"gpt4_assignment"===c,[c]),h=X.useMemo(()=>{var e;return{unit:r,character:null!==(e=null==n?void 0:n.character)&&void 0!==e?e:null,unitId:i,unitType:l,enableOptions:a,model:c,isUnitDisabled:d,disableType:s,isProMode:u,isImageModel:p,isAssignmentModel:_}},[n]);return(0,U.tZ)(tm.Provider,{value:h,children:t})},tg=(0,e7.TR)(tm,"[UnitProvider] cannot find context provider"),useCopyPureText=()=>({copyPureText:()=>{var e,t;let n=null===(t=window)||void 0===t?void 0:null===(e=t.getSelection())||void 0===e?void 0:e.toString();n&&(document.addEventListener("copy",function(e){var t;null==e||null===(t=e.clipboardData)||void 0===t||t.setData("text/plain",n),e.preventDefault()}),document.execCommand("copy"))}}),useCurrentText=e=>{let{isLastMessage:t}=th(),{streamMessage:n,isStreaming:o}=useDisplayStreamMessage(t),r=o&&n&&n.length>0,i=e&&e.length>0;return r?n:i?e:!e&&n?n:""},getAdEventProperties=e=>{var t,n,o,r,i,a,l,c,d,s,u;return{ad_creative_id:null!==(t=null==e?void 0:e.adCreativeId)&&void 0!==t?t:"",ad_group_id:null!==(n=null==e?void 0:e.adGroupId)&&void 0!==n?n:"",ad_product_category:null!==(o=null==e?void 0:e.adProductCategory)&&void 0!==o?o:"SINGLE",ad_campaign_id:null!==(r=null==e?void 0:e.campaignId)&&void 0!==r?r:"",ad_product_code:null!==(i=null==e?void 0:e.campaignAdProductCode)&&void 0!==i?i:"",ad_product_type:null!==(a=null==e?void 0:e.adProductType)&&void 0!==a?a:"",package_ad_creative_id:null!==(l=null==e?void 0:e.packageAdCreativeId)&&void 0!==l?l:"",ad_uuid:null!==(c=null==e?void 0:e.adUid)&&void 0!==c?c:"",ad_request_id:null!==(d=null==e?void 0:e.adRequestId)&&void 0!==d?d:"",ad_creative_detail_id:null!==(s=null==e?void 0:e.adCreativeDetailId)&&void 0!==s?s:"",ad_inventory_code:null==e?void 0:e.adInventoryCode,ad_uid:null!==(u=null==e?void 0:e.adUid)&&void 0!==u?u:""}},tx=["1","4","8","12","16","30"],DefaultStep=e=>{let{text:t,messageId:n}=e,o=(0,G.T_)("chat.generate_step.default"),r=(0,eC.sJ)(ey.GY),{chatId:i}=td(),{unitType:a,unit:l}=tg(),c=(0,eC.sJ)(ey.h5),d=(0,eC.sJ)(ey.UB),s=(0,eC.sJ)(ey._b),{trackEvent:u}=(0,H.Ke)(),p=X.useRef(0),{getModelByModelName:_}=(0,e_.pw)(),h={1:o("1"),4:o("4"),8:o("8"),12:o("12"),16:o("16"),30:o("30")},m={1:o("character"),4:o("character"),8:o("character"),12:o("character"),16:o("character"),30:o("character")},[g,x]=X.useState("");return((0,eS.Yz)(()=>{p.current+=1,tx.includes(p.current.toString())&&x("unit"===a?h[p.current]:m[p.current])},1e3),X.useEffect(()=>{if(g&&t.length<1){var e;u("expose_wait_phrase_generate",{message:g,chat_id:i,model_name:null==l?void 0:l.name.toUpperCase(),msg_id:n,fe_msg_id:r,purpose:(null==l?void 0:l.name)&&eq.sO?null===(e=_(l.name))||void 0===e?void 0:e.displayName:void 0,is_image_input:c.images.length>0||d.imageCount>0,is_file_input:c.fileCount>0||d.fileCount>0,is_link_input:c.linkCount>0||d.linkCount>0,assignment_id:s})}},[g]),""===g)?null:(0,U.tZ)(eg.y,{currentWaitingText:g,showCursor:"character"===a})};function MessageContentRenderer_templateObject(){let e=(0,D._)(["\n          word-break: break-all;\n        "]);return MessageContentRenderer_templateObject=function(){return e},e}let MessageContentRenderer=e=>{let{message:t,isAdWebview:n,brandAdInfo:o}=e,r=(0,G.T_)(),{postMessage:i}=(0,N.sW)(),{unit:a,character:l,unitType:c,isProMode:d,isAssignmentModel:s}=tg(),{chatId:u,chat:p}=td(),_=useCurrentText(t.content),{isLastMessage:h,uuid:m}=th(),{isStreaming:g}=useDisplayStreamMessage(h),{copyPureText:x}=useCopyPureText(),{trackEvent:v}=(0,H.Ke)(),{startTrack:f}=(0,H.aY)(),{getModelByModelName:b}=(0,e_.pw)(),y="unit"===c?null==a?void 0:a.name.toUpperCase():null==l?void 0:l.model.toUpperCase();return(0,U.BX)(U.HY,{children:[_.length<1&&(null==a?void 0:a.name)!=="wrtn_search"&&(null==a?void 0:a.name)!=="fast_ai_search"&&!d&&!s&&g&&(0,U.tZ)(DefaultStep,{text:_,messageId:t._id}),_.length<1&&"assistant"===t.role&&(g||(null==p?void 0:p.status)==="streaming")&&s&&(0,U.BX)(z.gC,{gap:"8px",mt:"16px",children:[(0,U.tZ)(V.Od,{height:"24px",width:"100%"}),(0,U.tZ)(V.Od,{height:"24px",width:"80%"}),(0,U.tZ)(V.Od,{height:"24px",width:"60%"}),(0,U.tZ)(V.Od,{height:"24px",width:"40%"})]}),(0,U.tZ)(z.xu,{css:(0,J.iv)(MessageContentRenderer_templateObject()),onCopy:x,children:(0,U.tZ)(tp.U,{isAdWebview:n,content:_,handleLinkEventFactory:e=>{let{url:r,index:a}=e;return()=>{var e,l;let d=null===(e=t.searchResult)||void 0===e?void 0:e.find(e=>(0,eA.isAdSearchResult)(e)),s={chat_id:null!=u?u:"",msg_id:t._id,model_name:null!=y?y:"",link:null!=r?r:"",uuid:null!=m?m:"",...d&&{is_ad:!0,_id:d.adId,...d.eventProperty}};if(n)v("click_webview_chat_url",{screen_name:"WebView",feature_name:"ad",advertiser_id:"sangsangin"}),i({type:"navigate",payload:{screen:"WebviewScreen",params:{url:r},type:"push"}});else{if(t.adCreativeId){let e=getAdEventProperties(o);v("track_chat_url",{feature_menu:"unit"===c?"chat":"character",index:a?Number(a):null,...s,event_type:"click",...e})}else v("track_chat_url",{feature_menu:"unit"===c?"chat":"character",index:a?Number(a):null,...s});f({type:"chat_link",purpose:eq.sO&&y?null===(l=b(y))||void 0===l?void 0:l.displayName:void 0,...s})}}},onClickCode:()=>(0,eO.wp)(r("common.alert.copy_code_success")),customCss:{p:"\n              padding: 0.5em 0px;\n              &:nth-of-type(1) {\n                padding: 0px 0px 0.5em 0px;\n              }\n\n              line-height: 140%;\n            "}})})]})};var tv=n(73822),tf=n(69707),tb=n(1050);function ExportToPDFButton_templateObject(){let e=(0,D._)(["\n          &:hover {\n            cursor: pointer;\n            background-color: ",";\n          }\n        "]);return ExportToPDFButton_templateObject=function(){return e},e}let ExportToPDFButton=e=>{let{messageRef:t,message:n}=e,o=(0,G.T_)(),{trackEvent:r}=(0,H.Ke)(),i=(0,eC.sJ)(ey._b),{chat:a}=td(),l=(0,tb.useReactToPrint)({content:()=>{var e;return null!==(e=null==t?void 0:t.current)&&void 0!==e?e:null},pageStyle:"padding: 0 108px;"});return(0,U.tZ)(z.Ug,{alignItems:"center",children:(0,U.BX)(z.xu,{minWidth:"124px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"20px",border:"1px solid",backgroundColor:"$color_surface_ivory",borderColor:"$color_outline_tertiary",gap:"4px",css:e=>{var t;return(0,J.iv)(ExportToPDFButton_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},onClick:()=>{var e,t;l(),r("click_ai_writing_file_download_btn",{file_type:"pdf",assignmentId:i,feature_menu:"chat",msg_id:null==n?void 0:n._id,model_name:null==a?void 0:null===(e=a.modelInfo)||void 0===e?void 0:e.name.toUpperCase(),purpose:null==a?void 0:null===(t=a.modelInfo)||void 0===t?void 0:t.displayName})},children:[(0,U.tZ)(ei.JO,{as:eo.WGO,size:18}),(0,U.tZ)(z.Jd,{typo:"$110-12-med",color:"$color_text_primary",children:o("feature_assignment.result.save_pdf")})]})})};function MessageCopy_templateObject(){let e=(0,D._)(["\n            &:hover {\n              path {\n                fill: ",";\n              }\n            }\n          "]);return MessageCopy_templateObject=function(){return e},e}let MessageCopy=e=>{let{message:t}=e,n=(0,G.T_)(),{trackEvent:o}=(0,H.Ke)(),{unit:r,unitType:i}=tg(),{getModelByModelName:a}=(0,e_.pw)();return!t.content||t.image&&t.image.imageUrls.length>0?null:(0,U.tZ)(z.xu,{width:18,height:18,children:(0,U.tZ)(V.u,{position:{bottom:"calc(100% + 8px)",left:"-100%"},content:n("ui.user_message.dropdown_more.copy"),children:(0,U.tZ)(z.zx,{width:18,height:18,onClick:()=>{var e,l;o("click_copy_btn",{chat_id:t.chatId,feature_menu:"chat",model_name:null==r?void 0:r.name.toUpperCase(),msg_id:t._id,character_id:"character"===i?null==r?void 0:r._id:null,purpose:null===(e=a(t.model))||void 0===e?void 0:e.displayName});let c="";if(t.content){let e=t.content.replace(/\[\[(.+?)\]\]\((.+?)\)/g,"[$1]");c=e}if(null===(l=t.searchResult)||void 0===l?void 0:l.length){let e=t.searchResult.map((e,t)=>{let{siteName:n,title:o,externalLink:r}=e;return o||n||r?"[".concat(t+1,"]").concat(n?" ".concat(n):"").concat(o?" - ".concat(o):"").concat(r?" (".concat(r,")"):""):null}).filter(Boolean).join("\n");c="".concat(c," \n\n").concat(n("chat.feature_chat_room.message_copy.search_link"),"\n").concat(e)}if(c){let e=eq.sO?"https://agent.wrtn.ai/5xb91l":"https://wrtn.jp";c="".concat(c," \n\n").concat(n("chat.feature_chat_room.message_copy.landing")," > ").concat(e),window.navigator.clipboard.writeText(c),(0,eO.wp)(n("common.alert.copy_message_success"))}},css:e=>{var t,n;return(0,J.iv)(MessageCopy_templateObject(),null!==(n=null===(t=e.colors)||void 0===t?void 0:t.$color_icon_brand)&&void 0!==n?n:"#f72f08")},children:(0,U.tZ)(ei.JO,{as:eo.Tgi,color:"$color_icon_tertiary",size:18})})})})};function ModelGuideAction_templateObject(){let e=(0,D._)(["\n          border: 1px solid ",";\n          text-align: left;\n        "]);return ModelGuideAction_templateObject=function(){return e},e}let ModelGuideAction=e=>{var t;let{openGuide:n,toggleDisliked:o,currentUserMessage:r,message:i,messageIndex:a}=e,l=(0,G.T_)("chat.chat_room.message_evaluation_banner"),{id:c}=(0,e_.mn)(),{id:d}=(0,e_.mp)(),{id:s}=(0,e_.Jv)(),{id:u}=(0,e_.QW)(),{chat:p,chatId:_}=td(),h=(null==p?void 0:p.model)===eA.ChatModel.WRTN_SEARCH,m=(null==p?void 0:p.model)===eA.ChatModel.GPT4,{data:g}=(0,eM.u7)(),x=(0,eC.Zl)(ey.gE),v=null==g?void 0:g.find(e=>e._id===(h?d:s)),f=(0,N.ac)("max-width: 768px"),b=eq.sO&&m&&(null===(t=r.content)||void 0===t?void 0:t.includes("그려줘")),{getModelByModelName:y}=(0,e_.pw)(),{onMakeNewChat:C}=(0,e6.M)(v),{trackEvent:k}=(0,H.Ke)(),w=(0,X.useMemo)(()=>b?l.rich("modal_guide_action.description.ai_image",{strong:e=>(0,U.tZ)(z.Jd,{typo:"$100-14-bold",color:"$color_action_blue_primary",as:"span",children:e})}):h?l.rich("modal_guide_action.description.pro_mode",{strong:e=>(0,U.tZ)(z.Jd,{typo:"$100-14-bold",color:"$color_action_blue_primary",as:"span",children:e})}):l.rich("modal_guide_action.description.ai_search",{strong:e=>(0,U.tZ)(z.Jd,{typo:"$100-14-bold",color:"$color_action_blue_primary",as:"span",children:e})}),[b,h,l]),guideAction=async()=>{var e,t,n;if(!p)return;let l=b?u:h?c:s;x(!0),k("click_unlike_banner_final_action_btn",{chatId:_,msg_id:i._id,chat_index:a,model_name:null==p?void 0:null===(e=p.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"recommend_model",recommend_chip_name:null,btn_name:h?eq.sO?"요약, 첨삭, 소설쓰기는 ".concat(eq.sO?"AI 과제와 업무":"GPT-4","로 실행해보기"):"要約、添削、小説ならGPT-4で試す":eq.sO?"다양한 자료 검색은 AI 검색으로 실행해보기":"より様々な参考資料の検索は、AI検索で試す",feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==p?void 0:p.model)&&eq.sO?null===(t=y(p.model))||void 0===t?void 0:t.displayName:void 0}),k("create_chat",{type:"unlike_banner_recommendation_click",unit_id:l}),await C({unitId:l,input:null!==(n=null==r?void 0:r.content)&&void 0!==n?n:"",isChocoChip:!1,from:"chatRoom"},e=>{e&&o(),x(!1)})};return f?null:(0,U.BX)(z.Ug,{padding:"16px 16px 16px 20px",justifyContent:"space-between",flexWrap:"wrap",gap:"16px",children:[(0,U.BX)(z.Ug,{alignItems:"center",gap:"16px",flexWrap:"wrap",children:[(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:l("modal_guide_action.title")}),"PRO_MODE"!==i.model&&(0,U.tZ)(z.zx,{onClick:guideAction,textAlign:"left",children:(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_action_blue_primary",children:(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(z.Jd,{children:w}),(0,U.tZ)(ei.JO,{as:eo.$Qe,color:"$color_action_blue_primary",size:16})]})})})]}),(0,U.tZ)(z.zx,{height:32,onClick:()=>{var e;n(),k("click_unlike_banner_recommend_more_btn",{chat_id:_,msg_id:i._id,chat_index:a,model_name:null==p?void 0:null===(e=p.model)||void 0===e?void 0:e.toUpperCase(),unlike_banner_abtest_group:"unlike_banner_B"})},flexShrink:0,backgroundColor:"$color_surface_ivory",borderRadius:"40px",css:e=>{var t;return(0,J.iv)(ModelGuideAction_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},children:(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",padding:"6px 8px 6px 14px",borderRadius:"40px",children:[(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:l("modal_guide_action.description.another")}),(0,U.tZ)(ei.JO,{as:eo.GGG,color:"$color_icon_quaternary",size:16})]})})]})};function Chip_templateObject(){let e=(0,D._)(["\n        border: 1px solid ",";\n        text-align: left;\n      "]);return Chip_templateObject=function(){return e},e}let Chip=e=>{let{item:t,onClick:n,messageIndex:o,message:r,textDisabled:i}=e,{chat:a,chatId:l}=td(),{trackEvent:c}=(0,H.Ke)();return(0,U.tZ)(z.zx,{padding:"6px 16px",borderRadius:"40px",backgroundColor:"$color_surface_ivory",css:e=>{var t;return(0,J.iv)(Chip_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},onClick:()=>{var e;null==n||n(),c("click_unlike_banner_recommend_chip",{chatId:l,msg_id:r._id,chat_index:o,model_name:null==a?void 0:null===(e=a.model)||void 0===e?void 0:e.toUpperCase(),recommend_chip_name:t.value,unlike_banner_abtest_group:"unlike_banner_B"})},children:(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:i?"$color_text_secondary":"$color_text_primary",children:t.value})},t.key)};function GuideChipLayout_templateObject(){let e=(0,D._)(["\n          border: 1px solid ",";\n          text-align: left;\n        "]);return GuideChipLayout_templateObject=function(){return e},e}let GuideChipLayout=e=>{let{title:t,renderContent:n}=e;return(0,U.BX)(z.gC,{gap:"16px",alignItems:"flex-start",children:[(0,U.tZ)(z.zx,{padding:"6px 16px",borderRadius:"40px",backgroundColor:"$color_surface_ivory",flexShrink:0,css:e=>{var t;return(0,J.iv)(GuideChipLayout_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},children:(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:t})}),(0,U.tZ)(z.xu,{paddingBottom:"4px",width:"100%",children:n})]})},ty=X.createContext(null),tC=X.createContext(null),ChatInputProvider=e=>{let{children:t}=e,{user:n}=(0,eu.aF)(),{value:o,removeItem:r}=(0,N._)(eI.et.chatInput),[i,a]=X.useState(o||""),l=(0,eC.Zl)(ey.Bh),c=X.useCallback(()=>{a("")},[]),d=X.useMemo(()=>({setInput:a,clearInput:c}),[]),s=X.useMemo(()=>({input:i}),[i]);return X.useEffect(()=>{o&&""!==o&&(a(String(o)),r())},[]),X.useEffect(()=>{n||""===i||l(i)},[n,i]),(0,U.tZ)(ty.Provider,{value:s,children:(0,U.tZ)(tC.Provider,{value:d,children:t})})},tk=(0,e7.TR)(tC,"[UpdateChatInputContextProvider] cannot find context provider"),tw=(0,e7.TR)(ty,"[ChatInputContextProvider] cannot find context provider"),tZ=(0,X.createContext)(null),ChatEvaluationABTestProvider=e=>{let{children:t}=e,n=(0,el.c1)("fe-message-user-comment"),o=(0,X.useCallback)(()=>n,[n]),r=(0,X.useMemo)(()=>({getVariant:o}),[o]);return(0,U.tZ)(tZ.Provider,{value:r,children:t})};(0,e7.TR)(tZ,"[ChatEvaluationABTestProvider] cannot find context provider");let ChatRoomLinkState=e=>{let{children:t}=e,{flag:n}=(0,el.T6)("fe-web-chat-link"),{input:o}=tw(),{isProMode:r}=tg(),{chatId:i}=td(),a=(0,eC.Zl)(ey.u3),{linkCount:l}=(0,eC.sJ)(ey.h5),{data:c}=(0,ew.$I)(i),d=((null==c?void 0:c.filter(e=>"LinkReferenceItem"===e.kind))||[]).length+l>=2,{updateAttachmentsWithLinks:s}=(0,ew.nB)({linkLimitExceeded:d}),u=(0,X.useCallback)(()=>{if(!n||!r)return;let e=(0,ew.NH)(o).map(e=>(0,ew.R1)(e));a(t=>{let{newAttachments:n,isUpdated:o}=s(t,e);return o?n:t})},[o,a,s]);return(0,X.useEffect)(()=>{u()},[o,u]),t};var tI=n(37199);n(87950),n(73031);var tO=n(38526),tS=n(99186);let useGenerateEventsLogger=e=>{let{enableOptions:t}=tg(),{user:n}=(0,eu.aF)(),{trackEvent:o}=(0,H.Ke)(),{measurePerformances:r}=(0,ep.DD)(),{sendAirbridgeEvent:i}=(0,tO.lM)(),{getModelByModelName:a}=(0,e_.pw)(),l=(0,eC.sJ)(ey.h5),c=(0,eC.sJ)(ey.UB),d=(0,eC.sJ)(ey.Aq),s=(0,eC.sJ)(ey.gn),[u,p]=(0,eC.FV)(ey.GY),_=(0,X.useCallback)(i=>{var u,_,h,m;let{params:g,messageId:x}=i,v=(0,eF.Z)();p(v);let f=N.jU&&sessionStorage.getItem("user-generate-action"),b={chat_id:e,model_name:(null!==(_=null==g?void 0:g.model)&&void 0!==_?_:eA.ChatModel.GPT4).toUpperCase(),re_generate:!!(null==g?void 0:g.reroll),is_login:!!n},y={generate_position:"chat",feature_menu:(null==g?void 0:g.model)===eA.ChatModel.SD3_TURBO?"image":"chat",method:"enter"===f?"enter":"button",is_image_input:l.images.length>0||c.imageCount>0,is_file_input:l.fileCount>0||c.fileCount>0,is_link_input:l.linkCount>0||c.linkCount>0,is_with_ai_search:!!(null==g?void 0:g.proModeParentId),is_fast_ai_search_toggle:d,chathome_fast_ai_search_abtest_group:s,generate_model:(0,eA.isImageGenerateInput)(null!==(h=null==g?void 0:g.content)&&void 0!==h?h:"")&&(null==t?void 0:t.draw)?"SD3_TURBO":void 0,purpose:null===(u=a(null!==(m=null==g?void 0:g.model)&&void 0!==m?m:eA.ChatModel.GPT4))||void 0===u?void 0:u.displayName,msg_id:x,fe_msg_id:v,...b,...null==g?void 0:g.customEventProperties},C=r();(0,tS.K)("info","[ChatSocket] generateStart",{...b,...C&&{...C}}),o("click_generate_btn",y,()=>sessionStorage.setItem("user-generate-action",""))},[e,o,a,null==t?void 0:t.draw]),h=(0,X.useCallback)(t=>{var r,i,p;let{params:_,startedAt:h,openedAt:m,messageId:g}=t,x={chat_id:e,msg_id:g,model_name:(null!==(i=null==_?void 0:_.model)&&void 0!==i?i:eA.ChatModel.GPT4).toUpperCase(),re_generate:!!(null==_?void 0:_.reroll),open_time:m&&h?(null==m?void 0:m.getTime())-(null==h?void 0:h.getTime()):-1,is_login:!!n},v={generate_position:"chat",is_image_input:l.images.length>0||c.imageCount>0,is_file_input:l.fileCount>0||c.fileCount>0,is_link_input:l.linkCount>0||c.linkCount>0,purpose:null===(r=a(null!==(p=null==_?void 0:_.model)&&void 0!==p?p:eA.ChatModel.GPT4))||void 0===r?void 0:r.displayName,is_command_chip:!!(null==_?void 0:_.commandChipType),is_with_ai_search:!!(null==_?void 0:_.proModeParentId),is_fast_ai_search_toggle:d,chathome_fast_ai_search_abtest_group:s,fe_msg_id:u,...x,...null==_?void 0:_.customEventProperties};(0,tS.K)("info","[ChatSocket] generateOpen",x),o("generate_open",v)},[e,o,a,u]),m=(0,X.useCallback)((t,r)=>{var p,_,h,m,g,x,v,f,b,y,C,k,w;let{params:Z,startedAt:I,openedAt:O,messageId:S}=t,B={chat_id:e,msg_id:null!=S?S:"",model_name:(null!==(x=null==Z?void 0:Z.model)&&void 0!==x?x:eA.ChatModel.GPT4).toUpperCase(),re_generate:!!(null==Z?void 0:Z.reroll),generate_time:I?new Date().getTime()-(null==I?void 0:I.getTime()):-1,streaming_time:O?new Date().getTime()-(null==O?void 0:O.getTime()):-1,is_login:!!n},$={feature_menu:(null==Z?void 0:Z.model)===eA.ChatModel.SD3_TURBO?"image":"chat",generate_position:"chat",generate_character:r.content.length,link_number:null!==(v=null===(p=r.searchResult)||void 0===p?void 0:p.length)&&void 0!==v?v:0,chatroom_model_name:null==Z?void 0:Z.model.toUpperCase(),purpose:null===(_=a(null!==(f=null==Z?void 0:Z.model)&&void 0!==f?f:eA.ChatModel.GPT4))||void 0===_?void 0:_.displayName,image_number:null!==(b=null===(m=r.image)||void 0===m?void 0:null===(h=m.imageUrls)||void 0===h?void 0:h.length)&&void 0!==b?b:0,image_urls:null!==(y=null===(g=r.image)||void 0===g?void 0:g.imageUrls.map(e=>e.url))&&void 0!==y?y:[],is_image_input:l.images.length>0||c.imageCount>0,is_file_input:l.fileCount>0||c.fileCount>0,is_link_input:l.linkCount>0||c.linkCount>0,is_recommend_link:!!r.searchResult&&r.searchResult.length>0,is_command_chip:!!(null==Z?void 0:Z.commandChipType),command_chip_type:null!==(C=null==Z?void 0:Z.commandChipType)&&void 0!==C?C:"",is_with_ai_search:!!(null==Z?void 0:Z.proModeParentId),is_fast_ai_search_toggle:d,chathome_fast_ai_search_abtest_group:s,assignment_id:null==Z?void 0:Z.assignmentId,fe_msg_id:u,...B,...null==Z?void 0:Z.customEventProperties};(0,tS.K)("info","[ChatSocket] generateDone",B),o("generate_done",$),i("generate_done",{action:(0,tO.CG)(null!==(k=null==Z?void 0:Z.model)&&void 0!==k?k:eA.ChatModel.GPT4),customAttributes:{chat_id:r.chatId,model_name:(0,tO.Ih)(null!==(w=null==Z?void 0:Z.model)&&void 0!==w?w:eA.ChatModel.GPT4),generate_character:r.content.length||0,created_at:(0,ee.pE)(),is_login:!!n}})},[e,o,a,i]),g=(0,X.useCallback)((t,r)=>{var i,p,_,h,m,g;let{messageId:x,params:v,startedAt:f}=t,b={chat_id:e,msg_id:null!=x?x:"",model_name:(null!==(_=null==v?void 0:v.model)&&void 0!==_?_:eA.ChatModel.GPT4).toUpperCase(),re_generate:!!(null==v?void 0:v.reroll),generate_time:f?new Date().getTime()-(null==f?void 0:f.getTime()):-1,status_code:r.status,service_code:null!==(h=null===(i=r.serviceCode)||void 0===i?void 0:i.toString())&&void 0!==h?h:"000000",error_info:r.message,is_login:!!n},y={feature_menu:(null==v?void 0:v.model)===eA.ChatModel.SD3_TURBO?"image":"chat",generate_position:"chat",is_with_ai_search:!!(null==v?void 0:v.proModeParentId),is_fast_ai_search_toggle:d,chathome_fast_ai_search_abtest_group:s,is_image_input:l.images.length>0||c.imageCount>0,is_file_input:l.fileCount>0||c.fileCount>0,is_link_input:l.linkCount>0||c.linkCount>0,purpose:null===(p=a(null!==(m=null==v?void 0:v.model)&&void 0!==m?m:eA.ChatModel.GPT4))||void 0===p?void 0:p.displayName,is_command_chip:!!(null==v?void 0:v.commandChipType),is_recommend_link:!1,log_level:r.logLevel,...b,...null==v?void 0:v.customEventProperties,assignment_id:null==v?void 0:v.assignmentId,fe_msg_id:u};(0,tS.K)(null!==(g=r.logLevel)&&void 0!==g?g:"error","[ChatSocket] generateFail",b),o("generate_fail",y)},[e,o,a]),x=(0,X.useCallback)(t=>{var n,r,l,c;let{params:d,messageId:s,startedAt:p}=t,_={chat_id:e,msg_id:null!=s?s:"",model_name:(null!==(r=null==d?void 0:d.model)&&void 0!==r?r:eA.ChatModel.GPT4).toUpperCase(),re_generate:!!(null==d?void 0:d.reroll),wait_time:p?new Date().getTime()-(null==p?void 0:p.getTime()):-1,streaming_time_after_open:t.openedAt?new Date().getTime()-t.openedAt.getTime():void 0},h={feature_menu:(null==d?void 0:d.model)===eA.ChatModel.SD3_TURBO?"image":"chat",purpose:null===(n=a(null!==(l=null==d?void 0:d.model)&&void 0!==l?l:eA.ChatModel.GPT4))||void 0===n?void 0:n.displayName,..._,...null==d?void 0:d.customEventProperties,fe_msg_id:u};(0,tS.K)("info","[ChatSocket] stopGenerate",_),o("stop_generate",h),i("generate_stop",{customAttributes:{chat_id:e,created_at:(0,ee.pE)(),model_name:(0,tO.Ih)(null!==(c=null==d?void 0:d.model)&&void 0!==c?c:eA.ChatModel.GPT4)}})},[e,o,a,i]),v=(0,X.useCallback)(e=>{var t;let{params:n}=e;i("click_re_generate",{customAttributes:{chat_id:null==n?void 0:n.chatId,created_at:(0,ee.pE)(),model_name:(0,tO.Ih)(null!==(t=null==n?void 0:n.model)&&void 0!==t?t:eA.ChatModel.GPT4)}})},[i]);return{logGenerateStart:_,logGenerateOpen:h,logGenerateDone:m,logGenerateFail:g,logGenerateStop:x,logRegenerate:v}},useChatSocketEventEmitters=e=>{let{chatId:t,generateContext:n}=e,{logGenerateStart:o,logGenerateStop:r,logRegenerate:i}=useGenerateEventsLogger(t),a=(0,X.useCallback)((e,t)=>{e.emit("enterChat",t)},[]),l=(0,X.useCallback)((e,t)=>{e.emit("leaveChat",t)},[]),c=(0,X.useCallback)((e,t)=>{e.emit("startChat",t),t.reroll&&i(n),o(n)},[o]),d=(0,X.useCallback)((e,t)=>{e.emit("abortChat",t),r(n)},[]),s=(0,X.useMemo)(()=>({enterChat:a,leaveChat:l,startChat:c,abortChat:d}),[a,l,c,d]);return s},getChat=e=>q.Np.William.get("/chat-room/".concat(e)),getNonLoginChat=async e=>q.Np.William.get("/guest-chat/".concat(e),{headers:{"x-wrtn-id":(0,e1.ej)(e1.Mv.__W_ID)}}),chatSwrKey=e=>"/chat/".concat(e),nonLoginChatSwrKey=e=>"/guest-chat/".concat(e),useChatRoom=e=>{let{user:t,isLoading:n}=(0,eu.aF)(),api=async()=>e?t?await getChat(e):getNonLoginChat(e):null,o=!e||n?null:t?chatSwrKey(e):nonLoginChatSwrKey(e),{data:r,error:i,mutate:a}=(0,et.dH)(o,api,{revalidateOnFocus:!0,revalidateOnReconnect:!0,dedupingInterval:1e3});return(0,X.useEffect)(()=>{n||r||i||a()},[n,r,i,a]),{data:r,error:i,mutate:a,isLoading:!r&&!i}},putGenerateUpScaledImageDownload=async e=>{let{targetUrl:t,imageId:n,email:o}=e;return q.Np.William.put((0,Y.stringifyQueryParams)("/image/".concat(n,"/upscale"),{platform:(0,N.Xf)(),user:o}),{targetUrl:t})},evaluateMessage=e=>q.Np.BE.put("/message/".concat(e.messageId),e.data),evaluateImage=e=>q.Np.BE.put("/image/".concat(e.imageId,"/url"),e.data),getAssignmentOutline=e=>q.Np.William.get("/write-assignment/".concat(e)),getAssignmentNotificationStatus=e=>q.Np.William.get("/write-assignment/chat/".concat(e)),postAssignmentNotification=e=>q.Np.William.post("/write-assignment/chat/".concat(e,"/alarm")),useGetAssignmentOutline=e=>(0,et.dH)(e&&"/write-assignment/".concat(e),e?()=>getAssignmentOutline(e):null,{revalidateOnFocus:!1}),useGetAssignmentNotificationStatus=e=>(0,et.dH)("/write-assignment/chat/".concat(e,"/alarm"),()=>getAssignmentNotificationStatus(e),{revalidateOnFocus:!1}),usePostAssignmentNotification=e=>(0,et._5)("/write-assignment/chat/".concat(e,"/alarm"),()=>postAssignmentNotification(e)),useChatSocketEventListeners=e=>{let{socket:t,chatId:n,onError:o,generateContext:r,setGenerateContext:i}=e,a=(0,X.useRef)(""),l=(0,X.useRef)([]),c=(0,X.useRef)([]),{replace:d}=(0,W.tv)(),{logGenerateOpen:s,logGenerateFail:u,logGenerateDone:p}=useGenerateEventsLogger(n),{mutate:_}=useChatRoom(n),{refetch:h}=(0,es.c)(),m=(0,eB.Zl)(ey.CU),g=(0,eB.Zl)(ey.BF),x=(0,X.useCallback)(()=>{a.current="",l.current=[],c.current=[],i({startedAt:null,openedAt:null,params:null,messageId:null}),m("ready")},[m,i]),v=(0,X.useCallback)(()=>{g(!0)},[g]),f=(0,X.useCallback)(e=>{l.current=[...l.current,e],tu.Gz.next(l.current)},[]),b=(0,X.useCallback)(e=>{c.current=e.ads,tu.ai.next({ads:c.current})},[]),y=(0,X.useCallback)(e=>{"chunk"in e&&"string"==typeof e.chunk&&(a.current||(i({openedAt:new Date}),s(r)),a.current=e.chunk,tu.k0.next({content:a.current,idle:!1}))},[i,s]),C=(0,X.useCallback)(e=>{"assistant"===e.message.role&&e.message._id&&i({messageId:e.message._id})},[i]),k=(0,X.useCallback)(e=>{var n;t&&(404===e.status?d("/"):eO.Am.alert(e.message),_(),u(r,e),r.params&&(null==o||o(null===(n=r.params)||void 0===n?void 0:n.content)),x())},[t,_,u,o,x]),w=(0,X.useCallback)(async e=>{var t;(null===(t=e.message)||void 0===t?void 0:t.status)!=="cancel"&&p(r,e.message),x(),await Promise.all([_(),h()])},[x,n,p]),Z=(0,X.useCallback)(()=>{t&&(t.disconnect(),t.connect(),n&&t.emit("enterChat",{chatId:n,clientHeaders:{"x-wrtn-id":(0,e1.ej)(e1.Mv.__W_ID),"wrtn-locale":"ja-JP"}}))},[t,n]);return(0,X.useMemo)(()=>({connectChat:v,generateStep:f,ad:b,data:y,message:C,generationError:k,end:w,disconnectServer:Z}),[v,f,b,y,C,k,w,Z])},tB="NEW_USER_MESSAGE_ID",t$="NEW_ASSISTANT_MESSAGE_ID",createAssistantMessageTemplate=e=>{let{reroll:t=!1,content:n="",isTemp:o=!1,chipList:r=[],uuid:i="",id:a,chatId:l,isGenerateImage:c}=e;return{__v:0,_id:a||t$,content:n,createdAt:"",disliked:!1,liked:!1,role:"assistant",updatedAt:"",type:"Message",toolId:"",loading:!t,model:"",isTemp:o,dynamicChips:r,uuid:i,chatId:l,image:c?{imageUrls:[],_id:"SKELETON"}:void 0}},createUserMessageTemplate=e=>{let{content:t="",isTemp:n=!1,images:o,id:r}=e;return{__v:0,content:t,createdAt:"",disliked:!1,liked:!1,role:"user",updatedAt:"",messagedAt:"",_id:tB+r,type:"Message",toolId:"",loading:!0,model:"",isTemp:n,images:o,dynamicChips:[],searchResult:[]}},useMessageMutation=e=>{let{mutate:t}=useChatRoom(e);return{refetch:t,addMessage:e=>t(t=>{if(t)return{...t,messages:[...t.messages,e]}},{revalidate:!1,populateCache:!0}),updateMessage:e=>{t(t=>{if(t)return{...t,messages:t.messages.map(t=>Array.isArray(t)?t.map(t=>t._id===e._id?{...t,...e}:t):t._id===e._id?{...t,...e}:t)}},{revalidate:!1,populateCache:!0})},removeMessages:e=>t(t=>{if(!t)throw Error;return{...t,messages:t.messages.filter(t=>{if(Array.isArray(t)){let n=t.filter(t=>!e.includes(t._id));return 0!==n.length&&n}return!e.includes(t._id)})}},{revalidate:!1,populateCache:!0}),prependMessage:e=>t(t=>{if(!t)throw Error;let n=t.messages.pop();return n?{...t,messages:[...t.messages,Array.isArray(n)?[e,...n]:[e,n]]}:t},{revalidate:!1,populateCache:!0})}},useLoadingMessage=e=>{let{addMessage:t,updateMessage:n,prependMessage:o,removeMessages:r}=useMessageMutation(e);return{addLoadingMessage:n=>{let{input:r,reroll:i,images:a,isGenerateImage:l}=n,c=createAssistantMessageTemplate({reroll:i,chatId:e||void 0,isGenerateImage:l});i?o(c):(t(createUserMessageTemplate({content:r,images:a})),t([c]))},updateAssistantLoadingMessage:e=>{let{isGenerateImage:t}=e;n({_id:t$,image:t?{imageUrls:[],_id:"SKELETON"}:void 0})},clearLoadingMessage:()=>{r([tB,t$])}}},useImageGenerate=()=>({isImageGenerateInput:e=>eq.sO&&e.includes("그려줘"),isImageGenerateModel:e=>"sdxl"===e||"sdxl_jp"===e||"dalle3"===e}),useChatSocket=e=>{let{chatId:t,socket:n,onError:o}=e,r=(0,X.useRef)({startedAt:null,openedAt:null,params:null,messageId:null}),i=(0,X.useCallback)(e=>{r.current=Object.assign(r.current,e)},[]),a={socket:n,chatId:t,onError:o,generateContext:r.current,setGenerateContext:i},l=(0,X.useRef)(null),c=(0,X.useRef)(!1),d=useChatSocketEventListeners(a),s=useChatSocketEventEmitters(a),u=(0,eB.Zl)(ey.CU),[p]=(0,eB.FV)(ey.BF),{addLoadingMessage:_}=useLoadingMessage(t),{isImageGenerateInput:h,isImageGenerateModel:m}=useImageGenerate(),{enableOptions:g}=tg();(0,X.useEffect)(()=>{n&&p&&l.current&&(s.startChat(n,l.current),l.current=null)},[n,p,s]),(0,X.useEffect)(()=>{if(!n)return;c.current&&n.removeAllListeners();let e=Object.entries(d);for(let[t,o]of e)n.on(t,o);c.current=!0},[n,t,d]);let x=(0,X.useCallback)(async e=>{var t;if(!n)return;u("streaming");let o=new Date;if(r.current.startedAt=o,r.current.params=e,_({input:e.content,reroll:null!==(t=e.reroll)&&void 0!==t&&t,images:(null==g?void 0:g.image)?e.images:[],isGenerateImage:m(e.model)||h(e.content)&&(null==g?void 0:g.draw)&&"sd3_turbo"!==e.model}),!p){l.current=e;return}e.adContext||(e.adContext={adCreativeId:null,packageAdCreativeId:null,inventoryCodes:["CHAT_BRAND","CHAT_REFERENCE","CHAT_WRTN_PICK"]}),s.startChat(n,e)},[n,s,p,_,u,g,h,m]),v=(0,X.useCallback)(()=>{n&&(u("ready"),s.abortChat(n,{chatId:t}))},[n,t,s,u]);return{generate:x,stop:v}},useModelABTest=()=>{let{user:e}=(0,eu.aF)(),{variant:t}=(0,el.i6)("fe-web-fastSearch-fastInternal"),{variant:n}=(0,el.i6)("fe-web-model-abc-test"),o="dev"===(0,e2.dU)("NEXT_PUBLIC_APP_ENV");return{getVariantName:r=>{var i,a,l;if((null==r?void 0:r.model)===eA.ChatModel.WRTN_FAST_SEARCH)return{fast_ai_search:"B",fast_internal:t.name};let c=o||!!(null==e?void 0:e.createdAt)&&(0,ee.Ax)(new Date(null!==(l=null==e?void 0:e.createdAt)&&void 0!==l?l:""),new Date("2025-03-14T00:00:00.000Z")),d=(null==r?void 0:r.model)===eA.ChatModel.PRO_MODE,s=!!(null==r?void 0:null===(i=r.referenceIds)||void 0===i?void 0:i.length),u=!!(null==r?void 0:null===(a=r.images)||void 0===a?void 0:a.length);if(n.enabled&&d&&c&&!s&&!u)return{model_abc_test:n.name}}}},UnitModal=e=>{let{closeModal:t}=e,n=(0,G.T_)("chat.feature_chat_room.unit_modal"),{user:o}=(0,eu.aF)(),{handleOpenLoginDialog:r}=(0,eI.tF)(),{unit:i,isUnitDisabled:a}=tg(),{mode:l,mediaQueries:c}=(0,er.TC)(),d=(0,N.ac)(c.mobile);return i?(0,U.BX)(z.gC,{width:"600px",maxWidth:"95vw",boxShadow:"dark"===l?"none":"0px 2px 4px 0px rgba(59, 63, 78, 0.03), 2px 4px 10px 0px rgba(79, 68, 195, 0.10);",borderRadius:"12px",border:"dark"===l?"1px solid":"none",borderColor:"$color_outline_secondary",backgroundColor:"$color_surface_elevated",maxHeight:"90vh",overflowY:"auto",zIndex:15,onClick:e=>e.stopPropagation(),children:[(0,U.BX)(z.Ug,{px:"24px",py:"20px",borderBottom:"1px solid",borderColor:"$color_divider_secondary",children:[(0,U.tZ)(z.Jd,{typo:"$100-20-semi",color:"$color_text_primary",children:n("title")}),(0,U.tZ)(z.LZ,{}),(0,U.tZ)(ei.JO,{as:eo.S5X,onClick:t,size:24,color:"$palette_gray_gray_600",style:{cursor:"pointer"}})]}),(0,U.BX)(z.gC,{padding:"24px",gap:"16px",backgroundColor:"$color_bg_screen",children:[(0,U.BX)(z.kC,{flexDirection:["column","column","row","row"],gap:"20px",children:[(0,U.BX)(z.Ug,{gap:["16px","16px","20px","20px"],alignItems:["center","center","flex-start","flex-start"],style:{flex:1},children:[(0,U.tZ)("img",{style:{width:"100px",height:"100px"},src:i.thumbnail}),(0,U.BX)(z.gC,{gap:"8px",children:[(0,U.tZ)(z.Jd,{typo:"$100-20-semi",color:"$color_text_primary",children:i.displayName}),(0,U.tZ)(z.Jd,{typo:"$100-15-med",color:"$color_text_secondary",children:i.provider})]})]}),(0,U.tZ)(ef(),{href:"/chat/u/".concat(i._id,"?type=u"),onClick:e=>{!a&&o||(e.preventDefault(),o||r())},"aria-disabled":a,style:{height:"fit-content"},shallow:!0,children:(0,U.tZ)(z.Wv,{size:"$medium",hierarchy:"$primary",startContainer:(0,U.tZ)(ei.JO,{as:eo.FNd,color:"$color_icon_ivory",size:16}),disabled:a,full:d,children:n("new_chat")})})]}),(0,U.tZ)(z.xu,{width:"100%",height:"1px",backgroundColor:"$color_divider_secondary"}),(0,U.tZ)(z.Jd,{typo:"$160-14-semi",color:"$color_text_secondary",children:i.cardDescription})]})]}):null},tA=X.createContext(null),LoadingProvider=e=>{let{children:t}=e,[n,o]=X.useState(!1),[r,i]=X.useState(!1);return(0,U.BX)(U.HY,{children:[(0,U.BX)(tA.Provider,{value:{setLoadingOverlay:o,setOpenUnitModal:i},children:[t,(0,U.tZ)(V.CO,{opened:r,onClose:()=>i(!1),renderContent:()=>(0,U.tZ)(UnitModal,{closeModal:()=>i(!1)})})]}),n&&(0,U.tZ)(V.fz,{isVisible:n})]})},tM=(0,e7.TR)(tA,"[UpdateLoadingContext] cannot find context provider"),useGenerateChat=(e,t)=>{let[n]=(0,eC.FV)(ey.CU),o=(0,eC.Zl)(ey.y),[r,i]=(0,eC.FV)(ey.u3),a=(0,eC.Zl)(ey.Bb),l=(0,G.bU)(),c=(0,en.useRouter)(),d=(0,G.T_)(),{user:s}=(0,eu.aF)(),{tokenize:u}={tokenize:e=>e.length},{trackEvent:p}=(0,H.Ke)(),{unit:_,unitId:h,unitType:m,enableOptions:g}=tg(),{chatId:x,isChatInsideRoom:v}=td(),{setLoadingOverlay:f}=tM(),b=X.useRef(!1),{generate:y,stop:C}=useChatSocket({chatId:null!=x?x:"",socket:e,onError:t}),{handleOpenLoginDialog:k,handleOpenAnonymousDialog:w}=(0,ep.Zr)(),{createChatMutation:Z}=(0,es.h)(),{getVariantName:I}=useModelABTest(),startGenerate=async e=>{var C;if("ready"!==n)return;b.current=!0;let O=x||"",S=e.model;if("ko-KR"===l&&"gpt4t"===S&&(S=eA.ChatModel.GPT4),(0,eA.getMaxTokenConstraints)(e.message,e.model)<=u(e.message)){eO.Am.alert(d("chat.use_generate_chat.max_token_error")),t&&t(e.message),p("expose_max_token_fail_modal",{message:e.message,chat_id:x,model_name:e.model.toUpperCase()});return}if(!v&&!0!==e.ignoreRoom){if(!h||!m)return;if("character"===m&&!s&&!(null==_?void 0:_.allowAnonymous)){k();return}let t=w();if(!t)return;f(!0);let n=await Z(h);if(n){O=n._id,c.replace("/chat/u/".concat(h,"/c/").concat(O),void 0,{shallow:!0}),b.current=!1,o({shouldRestart:!0,params:e});return}f(!1)}let B=await (0,N.Ch)(),$=I(e),A={...e,model:S,images:(null==g?void 0:g.image)?e.images:[],referenceIds:e.referenceIds,assignmentId:e.assignmentId,content:e.message,chatId:null!=x?x:"",email:null!==(C=null==s?void 0:s.email)&&void 0!==C?C:"",platform:(0,N.Xf)()||"web",williamRequestId:(0,eF.Z)(),clientHeaders:{"x-wrtn-id":(0,e1.ej)(e1.Mv.__W_ID),"wrtn-locale":l,"x-test-id":(0,e1.ej)(e1.Mv.X_TEST_ID)||"","wrtn-test-ab-model":$||"",...B}};a(r),i([]),y(A)};return{startGenerate,stopGenerate:C,generateStatus:n,generating:"ready"!==n,canStopGenerate:"streaming"===n}},tR=X.createContext(null),GenerateProvider=e=>{let{children:t}=e,{setInput:n}=tk(),{socket:o}=(0,tI.i)(),{generating:r,startGenerate:i,stopGenerate:a,canStopGenerate:l,generateStatus:c}=useGenerateChat(o,n),d=X.useMemo(()=>({generating:r,startGenerate:i,stopGenerate:a,canStopGenerate:l,generateStatus:c}),[r,i,a,l]);return(0,U.tZ)(tR.Provider,{value:d,children:t})},tj=(0,e7.TR)(tR,"[GenerateProvider] cannot find context provider"),ChatRoomProvider=e=>{let{chat:t,children:n,unit:o,character:r,chatId:i}=e;return(0,U.tZ)(UnitProvider,{initialValue:{unit:o,character:r},children:(0,U.tZ)(ChatProvider,{initialValue:{chat:t,chatId:i},children:(0,U.tZ)(ChatInputProvider,{children:(0,U.tZ)(ChatRoomLinkState,{children:(0,U.tZ)(LoadingProvider,{children:(0,U.tZ)(GenerateProvider,{children:n})})})})})})},tE=X.createContext(null),tT=X.createContext(null),ChatMessageStatusProvider=e=>{let{children:t}=e,[n,o]=X.useState(void 0),r=X.useCallback(e=>{o(e)},[]),i=X.useMemo(()=>({status:n}),[n]),a=X.useMemo(()=>({changeStatus:r}),[r]);return(0,U.tZ)(tE.Provider,{value:i,children:(0,U.tZ)(tT.Provider,{value:a,children:t})})},tL=(0,e7.TR)(tT,"[UpdateChatInputContextProvider] cannot find context provider"),tF=(0,e7.TR)(tE,"[ChatInputContextProvider] cannot find context provider"),GuideChipContentForShortContext=e=>{let{onClick:t,messageIndex:n,message:o}=e,{startGenerate:r}=tj(),{lastUserMessage:i,chat:a,chatId:l}=td(),{trackEvent:c}=(0,H.Ke)(),d=(0,G.T_)("chat.chat_room.model_guide_menu.short"),{getModelByModelName:s}=(0,e_.pw)(),u=d("title"),p=d("action");return(0,U.tZ)(GuideChipLayout,{title:u,renderContent:(0,U.BX)(z.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:d("description")}),(0,U.tZ)(z.zx,{onClick:()=>{var e,_,h,m;if(!(null==a?void 0:a.model))return;let g="\n ".concat(d("supportMessage")),x="".concat((null!==(h=null==i?void 0:i.content)&&void 0!==h?h:"").replace(g,"")).concat(g);null==t||t(),r({message:x,model:null!==(m=null==a?void 0:a.model)&&void 0!==m?m:"",mode:eA.ChatMode.CHAT,reroll:!1,commandChipType:"",images:[]}),c("click_unlike_banner_final_action_btn",{chatId:l,msg_id:o._id,chat_index:n,model_name:null==a?void 0:null===(e=a.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"improve_current_prompt",recommend_chip_name:u,btn_name:p,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==a?void 0:a.model)&&eq.sO?null===(_=s(a.model))||void 0===_?void 0:_.displayName:void 0})},children:(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:p}),(0,U.tZ)(z.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,U.tZ)(ei.JO,{as:eo.$Qe,color:"$color_action_blue_primary",size:16})})]})})]})})},GuideChipForBrokenContext=e=>{let{onClick:t,messageIndex:n,message:o}=e,{startGenerate:r}=tj(),{chat:i,chatId:a}=td(),{trackEvent:l}=(0,H.Ke)(),c=(0,G.T_)("chat.chat_room.model_guide_menu.broken_context"),d=c("title"),s=c("action"),u=c("description"),{getModelByModelName:p}=(0,e_.pw)();return(0,U.tZ)(GuideChipLayout,{title:d,renderContent:(0,U.BX)(z.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:u}),(0,U.tZ)(z.zx,{onClick:()=>{var e,u,_;if(!(null==i?void 0:i.model))return;let h=c("supportMessage");null==t||t(),r({message:h,model:null!==(_=null==i?void 0:i.model)&&void 0!==_?_:"",mode:eA.ChatMode.CHAT,reroll:!1,commandChipType:"",images:[]}),l("click_unlike_banner_final_action_btn",{chatId:a,msg_id:o._id,chat_index:n,model_name:null==i?void 0:null===(e=i.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"improve_current_prompt",recommend_chip_name:d,btn_name:s,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:eq.sO?null===(u=p(i.model))||void 0===u?void 0:u.displayName:void 0})},children:(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:s}),(0,U.tZ)(z.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,U.tZ)(ei.JO,{as:eo.$Qe,color:"$color_action_blue_primary",size:16})})]})})]})})};function GuideChipForFeedback_templateObject(){let e=(0,D._)(["\n                color: ",";\n                resize: none;\n                outline: none;\n\n                border-radius: 5px;\n                border: 1px solid ",";\n\n                &::placeholder {\n                  color: ",";\n                }\n              "]);return GuideChipForFeedback_templateObject=function(){return e},e}let GuideChipForFeedback=e=>{let{onClick:t,messageIndex:n,message:o,type:r}=e,{trackEvent:i}=(0,H.Ke)(),{chat:a,chatId:l}=td(),[c,d]=(0,X.useState)(""),s=(0,N.ac)("(min-width: 1218px)"),u=(0,eC.Zl)(ey.yI),p=(0,G.T_)("chat.chat_room.model_guide_menu.".concat(r)),_=p("title"),h=p("description"),m=p("placeholder"),g=p("action"),x=p("toast_message"),{getModelByModelName:v}=(0,e_.pw)(),onKeyDown=e=>{s&&"Enter"===e.key&&e.preventDefault()},changeFeedbackMessage=e=>{d(e.target.value.trim())};return(0,U.tZ)(GuideChipLayout,{title:_,renderContent:(0,U.BX)(z.gC,{gap:"16px",width:"100%",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:h}),(0,U.BX)(z.xu,{width:"100%",gap:"8px",display:"flex",flexDirection:s?"row":"column",children:[(0,U.tZ)(z.gx,{width:"100%",height:["60px","60px","60px","40px"],padding:"6px 16px",typo:"$160-16-med",placeholder:m,backgroundColor:"$color_surface_ivory",onKeyDown:e=>onKeyDown(e),onChange:e=>changeFeedbackMessage(e),css:e=>{var t,n,o;return(0,J.iv)(GuideChipForFeedback_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_text_primary,null===(n=e.colors)||void 0===n?void 0:n.$color_outline_secondary,null===(o=e.colors)||void 0===o?void 0:o.$color_text_textfield_disabled)}}),(0,U.tZ)(z.xu,{flexShrink:0,children:(0,U.tZ)(z.Wv,{size:"$medium",hierarchy:"$primary",onClick:()=>{var e,r;eO.Am.alert(x),a&&i("click_unlike_banner_final_action_btn",{chatId:l,msg_id:o._id,chat_index:n,model_name:null==a?void 0:null===(e=a.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"leave_feedback",recommend_chip_name:_,btn_name:g,feedback_message:c,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==a?void 0:a.model)&&eq.sO?null===(r=v(a.model))||void 0===r?void 0:r.displayName:void 0},()=>{null==t||t(),u(-1)})},disabled:!c,full:!0,children:(0,U.tZ)(z.Jd,{typo:"$100-16-semi",color:"$color_text_ivory",children:g})})})]})]})})},GuideChipForEtc=e=>(0,U.tZ)(GuideChipForFeedback,{type:"etc",...e}),GuideChipForHallucination=e=>{let{onClick:t,messageIndex:n,message:o}=e,{chat:r,chatId:i,lastUserMessage:a}=td(),l=(null==r?void 0:r.model)===eA.ChatModel.WRTN_SEARCH,{id:c}=(0,e_.Jv)(),d=(0,eC.Zl)(ey.gE),{data:s}=(0,eM.u7)(),u=null==s?void 0:s.find(e=>e._id===c),{onMakeNewChat:p}=(0,e6.M)(u),_=(0,G.T_)("chat.chat_room.model_guide_menu.hallucination"),h=(0,eC.Zl)(ey.yI),{getModelByModelName:m}=(0,e_.pw)(),{trackEvent:g}=(0,H.Ke)(),x=_("title"),v=_("action.link"),f=_("action.model"),b=_("description.link"),y=_("description.model"),openNewChat=async()=>{var e,l;r&&(d(!0),null==t||t(),g("click_unlike_banner_final_action_btn",{chatId:i,msg_id:o._id,chat_index:n,model_name:null==r?void 0:null===(e=r.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"recommend_model",recommend_chip_name:x,btn_name:f,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B"}),g("create_chat",{type:"unlike_banner_recommendation_click",unit_id:c}),await p({unitId:c,input:null!==(l=null==a?void 0:a.content)&&void 0!==l?l:"",isChocoChip:!1,from:"chatRoom"},()=>{d(!1)}))};return(0,U.tZ)(GuideChipLayout,{title:x,renderContent:(0,U.BX)(z.gC,{gap:"12px",children:[!l&&(0,U.BX)(z.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:y}),(0,U.tZ)(z.zx,{onClick:openNewChat,children:(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:f}),(0,U.tZ)(z.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,U.tZ)(ei.JO,{as:eo.$Qe,color:"$color_action_blue_primary",size:16})})]})})]}),(0,U.BX)(z.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:b}),(0,U.tZ)(z.zx,{onClick:()=>{var e,a;if(!r)return;h(-1),null==t||t();let l=eq.sO?"https://help.wrtn.ai/6b9d0922-b39e-4c3f-800a-90a1a7b85b32":"https://wrtn.notion.site/42692e8fe9ff4cb69ad31f00dc37bf22";g("click_unlike_banner_final_action_btn",{chatId:i,msg_id:o._id,chat_index:n,model_name:null==r?void 0:null===(e=r.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"external_link",recommend_chip_name:x,btn_name:v,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==r?void 0:r.model)&&eq.sO?null===(a=m(r.model))||void 0===a?void 0:a.displayName:void 0}),window.open(l,"_blank")},children:(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:v}),(0,U.tZ)(z.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,U.tZ)(ei.JO,{as:eo.KB8,color:"$color_action_blue_primary",size:16})})]})})]})]})})},GuideChipForKnowHow=e=>{let{onClick:t,messageIndex:n,message:o}=e,r=(0,G.T_)("chat.chat_room.model_guide_menu.know_how"),i=r("title"),a=r("action"),l=r("description"),{chat:c,chatId:d}=td(),{trackEvent:s}=(0,H.Ke)(),u=(0,eC.Zl)(ey.yI),{getModelByModelName:p}=(0,e_.pw)();return(0,U.tZ)(GuideChipLayout,{title:i,renderContent:(0,U.BX)(z.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:l}),(0,U.tZ)(z.zx,{onClick:()=>{var e,r;if(!c)return;u(-1),null==t||t();let l=eq.sO?"https://help.wrtn.ai/":"https://cyber-shake-de5.notion.site/1128ac4ce90480c4a0c9d2917bcb8ed1?pvs=4";s("click_unlike_banner_final_action_btn",{chatId:d,msg_id:o._id,chat_index:n,model_name:null==c?void 0:null===(e=c.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"external_link",recommend_chip_name:i,btn_name:a,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==c?void 0:c.model)&&eq.sO?null===(r=p(c.model))||void 0===r?void 0:r.displayName:void 0}),window.open(l,"_blank")},children:(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:a}),(0,U.tZ)(z.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,U.tZ)(ei.JO,{as:eo.KB8,color:"$color_action_blue_primary",size:16})})]})})]})})},tP="65d591e80c06023ae70af73a",tU="65d592f0b18cdb6b8aa92373",GuideChipForLineWriting=e=>{let{onClick:t,messageIndex:n,message:o}=e,{chat:r,chatId:i,lastUserMessage:a}=td(),l=(null==r?void 0:r.model)===eA.ChatModel.WRTN_SEARCH,{data:c}=(0,eM.u7)(),d=null==c?void 0:c.find(e=>e._id===(l?tP:tU)),{onMakeNewChat:s}=(0,e6.M)(d),{startGenerate:u}=tj(),{trackEvent:p}=(0,H.Ke)(),_=(0,eC.Zl)(ey.gE),h=(0,G.T_)("chat.chat_room.model_guide_menu.line_writing"),{getModelByModelName:m}=(0,e_.pw)(),g=h("title"),x=h(l?"action.gpt4_new_chat":"action.line_writing"),v=h(l?"description.gpt4":"description.line_writing"),f=h("supportMessage"),b=(0,X.useMemo)(()=>{var e;let t="\n ".concat(f);return"".concat((null!==(e=null==a?void 0:a.content)&&void 0!==e?e:"").replace(t,"")).concat(t)},[l,null==a?void 0:a.content]),openNewChat=async()=>{var e,a;if(!(null==r?void 0:r.model))return;let c=l?tP:tU;null==t||t(),_(!0),p("create_chat",{type:"unlike_banner_recommendation_click",unit_id:c}),await s({unitId:c,input:b,isChocoChip:!1,from:"chatRoom"},()=>{_(!1)}),p("click_unlike_banner_final_action_btn",{chatId:i,msg_id:o._id,chat_index:n,model_name:null==r?void 0:null===(e=r.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"recommend_model",recommend_chip_name:g,btn_name:x,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==r?void 0:r.model)&&eq.sO?null===(a=m(r.model))||void 0===a?void 0:a.displayName:void 0})};return(0,U.tZ)(GuideChipLayout,{title:g,renderContent:(0,U.BX)(z.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:v}),(0,U.tZ)(z.zx,{onClick:l?openNewChat:()=>{var e,a,l;(null==r?void 0:r.model)&&(null==t||t(),u({message:b,model:null!==(l=null==r?void 0:r.model)&&void 0!==l?l:"",mode:eA.ChatMode.CHAT,reroll:!1,commandChipType:"",images:[]}),p("click_unlike_banner_final_action_btn",{chatId:i,msg_id:o._id,chat_index:n,model_name:null==r?void 0:null===(e=r.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"improve_current_prompt",recommend_chip_name:g,btn_name:x,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==r?void 0:r.model)&&eq.sO?null===(a=m(r.model))||void 0===a?void 0:a.displayName:void 0}))},children:(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:x}),(0,U.tZ)(z.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,U.tZ)(ei.JO,{as:eo.$Qe,color:"$color_action_blue_primary",size:16})})]})})]})})},tD="66309fe4fa99736573f691be",GuideChipForNoImage=e=>{let{onClick:t,messageIndex:n,message:o}=e,{chat:r,chatId:i,lastUserMessage:a}=td(),l=(0,eC.Zl)(ey.gE),{data:c}=(0,eM.u7)(),d=null==c?void 0:c.find(e=>e._id===tD),{onMakeNewChat:s}=(0,e6.M)(d),u=(0,G.T_)("chat.chat_room.model_guide_menu.no_image"),{getModelByModelName:p}=(0,e_.pw)(),_=u("title"),h=u("action"),m=u("description"),{trackEvent:g}=(0,H.Ke)(),x=(0,X.useMemo)(()=>{var e;let t=" ".concat("그려줘");return"".concat((null!==(e=null==a?void 0:a.content)&&void 0!==e?e:"").replace(t,"")).concat(t)},[null==a?void 0:a.content]),openNewChat=async()=>{var e,a;r&&(l(!0),null==t||t(),g("click_unlike_banner_final_action_btn",{chatId:i,msg_id:o._id,chat_index:n,model_name:null==r?void 0:null===(e=r.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"recommend_model",recommend_chip_name:_,btn_name:h,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==r?void 0:r.model)&&eq.sO?null===(a=p(r.model))||void 0===a?void 0:a.displayName:void 0}),g("create_chat",{type:"unlike_banner_recommendation_click",unit_id:"65d591810c06023ae70af738"}),await s({unitId:tD,input:x,isChocoChip:!1,from:"chatRoom"},()=>{l(!1)}))};return(0,U.tZ)(GuideChipLayout,{title:_,renderContent:(0,U.BX)(z.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:m}),(0,U.tZ)(z.zx,{onClick:openNewChat,children:(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:h}),(0,U.tZ)(z.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,U.tZ)(ei.JO,{as:eo.$Qe,color:"$color_action_blue_primary",size:16})})]})})]})})},GuideChipForReport=e=>(0,U.tZ)(GuideChipForFeedback,{type:"report",...e}),ChipContentRenderer=e=>{let{type:t,onClick:n,message:o,messageIndex:r}=e;switch(t){case"short":return(0,U.tZ)(GuideChipContentForShortContext,{message:o,messageIndex:r,onClick:n});case"brokenContext":return(0,U.tZ)(GuideChipForBrokenContext,{message:o,messageIndex:r,onClick:n});case"lineWriting":return(0,U.tZ)(GuideChipForLineWriting,{message:o,messageIndex:r,onClick:n});case"hallucination":return(0,U.tZ)(GuideChipForHallucination,{message:o,messageIndex:r,onClick:n});case"noImage":return(0,U.tZ)(GuideChipForNoImage,{message:o,messageIndex:r,onClick:n});case"knowHow":return(0,U.tZ)(GuideChipForKnowHow,{message:o,messageIndex:r,onClick:n});case"etc":return(0,U.tZ)(GuideChipForEtc,{message:o,messageIndex:r,onClick:n});case"report":return(0,U.tZ)(GuideChipForReport,{message:o,messageIndex:r,onClick:n});default:return null}},ModalGuideMenuBackButton=e=>{let{onClick:t,message:n,messageIndex:o}=e,{chat:r,chatId:i}=td(),{trackEvent:a}=(0,H.Ke)();return(0,U.tZ)(z.zx,{onClick:()=>{var e;r&&(a("click_unlike_banner_recommend_back_btn",{chatId:i,msg_id:n._id,chat_index:o,model_name:null==r?void 0:null===(e=r.model)||void 0===e?void 0:e.toUpperCase(),unlike_banner_abtest_group:"unlike_banner_B"}),null==t||t())},paddingY:"4px",children:(0,U.tZ)(ei.JO,{as:eo.Frx,size:20,color:"$color_icon_tertiary"})})},ModelGuideMenu=e=>{let{closeGuide:t,toggleDisliked:n,message:o,messageIndex:r}=e,i=(0,eC.Zl)(ey.yI),{chat:a,chatId:l}=td(),c=(null==a?void 0:a.model)!==eA.ChatModel.WRTN_SEARCH,[d,s]=(0,X.useState)(),u=(0,G.T_)("chat.chat_room.model_guide_menu"),{trackEvent:p}=(0,H.Ke)(),_=[{key:"short",value:u("short.title")},{key:"brokenContext",value:u("broken_context.title")},{key:"lineWriting",value:u("line_writing.title")},{key:"hallucination",value:u("hallucination.title")},{key:"noImage",value:u("no_image.title")},{key:"knowHow",value:u("know_how.title")},{key:"etc",value:u("etc.title")},{key:"report",value:u("report.title")}],h=eq.vc||c?["noImage"]:[],m=_.filter(e=>{let{key:t}=e;return!h.includes(t)}),selectChip=e=>{s(e.key)},g=(0,X.useCallback)(()=>{if(!d){t();return}s(void 0)},[a,l,t,o._id,r,d,p]);return(0,U.BX)(z.Ug,{gap:"16px",padding:"16px 20px 16px 16px",children:[(0,U.tZ)(z.xu,{width:"20px",children:(0,U.tZ)(ModalGuideMenuBackButton,{message:o,messageIndex:r,onClick:g})}),(0,U.tZ)(z.xu,{width:"100%",children:d?(0,U.tZ)(ChipContentRenderer,{type:null!=d?d:"",messageIndex:r,message:o,onClick:()=>{n(),i(-1)}}):(0,U.tZ)(z.Ug,{gap:"8px",flexWrap:"wrap",children:m.map(e=>(0,U.tZ)(Chip,{item:e,onClick:()=>selectChip(e),message:o,messageIndex:r,textDisabled:"etc"===e.key||"report"===e.key},e.key))})})]})},useMessages=(e,t,n)=>{let{unitType:o}=tg(),r=X.useMemo(()=>{let o=[];e&&(o=e.messages);let r=0===o.length;r&&t&&(o=[createUserMessageTemplate({content:n})]);let i=o[0];if(i){let e=Array.isArray(i)?i:[i];e[0]._id=tB}return o},[e,t,n]),i=!e&&"unit"===o&&0===r.length;return{messages:r,isUnitEmpty:i}},MessageEvaluationBanner=e=>{var t;let{messageListItemIndex:n,toggleDisliked:o,message:r,messageIndex:i}=e,{chat:a,chatId:l}=td(),[c,d]=(0,X.useState)(!1),{messages:s}=useMessages(a,!1),{trackEvent:u}=(0,H.Ke)(),p=null===(t=s.flat())||void 0===t?void 0:t[n-1],{getModelByModelName:_}=(0,e_.pw)();return(0,X.useEffect)(()=>{if("NEW_ASSISTANT_MESSAGE_ID"!==r._id){var e,t;u("view_unlike_banner",{chat_id:l,msg_id:r._id,chat_index:i,model_name:null==a?void 0:null===(e=a.model)||void 0===e?void 0:e.toUpperCase(),unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==a?void 0:a.model)&&eq.sO?null===(t=_(a.model))||void 0===t?void 0:t.displayName:void 0})}},[]),(0,U.tZ)(z.xu,{width:"100%",backgroundColor:"$color_surface_tertiary",borderRadius:"10px",children:c?(0,U.tZ)(ModelGuideMenu,{closeGuide:()=>{d(!1)},toggleDisliked:o,message:r,messageIndex:i}):(0,U.tZ)(ModelGuideAction,{openGuide:()=>{d(!0)},toggleDisliked:o,message:r,messageIndex:i,currentUserMessage:p})})},MessageEvaluationStateContainer=e=>{let{children:t,defaultEvaluation:n}=e,[o,r]=(0,X.useState)(n),{liked:i,disliked:a}=o;return t({evaluation:o,toggleLiked:()=>{if(a&&!i){r({liked:!0,disliked:!1});return}r(e=>({...e,liked:!e.liked}))},toggleDisliked:()=>{if(!a&&i){r({liked:!1,disliked:!0});return}r(e=>({...e,disliked:!e.disliked}))},toggleSaved:()=>{r(e=>({...e,saved:!e.saved}))}})};function useMessageEvaluation(e){let t=(0,G.T_)(),{mutate:n}=useChatRoom(e),{unitType:o,unitId:r}=tg(),{trackEvent:i}=(0,H.Ke)(),{getModelByModelName:a}=(0,e_.pw)(),l=X.useRef(!1),mutateMessage=(e,t)=>{n(n=>{if(!n)throw Error;return{...n,messages:n.messages.map(n=>Array.isArray(n)?n.map(n=>n._id===e._id?{...n,...t}:n):{...n,...t})}},{revalidate:!1,populateCache:!0})},logEvalEvent=(t,n,l)=>{var c,d;let s=t.toolInfo;"liked"===l&&i("click_like_btn",{chat_id:e,chat_index:n,feature_menu:s?"tool":"chat",model_name:String(t.model).toUpperCase(),onoff:!t.liked,position:"chat",msg_id:t._id,character_id:"character"===o?r:null,purpose:null===(c=a(t.model))||void 0===c?void 0:c.displayName}),"disliked"===l&&i("click_unlike_btn",{chat_id:e,chat_index:n,feature_menu:s?"tool":"chat",model_name:String(t.model).toUpperCase(),onoff:!t.disliked,position:"chat",msg_id:t._id,character_id:"character"===o?r:null,purpose:null===(d=a(t.model))||void 0===d?void 0:d.displayName})},toggleLike=async(e,t,n)=>{try{if(l.current)return;l.current=!0;let t={liked:e.liked,disliked:e.disliked};!e.liked&&e.disliked?Object.assign(t,{liked:!0,disliked:!1,dislikeReason:[]}):Object.assign(t,{liked:!e.liked}),mutateMessage(e,t),await evaluateMessage({messageId:e._id,data:t})}finally{n||logEvalEvent(e,t,"liked"),l.current=!1}},toggleDislike=async(e,t,n)=>{try{if(l.current)return;l.current=!0;let t={liked:e.liked,disliked:e.disliked};!e.disliked&&e.liked?Object.assign(t,{liked:!1,disliked:!0}):Object.assign(t,{disliked:!e.disliked}),t.disliked||Object.assign(t,{dislikeReason:[]}),mutateMessage(e,t),await evaluateMessage({messageId:e._id,data:t})}finally{n||logEvalEvent(e,t,"disliked"),l.current=!1}},toggleSave=async(e,t,n)=>{try{if(l.current)return;l.current=!0;let t={liked:e.liked,disliked:e.disliked,saved:!e.saved};mutateMessage(e,t),await evaluateMessage({messageId:e._id,data:t})}finally{n||logEvalEvent(e,t,"saved"),l.current=!1}},putDislikeReason=async(e,n,o)=>{try{if(l.current)return;l.current=!0;let o={liked:e.liked,disliked:e.disliked,dislikeReason:n};mutateMessage(e,o),await evaluateMessage({messageId:e._id,data:o}),(0,eO.wp)(t("common.alert.message_evaluation"),"MESSAGE_EVALUATION")}finally{logEvalEvent(e,o,"disliked"),l.current=!1}};return{toggleLike,toggleDislike,toggleSave,loggingDetailOpen:(t,n)=>{let o=t.toolInfo;i("click_unlike_more_btn",{chat_id:e,chat_index:n,feature_menu:o?"tool":"chat",model_name:String(t.model).toUpperCase()})},putDislikeReason}}function MessageEvaluationTypeABookmark_templateObject(){let e=(0,D._)(["\n          &:hover {\n            cursor: pointer;\n            background-color: ",";\n          }\n        "]);return MessageEvaluationTypeABookmark_templateObject=function(){return e},e}let MessageEvaluationTypeABookmark=e=>{let{message:t,messageIndex:n,evaluation:o,toggleSaved:r}=e,{user:i}=(0,eu.aF)(),{chatId:a}=td(),{role:l,isLastMessage:c}=th(),{trackEvent:d}=(0,H.Ke)(),s=(0,G.T_)(),u=(0,eC.sJ)(ey.CU),{toggleSave:p}=useMessageEvaluation(a||"");return!i||"assistant"!==l||c&&("generating"===u||"streaming"===u)?null:(o.saved=!!t.saved,(0,U.tZ)(z.Ug,{alignItems:"center",children:(0,U.BX)(z.xu,{minWidth:"86px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"20px",p:"12px 12px",border:"1px solid",backgroundColor:"$color_surface_ivory",borderColor:"$color_outline_tertiary",gap:"4px",css:e=>{var t;return(0,J.iv)(MessageEvaluationTypeABookmark_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},onClick:()=>{r();let e=o.saved?s("chat.feature_bookmark.message.save_cancel"):s("chat.feature_bookmark.message.save_success");(0,eO.wp)(e),p(t,n),d("click_save_btn",{purpose:t.model,is_pro_mode:"PRO_MODE"===t.model,chat_id:a,msg_id:t._id,last_status:o.saved,content_type:"chat"})},children:[(0,U.tZ)(ei.JO,{as:o.saved?ei.O_:ei.t_,color:o.saved?"$color_icon_secondary":"$color_icon_tertiary",size:16}),(0,U.tZ)(z.Jd,{typo:"$100-12-med",margin:"0 0 0 1.5px",color:"$color_text_primary",children:o.saved?s("chat.feature_bookmark.is_saved"):s("chat.feature_bookmark.need_save")})]})}))};function MessageFeedback_templateObject(){let e=(0,D._)(["\n              border: 1px solid ",";\n              border-radius: 24px;\n              background-color: ",";\n              padding: 8px 12px;\n\n              &:hover {\n                background-color: ",";\n              }\n            "]);return MessageFeedback_templateObject=function(){return e},e}let MessageFeedback=e=>{let{message:t,messageIndex:n,messageListItemIndex:o,evaluation:r}=e,{user:i}=(0,eu.aF)(),{chatId:a,chat:l}=td(),{role:c,isLastMessage:d}=th(),[s,u]=(0,eC.FV)(ey.yI),{trackEvent:p}=(0,H.Ke)(),_=(0,G.T_)("chat.chat_room.model_guide_menu"),h=(0,eC.sJ)(ey.CU);return!i||"assistant"!==c||d&&("generating"===h||"streaming"===h)||t.image&&t.image.imageUrls.length>0?null:(0,U.tZ)(z.Ug,{alignItems:"center",children:s!==o&&(0,U.tZ)(z.zx,{onClick:()=>{var e;l&&(p("click_dislike_btn",{chatId:a,msg_id:t._id,chat_index:n,model_name:null==l?void 0:null===(e=l.model)||void 0===e?void 0:e.toUpperCase(),feature_menu:"chat",position:"chat",image_urls:null,unlike_banner_abtest_group:"unlike_banner_B"}),u(o))},children:(0,U.BX)(z.Ug,{alignItems:"center",gap:"4px",css:e=>{var t,n,o;return(0,J.iv)(MessageFeedback_templateObject(),null==e?void 0:null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary,null==e?void 0:null===(n=e.colors)||void 0===n?void 0:n.$color_surface_ivory,null===(o=e.colors)||void 0===o?void 0:o.$color_surface_hover)},children:[(0,U.tZ)(ei.JO,{as:r.disliked?eo.xR:eo.Bnh,color:r.disliked?"$color_icon_secondary":"$color_icon_quaternary",size:16}),(0,U.tZ)(z.Jd,{typo:"$110-12-med",color:"$color_text_secondary",children:_("dis_like")})]})})})};function MessageReroll_templateObject(){let e=(0,D._)(["\n            &:hover {\n              path {\n                fill: ",";\n              }\n            }\n          "]);return MessageReroll_templateObject=function(){return e},e}let MessageReroll=e=>{let{message:t}=e,n=(0,G.T_)("chat.feature_chat_room.message_static_chip_selector"),{user:o}=(0,eu.aF)(),r=(0,eC.sJ)(ey.h5),i=(0,eC.sJ)(ey._b),{startGenerate:a,generating:l}=tj(),{model:c,enableOptions:d}=tg(),{lastUserMessage:s}=td(),onReroll=async()=>{var e,t;s&&await a({message:null!==(t=null==s?void 0:s.content)&&void 0!==t?t:"",model:c,mode:eA.ChatMode.CHAT,reroll:!0,commandChipType:"",images:r.images,referenceIds:r.referenceIds,assignmentId:i||(null==s?void 0:null===(e=s.meta)||void 0===e?void 0:e.assignmentId)})},u=t.searchResult&&t.searchResult.some(e=>(null==e?void 0:e.type)==="file"||(null==e?void 0:e.type)==="link");return o&&!l&&(null==d?void 0:d.reroll)&&void 0===t.cachedChip&&!u?(0,U.tZ)(z.xu,{width:16,height:16,children:(0,U.tZ)(V.u,{position:{bottom:"calc(100% + 8px)",left:"-100%"},content:n("regenerate"),children:(0,U.tZ)(z.zx,{width:16,height:16,onClick:onReroll,css:e=>{var t,n;return(0,J.iv)(MessageReroll_templateObject(),null!==(n=null===(t=e.colors)||void 0===t?void 0:t.$color_icon_brand)&&void 0!==n?n:"#f72f08")},children:(0,U.tZ)(ei.JO,{as:eo.sXW,color:"$color_icon_tertiary",size:16})})})}):null},useMessageType=()=>{let{message:e}=th(),{unitType:t}=tg(),n=e[0].role,o=X.useMemo(()=>"user"===n?"user":"assistant"===n&&"character"===t?"character":"assistant",[n,t]);return o},Collapse=e=>{let{opener:t,collapseBody:n}=e,o=X.useRef(null),[r,i]=X.useState(!1),closeCollapse=()=>i(!1),toggleCollapse=()=>i(e=>!e);return(0,e7.O8)(o,"click",()=>closeCollapse()),(0,U.BX)(z.xu,{position:"relative",ref:o,children:[t({toggleCollapse,collapse:r}),r&&n({toggleCollapse,collapse:r,closeCollapse})]})};function StaticChipSelector_templateObject(){let e=(0,D._)(["\n                &:hover {\n                  path {\n                    fill: ",";\n                  }\n                }\n              "]);return StaticChipSelector_templateObject=function(){return e},e}function StaticChipSelector_templateObject1(){let e=(0,D._)(["\n                  cursor: pointer;\n\n                  &:hover {\n                    background-color: ",";\n\n                    p {\n                      color: ",";\n                    }\n                  }\n                "]);return StaticChipSelector_templateObject1=function(){return e},e}function StaticChipSelector_templateObject2(){let e=(0,D._)(["\n                    white-space: nowrap;\n                  "]);return StaticChipSelector_templateObject2=function(){return e},e}let tX=["summary","longer","prettier"],tJ={summary:eo.aR5,longer:eo.f4Z,prettier:eo.rOX},tz={summary:"summarizing",longer:"elaborating",prettier:"formatting"},tN={summary:"chips.summary",longer:"chips.longer",prettier:"chips.prettier"},StaticChipSelector=e=>{let{message:t,isMessageIncludeImage:n}=e,o=(0,G.T_)("chat.feature_chat_room.message_static_chip_selector"),{user:r}=(0,eu.aF)(),{trackEvent:i}=(0,H.Ke)(),{startGenerate:a,generating:l}=tj(),{model:c,enableOptions:d}=tg(),onGenerateStaticChip=async e=>{i("click_static_chips_option",{type:tz[e],msg_id:t._id}),await a({message:o(tN[e]),model:c,mode:eA.ChatMode.CHAT,reroll:!1,commandChipType:"static_chip",images:[],staticChip:e,referenceMessageId:t._id})};return!r||l||n||!(null==d?void 0:d.staticChip)||t.error?null:(0,U.tZ)(Collapse,{opener:e=>{let{toggleCollapse:t}=e;return(0,U.tZ)(z.xu,{width:18,height:18,children:(0,U.tZ)(V.u,{position:{bottom:"calc(100% + 8px)",left:"-100%"},content:o("title"),children:(0,U.tZ)(z.zx,{width:18,height:18,onClick:t,css:e=>{var t,n;return(0,J.iv)(StaticChipSelector_templateObject(),null!==(n=null===(t=e.colors)||void 0===t?void 0:t.$color_icon_brand)&&void 0!==n?n:"#f72f08")},children:(0,U.tZ)(ei.JO,{as:eo.tNo,color:"$color_icon_tertiary",size:18})})})})},collapseBody:e=>{let{closeCollapse:t}=e;return(0,U.tZ)(z.gC,{minWidth:"92px",zIndex:30,position:"absolute",overflow:"hidden",top:"30px",left:"0",border:"1px solid",borderColor:"$color_outline_secondary",borderRadius:"8px",backgroundColor:"$color_surface_ivory",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.05), 0px 2px 4px -2px rgba(0, 0, 0, 0.10);",children:tX.flatMap((e,n)=>{let r=(0,U.BX)(z.zx,{display:"flex",alignItems:"center",px:14,py:10,gap:"10px",backgroundColor:"$color_surface_ivory",css:e=>{var t,n;return(0,J.iv)(StaticChipSelector_templateObject1(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover,null===(n=e.colors)||void 0===n?void 0:n.$color_text_primary)},onClick:()=>{onGenerateStaticChip(e),t&&t()},children:[(0,U.tZ)(ei.JO,{as:tJ[e],size:16,color:"$color_icon_secondary"}),(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_secondary",css:(0,J.iv)(StaticChipSelector_templateObject2()),children:o(tN[e])})]},e);return 0!==n?[(0,U.tZ)(z.xu,{height:"1px",bg:"$color_divider_primary",width:"100%"},"".concat(n,"-divider")),r]:[r]})})}})},MessageFooter=e=>{var t;let{message:n,messageIndex:o,messageListItemIndex:r,messageRef:i}=e,{role:a,isLastMessage:l}=th(),{chatId:c,chat:d}=td(),{id:s}=(0,e_.q)(),{toggleDislike:u}=useMessageEvaluation(c||""),p=(0,eC.sJ)(ey.gE),_=(0,eC.sJ)(ey.yI),h=useCurrentText(n.content),m=(null==d?void 0:null===(t=d.modelInfo)||void 0===t?void 0:t._id)===s,g=(0,eC.sJ)(ey.CU),x=useMessageType(),v=n.image&&n.image.imageUrls.length>0||!1,f=_===r,[b,y]=(0,X.useState)(""),C=(0,N.ac)("(max-width: 768px)");return((0,X.useEffect)(()=>{let e=(0,tf.kV)(h);y(e)},[h]),"assistant"!==a||"character"===x||("generating"===g||"streaming"===g)&&l||!n.content)?null:(0,U.BX)(U.HY,{children:[(0,U.tZ)(z.xu,{display:["none","none","flex","flex"],height:"32px"}),(0,U.tZ)(V.fz,{isVisible:p}),(0,U.tZ)(MessageEvaluationStateContainer,{defaultEvaluation:{liked:n.liked,disliked:n.disliked,saved:!!n.saved},children:e=>{let{evaluation:t,toggleDisliked:a,toggleSaved:c}=e;return(0,U.BX)(z.gC,{gap:"12px",children:[(0,U.BX)(z.Ug,{width:"100%",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px",children:[(0,U.BX)(z.Ug,{gap:"8px",alignItems:"center",height:"16px",children:[l&&(0,U.BX)(U.HY,{children:[(0,U.tZ)(MessageReroll,{message:n}),(0,U.tZ)(StaticChipSelector,{message:n,isMessageIncludeImage:v})]}),(0,U.tZ)(MessageCopy,{message:n,messageIndex:o})]}),(0,U.BX)(z.Ug,{gap:"8px",justifyContent:"flex-end",children:[!m&&(0,U.tZ)(MessageFeedback,{message:n,messageIndex:o,messageListItemIndex:r,evaluation:t}),!m&&(0,U.tZ)(MessageEvaluationTypeABookmark,{message:n,messageIndex:o,evaluation:t,toggleSaved:c}),m&&(0,U.tZ)(ExportToPDFButton,{messageRef:i,message:n})]})]}),(0,U.BX)(z.gC,{gap:"8px",children:[!C&&!v&&f&&!m&&(0,U.tZ)(MessageEvaluationBanner,{messageListItemIndex:r,message:n,messageIndex:o,toggleDisliked:()=>{t.disliked||(u(n,o,!0),a())}}),!v&&b.length>0&&(0,U.tZ)(tv.P,{willProtectMessage:b,backgroundColor:m?"$color_surface_tertiary":"transparent"})]})]})}})]})};function MessageButton_templateObject(){let e=(0,D._)(["\n        cursor: pointer;\n        &:hover {\n          background-color: ",";\n        }\n      "]);return MessageButton_templateObject=function(){return e},e}let MessageButton=e=>{let{onClick:t,active:n,children:o,...r}=e;return(0,U.tZ)(z.zx,{display:"flex",alignItems:"center",backgroundColor:n?"$color_surface_hover":"transparent",border:"none",borderRadius:"3px",onClick:t,css:e=>{var t;return(0,J.iv)(MessageButton_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},...r,children:o})};function MessageHeaderRerollSelectorCollapseBody_templateObject(){let e=(0,D._)(["\n            cursor: pointer;\n\n            &:hover {\n              background-color: ",";\n            }\n          "]);return MessageHeaderRerollSelectorCollapseBody_templateObject=function(){return e},e}let MessageHeaderRerollSelectorCollapseBody=e=>{let{closeCollapse:t,message:n,messageIndex:o,toggleIndex:r}=e,i=(0,G.T_)("chat.feature_chat_room.reroll_selector"),{trackEvent:a}=(0,H.Ke)();return(0,X.useEffect)(()=>{a("view_respond_compare",{total_numbers:n.length})},[]),(0,U.tZ)(z.gC,{reverse:!0,zIndex:1,position:"absolute",top:"20px",right:"0",width:300,py:"8px",border:"1px solid",borderColor:"$color_outline_secondary",borderRadius:"8px",backgroundColor:"$color_surface_ivory",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.05), 0px 2px 4px -2px rgba(0, 0, 0, 0.10);",children:n.map((e,l)=>(0,U.BX)(z.zx,{overflow:"hidden",px:16,py:12,onClick:()=>{r(l),t&&t(),a("click_respond_compare",{index:l,total_numbers:n.length})},backgroundColor:"transparent",css:e=>{var t;return(0,J.iv)(MessageHeaderRerollSelectorCollapseBody_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},children:[(0,U.BX)(z.Jd,{textAlign:"left",typo:"$100-14-med",color:o===l?"$color_text_brand":"$color_text_secondary",marginBottom:"8px",children:[i("result")," ",n.length-l]}),(0,U.tZ)(z.Jd,{display:"-webkit-box",maxHeight:"40px",textAlign:"left",typo:"$ex_140-14-med",color:"$color_text_primary",overflow:"hidden",style:{lineClamp:2,WebkitLineClamp:2,textOverflow:"ellipsis",WebkitBoxOrient:"vertical"},children:e.content})]},e._id))})},MessageHeaderRerollSelector=e=>{let{role:t,messageIndex:n,message:o,toggleIndex:r}=e,i=(0,G.T_)("chat.feature_chat_room.reroll_selector"),{trackEvent:a}=(0,H.Ke)(),l=o.length;return 1===l||"assistant"!==t?null:(0,U.tZ)(Collapse,{opener:e=>{let{toggleCollapse:t,collapse:r}=e;return(0,U.BX)(MessageButton,{onClick:()=>{a("click_respond_compare_btn",{msgId:o[n]._id,total_numbers:o.length,type:r?"close":"open"}),t()},active:r,paddingLeft:"4px",gap:"4px",children:[(0,U.BX)(z.Jd,{typo:"$100-14-med",color:"$color_text_secondary",children:[i("compare_results")," (",l-n,"/",l,")"]}),(0,U.tZ)(ei.JO,{as:eo.jt3,size:20,color:"$color_icon_secondary",style:{transform:r?"rotate(0deg)":"rotate(180deg)",transition:"all 0.4 ease-in-out"}})]})},collapseBody:e=>{let{closeCollapse:t}=e;return(0,U.tZ)(MessageHeaderRerollSelectorCollapseBody,{closeCollapse:()=>null==t?void 0:t(),message:o,messageIndex:n,toggleIndex:r})}})},MessageRerollSelector=e=>{let{message:t,children:n}=e,o=(0,X.useRef)(null),[r,i]=X.useState(0),{changeStatus:a}=tL(),l=t.length,c=t[r];(0,X.useEffect)(()=>{a(t[r].error)},[t,r]);let toggleIndex=e=>{e<0||e>=l||e===r||i(e)},d=X.useCallback(()=>(0,U.tZ)(MessageHeaderRerollSelector,{role:t[0].role,messageIndex:r,message:t,toggleIndex:toggleIndex}),[t,r]);return n({currentMessage:c,messageIndex:r,headerSelector:d,messageRef:o})},MessageAdButton=e=>{let{message:t}=e;if(t.adCreativeId)return(0,U.tZ)(z.xu,{marginBottom:"0px",children:(0,U.tZ)(z.xu,{width:"30px",height:"16px",bg:"$color_bg_screen",borderRadius:"3px",border:"1px solid",borderColor:"$color_outline_tertiary",alignItems:"center",justifyContent:"center",display:"flex",children:(0,U.tZ)(z.Jd,{typo:"$100-10-semi",color:"$color_text_textfield_disabled",children:"AD"})})})},MessageResponseTitle=e=>{let{message:t}=e,{role:n}=th(),{model:o}=tg(),r=(0,G.T_)();return"assistant"!==n?null:(0,U.BX)(z.Ug,{gap:"8px",alignItems:"center",children:[(0,U.tZ)(ModelSymbol,{model:o}),(0,U.tZ)(z.Jd,{typo:"$100-18-semi",color:"$color_text_primary",children:r("chat.feature_home.home.answer")}),(0,U.tZ)(MessageAdButton,{message:t})]})};function AdButton_templateObject(){let e=(0,D._)(["\n        cursor: pointer;\n        background-color: rgba(\n          255,\n          255,\n          255,\n          ","\n        );\n      "]);return AdButton_templateObject=function(){return e},e}let AdButton=e=>{let{type:t="A",onCollapse:n}=e;return(0,U.BX)(z.xu,{height:"16px",maxWidth:"46px",borderRadius:"2px",border:"1px solid",borderColor:"$color_outline_tertiary",display:"flex",alignItems:"center",justifyContent:"center",css:e=>(0,J.iv)(AdButton_templateObject(),"dark"===e.mode?.1:.3),children:["A"===t&&(0,U.tZ)(z.Jd,{fontSize:9,fontWeight:600,color:"$palette_gray_gray_500",padding:"0 4px 0 6px",children:"AD"}),"B"===t&&(0,U.BX)(z.Ug,{justifyContent:"center",alignItems:"center",padding:"0 4px 0 7px",onClick:()=>{null==n||n()},children:[(0,U.tZ)(z.Jd,{fontSize:9,fontWeight:600,color:"$palette_gray_gray_500",paddingRight:"2px",unselectable:"on",children:"AD"}),(0,U.tZ)(z.Jd,{fontSize:9,fontWeight:600,color:"$palette_gray_gray_500",unselectable:"on",children:"ㅣ"}),(0,U.tZ)(ei.JO,{as:eo.S5X,size:11,color:"$palette_gray_gray_500"})]})]})},BrandTitle=e=>{let{brand:t,onClick:n}=e;return(0,U.BX)(z.Ug,{gap:"6px",alignItems:"center",children:[(0,U.tZ)(z.xu,{width:"16px",height:"16px",borderRadius:"50%",overflow:"hidden",children:(0,U.tZ)("img",{src:t.logo,alt:t.brandName,width:"100%",height:"100%"})}),(0,U.tZ)(z.Jd,{typo:"$100-12-semi",color:"$color_text_primary",children:t.brandName}),t.website&&(0,U.tZ)(z.Jd,{onClick:()=>{n(()=>({click_type:"brand_title",index:"1",url:t.website})),window.open(t.website,"_blank")},typo:"$100-12-med",color:"$color_action_blue_primary",style:{cursor:"pointer"},children:"홈페이지"})]})},InfoArea=e=>{let{brandAdInfo:t,benefitList:n,onAdEventClick:o}=e,handleClick=(e,t)=>{o(()=>({click_type:e,url:t,index:"0"})),window.open(t,"_blank")};return(0,U.BX)(z.gC,{width:"100%",height:"100%",children:[(0,U.tZ)(z.gC,{border:"1px solid transparent",borderBottomColor:"$color_divider_secondary",paddingBottom:"16px",children:(0,U.BX)(z.xu,{display:"inline-block",children:[(0,U.tZ)(z.Jd,{typo:"$100-18-bold",color:"$color_text_primary",children:t.title}),(0,U.tZ)(z.Jd,{typo:"$100-14-semi",color:"$palette_gray_gray_500",marginTop:"14px",children:t.subTitle}),(0,U.tZ)(z.zx,{height:"32px",minWidth:"128px",display:"inline-flex",backgroundColor:"#0793F7",borderRadius:"10px",padding:"8px 10px 8px 10px",marginTop:"16px",alignItems:"center",justifyContent:"center",onClick:()=>{handleClick("brand_cta",t.cta.url)},children:(0,U.BX)(z.Ug,{alignItems:"center",gap:"5px",children:[(0,U.tZ)(z.Jd,{typo:"$100-16-semi",color:"#FFFFFF",children:t.cta.title}),(0,U.tZ)(ei.JO,{as:eo.xMl,width:16,height:16,color:"#F7FAFC"})]})})]})}),(0,U.tZ)(z.gC,{marginTop:"16px",gap:"14px",children:n.map((e,t)=>e.title&&e.description&&("link"!==e.type||e.url)?(0,U.BX)(z.Ug,{children:[(0,U.tZ)(z.Jd,{width:"60px",typo:"$100-14-semi",color:"$color_text_tertiary",children:e.title}),"text"===e.type?(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:e.description}):"link"===e.type?(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_action_blue_primary",style:{cursor:"pointer"},onClick:()=>{e.url&&handleClick("brand_content",e.url)},children:e.description}):null]},t):null)})]})},tH=85/180,MediaImageType=e=>{let{imageUrl:t,link:n,onAdEventClick:o}=e;return(0,U.tZ)(z.xu,{width:"100%",height:t?"100%":"0px",borderRadius:"5px",paddingBottom:t?"0":"".concat(100*tH,"%"),backgroundImage:"url(https://fe-web-assets.wow.wrtn.ai/shared/MediaChecker.png)",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",overflow:"hidden",position:"relative",onClick:()=>{o(()=>({click_type:"image",url:n,index:"0"})),window.open(n,"_blank")},style:{cursor:"pointer"},children:t&&(0,U.tZ)("img",{src:t,width:"100%",height:"100%",style:{objectFit:"cover",display:"block"}})})},MediaArea=e=>{let{mediaAreaInfo:t,onAdEventClick:n,isMobile:o}=e;return(0,U.BX)(z.gC,{width:"100%",height:"100%",minWidth:o?"100%":"367px",minHeight:o?"100%":"273px",gap:"10px",children:[(0,U.tZ)(MediaImageType,{imageUrl:t.contents.imageForLarge,link:t.contents.linkForLarge,onAdEventClick:e=>n(()=>({...e(),index:"0"}))}),(0,U.BX)(z.Ug,{justifyContent:"space-between",gap:"8px",children:[(0,U.tZ)(MediaImageType,{imageUrl:t.contents.imageForSmall01,link:t.contents.linkForSmall01,onAdEventClick:e=>n(()=>({...e(),index:"1"}))}),(0,U.tZ)(MediaImageType,{imageUrl:t.contents.imageForSmall02,link:t.contents.linkForSmall02,onAdEventClick:e=>n(()=>({...e(),index:"2"}))})]})]})};function ToggleArrowButton_templateObject(){let e=(0,D._)(["\n        transform: rotate(","deg);\n        transition: transform 0.3s;\n        cursor: pointer;\n      "]);return ToggleArrowButton_templateObject=function(){return e},e}let ToggleArrowButton=e=>{let{onShelvedAd:t}=e,[n,o]=(0,X.useState)(!1);return(0,U.tZ)(z.xu,{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",onClick:()=>{o(!n),null==t||t()},css:(0,J.iv)(ToggleArrowButton_templateObject(),n?180:0),children:(0,U.tZ)(ei.JO,{as:eo.I4Y,size:16,color:"$color_icon_secondary"})})},getAdsCreative=e=>q.Np.PB.get("api/v1/chat/ad-creatives/".concat(e,"?platform=PC"));function useAdsCreative(e){let{data:t,error:n,isLoading:o}=(0,et.dH)(e?"api/v1/chat/ad-creatives/".concat(e):null,()=>e?getAdsCreative(e):null,{shouldRetryOnError:!1}),r=null==t?void 0:t.data;return e?{adCreative:null==r?void 0:r.creative,adData:r,isLoading:o,isError:n}:{adCreative:null,adData:null,isLoading:!1,isError:null}}function GenerationStepBrandBanner_templateObject(){let e=(0,D._)(["\n          height: ",";\n          transition: height 0.3s ease-in-out;\n        "]);return GenerationStepBrandBanner_templateObject=function(){return e},e}function GenerationStepBrandBanner_templateObject1(){let e=(0,D._)(["\n              max-height: ",";\n              opacity: ",";\n              overflow: hidden;\n              transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;\n            "]);return GenerationStepBrandBanner_templateObject1=function(){return e},e}let GenerationStepBrandBanner=e=>{var t,n,o,r,i,a,l,c,d,s,u,p,_,h,m,g,x,v,f,b,y,C,k,w,Z;let{onCollapse:I,adCreativeId:O,setAdInfo:S,message:B,onBrandAdInfo:$}=e,{handleEvent:A}=(0,e$.m)(),{adCreative:M,adData:R}=useAdsCreative(O),[j,E]=(0,X.useState)(!1),[T,L]=(0,X.useState)(!1),F=(0,N.ac)("(max-width: 1109px)"),P=(0,G.T_)("chat.chat_room.brand_ad"),D=!!B.adCreativeId,H={adEventName:"expose_ad_brand",adEventBody:{...getAdEventProperties(R),event_type:"expose",msg_id:null!==(t=B._id)&&void 0!==t?t:"",chat_id:null!==(n=B.chatId)&&void 0!==n?n:""}},W={brandName:null!==(o=null==M?void 0:M.brandName)&&void 0!==o?o:"",website:null!==(r=null==M?void 0:M.brandHomepageLink)&&void 0!==r?r:"",logo:null!==(i=null==M?void 0:M.logoImage)&&void 0!==i?i:""},K={type:"Type01",contents:{imageForLarge:null!==(a=null==M?void 0:M.mainImage)&&void 0!==a?a:"",linkForLarge:null!==(l=null==M?void 0:M.mainImageLink)&&void 0!==l?l:"",imageForSmall01:null!==(c=null==M?void 0:M.subImage1)&&void 0!==c?c:"",linkForSmall01:null!==(d=null==M?void 0:M.subImage1Link)&&void 0!==d?d:"",imageForSmall02:null!==(s=null==M?void 0:M.subImage2)&&void 0!==s?s:"",linkForSmall02:null!==(u=null==M?void 0:M.subImage2Link)&&void 0!==u?u:""}},V={title:null!==(p=null==M?void 0:M.mainText)&&void 0!==p?p:"",subTitle:null!==(_=null==M?void 0:M.subText)&&void 0!==_?_:"",cta:{title:null!==(h=null==M?void 0:M.ctaText)&&void 0!==h?h:"",url:null!==(m=null==M?void 0:M.ctaLink)&&void 0!==m?m:""}},Y=[{title:null!==(g=null==M?void 0:M.summary1name)&&void 0!==g?g:"",description:null!==(x=null==M?void 0:M.summary1content)&&void 0!==x?x:"",type:"text"},{title:null!==(v=null==M?void 0:M.summary2name)&&void 0!==v?v:"",description:null!==(f=null==M?void 0:M.summary2content)&&void 0!==f?f:"",type:"text"},{title:null!==(b=null==M?void 0:M.summary3name)&&void 0!==b?b:"",description:null!==(y=null==M?void 0:M.summary3content)&&void 0!==y?y:"",type:"text"},{title:null!==(C=null==M?void 0:M.summary4name)&&void 0!==C?C:"",description:null!==(k=null==M?void 0:M.summary4content)&&void 0!==k?k:"",type:"text"},{title:P("generation_step_brand_title"),description:null!==(w=null==M?void 0:M.homepageUrl)&&void 0!==w?w:P("generation_step_brand_description"),type:"link",url:null!==(Z=null==M?void 0:M.homepageLink)&&void 0!==Z?Z:""}];(0,X.useEffect)(()=>{R&&S(R)},[R]);let handleAdEventClick=e=>{var t,n;let o={...getAdEventProperties(R),event_type:"click",msg_id:null!==(t=B._id)&&void 0!==t?t:"",chat_id:null!==(n=B.chatId)&&void 0!==n?n:"",...e()};A("click_ad_brand",o)};return((0,X.useEffect)(()=>{B._id&&H.adEventBody.ad_uuid&&!j&&(A(H.adEventName,{...H.adEventBody}),E(!0),$(R))},[H,B._id]),R&&M)?(0,U.tZ)(z.gC,{width:"100%",minHeight:"40px",maxHeight:"100%",children:(0,U.tZ)(z.xu,{maxWidth:"780px",backgroundColor:"$color_surface_ivory",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",overflow:"hidden",padding:"12px 16px 12px 16px",css:(0,J.iv)(GenerationStepBrandBanner_templateObject(),T?"40px":"100%"),children:(0,U.BX)(z.gC,{gap:"12px",children:[(0,U.BX)(z.Ug,{justifyContent:"space-between",children:[(0,U.tZ)(BrandTitle,{brand:W,onClick:handleAdEventClick}),(0,U.BX)(z.Ug,{gap:"8px",alignItems:"center",children:[(0,U.tZ)(AdButton,{type:D?"A":"B",onCollapse:()=>{null==I||I()}}),!D&&(0,U.tZ)(ToggleArrowButton,{onShelvedAd:()=>{L(!T)}})]})]}),(0,U.tZ)(z.xu,{css:(0,J.iv)(GenerationStepBrandBanner_templateObject1(),T?"0":"100%",T?"0":"1"),children:F?(0,U.BX)(z.gC,{justifyContent:"space-between",alignItems:"center",gap:"12px",children:[(0,U.tZ)(MediaArea,{mediaAreaInfo:K,onAdEventClick:handleAdEventClick,isMobile:F}),(0,U.tZ)(InfoArea,{brandAdInfo:V,benefitList:Y,onAdEventClick:handleAdEventClick})]}):(0,U.BX)(z.Ug,{justifyContent:"space-between",alignItems:"flex-start",gap:"12px",children:[(0,U.tZ)(MediaArea,{mediaAreaInfo:K,onAdEventClick:handleAdEventClick,isMobile:F}),(0,U.tZ)(InfoArea,{brandAdInfo:V,benefitList:Y,onAdEventClick:handleAdEventClick})]})})]})})}):null},SelectForm=e=>{let{title:t,isSelected:n,onClick:o}=e;return(0,U.tZ)(z.zx,{maxWidth:"362px",minWidth:"300px",width:"100%",height:"47px",border:"1px solid",borderColor:n?"$color_outline_primary":"$color_outline_tertiary",backgroundColor:n?"$color_surface_secondary":"$color_surface_ivory",borderRadius:"5px",onClick:()=>{null==o||o()},children:(0,U.tZ)(z.Jd,{typo:"$100-15-med",color:"$color_text_primary",children:t})})};function GenerationStepBrandBannerRedeem_templateObject(){let e=(0,D._)(["\n            flex-grow: 1;\n            overflow-y: auto;\n          "]);return GenerationStepBrandBannerRedeem_templateObject=function(){return e},e}let GenerationStepBrandBannerRedeem=e=>{var t,n,o,r;let{onCollapse:i,adInfo:a,message:l}=e,[c,d]=(0,X.useState)(null),[s,u]=(0,X.useState)(""),{handleEvent:p}=(0,e$.m)(),_={adEventName:"expose_ad_block_modal",adEventBody:{...getAdEventProperties(a),event_type:"expose",msg_id:null!==(t=l._id)&&void 0!==t?t:"",chat_id:null!==(n=l.chatId)&&void 0!==n?n:""}},h={adEventName:"click_ad_block_modal",adEventBody:{...getAdEventProperties(a),event_type:"click",msg_id:null!==(o=l._id)&&void 0!==o?o:"",chat_id:null!==(r=l.chatId)&&void 0!==r?r:"",feedback:null!=c?c:"",feedback_detail:null!=s?s:""}},handleCollapse=()=>{i()},handleReasonSelect=e=>{d(e===c?null:e),"기타"!==e&&u("")},handleOtherReasonChange=e=>{u(e)};return(0,X.useEffect)(()=>{p(_.adEventName,{..._.adEventBody})},[]),(0,U.tZ)(z.gC,{width:"100%",minHeight:"40px",children:(0,U.BX)(z.xu,{maxWidth:"780px",maxHeight:"391px",backgroundColor:"$color_surface_ivory",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",padding:"24px 20px 12px 20px",children:[(0,U.BX)(z.gC,{maxWidth:"740px",height:"50px",gap:"8px",children:[(0,U.BX)(z.Ug,{justifyContent:"space-between",children:[(0,U.tZ)(z.Jd,{typo:"$140-16-semi",color:"$color_text_primary",children:"이 광고를 그만 보려는 이유가 무엇인가요?"}),(0,U.tZ)(z.zx,{onClick:handleCollapse,children:(0,U.tZ)(ei.JO,{as:eo.S5X,size:18,color:"$palette_gray_gray_400"})})]}),(0,U.tZ)(z.Jd,{typo:"$140-14-med",color:"$color_text_secondary",children:"더 도움이 되는 정보를 제공해 드릴게요."})]}),(0,U.BX)(z.gC,{gap:"16px",maxWidth:"740px",marginTop:"16px",css:(0,J.iv)(GenerationStepBrandBannerRedeem_templateObject()),children:[(0,U.BX)(z.Ug,{justifyContent:"space-between",gap:"12px",children:[(0,U.tZ)(SelectForm,{title:"관심이 없는 광고예요",isSelected:"관심이 없는 광고예요"===c,onClick:()=>handleReasonSelect("관심이 없는 광고예요")}),(0,U.tZ)(SelectForm,{title:"답변 내용에 방해가 돼요",isSelected:"답변 내용에 방해가 돼요"===c,onClick:()=>handleReasonSelect("답변 내용에 방해가 돼요")})]}),(0,U.BX)(z.Ug,{justifyContent:"space-between",gap:"12px",children:[(0,U.tZ)(SelectForm,{title:"광고가 너무 자주 표시돼요",isSelected:"광고가 너무 자주 표시돼요"===c,onClick:()=>handleReasonSelect("광고가 너무 자주 표시돼요")}),(0,U.tZ)(SelectForm,{title:"부적절한 광고예요",isSelected:"부적절한 광고예요"===c,onClick:()=>handleReasonSelect("부적절한 광고예요")})]}),(0,U.BX)(z.Ug,{justifyContent:"space-between",gap:"12px",children:[(0,U.tZ)(SelectForm,{title:"이 광고를 이미 확인했어요",isSelected:"이 광고를 이미 확인했어요"===c,onClick:()=>handleReasonSelect("이 광고를 이미 확인했어요")}),(0,U.tZ)(SelectForm,{title:"기타",isSelected:"기타"===c,onClick:()=>handleReasonSelect("기타")})]}),"기타"===c&&(0,U.tZ)(z.II,{value:s,onChange:e=>null==handleOtherReasonChange?void 0:handleOtherReasonChange(e.target.value),width:"100%",height:"46px",border:"1px solid",borderColor:"$color_outline_secondary",backgroundColor:"$color_surface_ivory",borderRadius:"5px",marginBottom:"4px",placeholder:"이유를 알려주세요",padding:"11px 16px",typo:"$160-15-med",color:"$color_text_primary"})]}),(0,U.tZ)(z.gC,{marginTop:"8px",children:(0,U.BX)(z.Ug,{justifyContent:"flex-end",gap:"9px",children:[(0,U.tZ)(z.Wv,{size:"$medium",hierarchy:"$secondary",onClick:handleCollapse,children:(0,U.tZ)(z.Jd,{margin:"0px 13px",children:"취소"})}),(0,U.tZ)(z.Wv,{size:"$medium",hierarchy:"$primary",disabled:!c,onClick:()=>{c&&("기타"!==c||s)&&(p(h.adEventName,{...h.adEventBody}),null==i||i(),(0,eO.wp)("이 광고는 더이상 노출되지 않아요. \n 더 유용한 광고로 찾아뵙겠습니다."))},children:(0,U.tZ)(z.Jd,{margin:"0px 13px",children:"제출"})})]})})]})})},useBrandAdStep=()=>{let[e,t]=X.useState(null);return X.useEffect(()=>{let e=tu.ai.subscribe(e=>{t(e)});return()=>{e.unsubscribe()}},[]),{adStep:e}},GenerationStepBrandBannerLayout=e=>{var t;let{message:n,setViewBrandAd:o,isLastMessage:r,onBrandAdInfo:i}=e,[a,l]=(0,X.useState)(!1),[c,d]=(0,X.useState)(null),{adStep:s}=useBrandAdStep();if("assistant"!==n.role)return null;o(!1);let handleCollapse=()=>{l(!a)},u=null==s?void 0:s.ads,p=null==u?void 0:u.find(e=>"CHAT_BRAND"===e.inventoryCode),_=null==n?void 0:null===(t=n.ads)||void 0===t?void 0:t.find(e=>"CHAT_BRAND"===e.inventoryCode);return((!r&&(null==p?void 0:p.adRequestId)!==(null==_?void 0:_.adRequestId)||!p&&r&&(null==_?void 0:_.adRequestId))&&(p=_),p)?(o(!0),(0,U.tZ)(U.HY,{children:a?(0,U.tZ)(GenerationStepBrandBannerRedeem,{onCollapse:handleCollapse,adInfo:c,message:n}):(0,U.tZ)(GenerationStepBrandBanner,{onCollapse:handleCollapse,adCreativeId:p.adCreativeId,setAdInfo:e=>{d(e)},message:n,onBrandAdInfo:e=>i(e)})})):null},RelatedLinkAdCard=e=>{let{card:t,onClickEvent:n,cardIndex:o}=e;return(0,U.tZ)(z.xu,{width:"100%",height:"118px",borderRadius:"10px",padding:"24px 13px 9px 13px",onClick:()=>{n(()=>({click_type:"brand_card",index:"5",url:t.link}),(parseInt(o)+1).toString()),window.open(t.link,"_blank")},backgroundImage:"url(".concat(t.image,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",style:{cursor:"pointer"}})},RelatedLinkAd=e=>{var t,n;let{message:o}=e,{handleEvent:r}=(0,e$.m)(),i=(0,G.T_)("chat.chat_room.brand_ad"),a=null===(t=o.ads)||void 0===t?void 0:t.find(e=>"CHAT_BRAND"===e.inventoryCode),{adCreative:l,adData:c,isLoading:d}=useAdsCreative(null!==(n=null==a?void 0:a.adCreativeId)&&void 0!==n?n:""),s=(0,X.useMemo)(()=>l?[1,2,3].map(e=>{var t,n;return{image:null!==(t=l["brandCardImage".concat(e)])&&void 0!==t?t:null,link:null!==(n=l["brandCardImage".concat(e,"Link")])&&void 0!==n?n:null}}).filter(e=>null!==e.image&&null!==e.link):[],[l]),handleAdEventClick=(e,t)=>{var n,i;let a={...getAdEventProperties(c),event_type:"click",msg_id:null!==(n=o._id)&&void 0!==n?n:"",chat_id:null!==(i=o.chatId)&&void 0!==i?i:"",...e(),click_index:t.toString()};r("click_ad_brand",a)};return!a||d||0===s.length?null:(0,U.BX)(z.gC,{width:"228px",height:"100%",gap:"8px",children:[(0,U.BX)(z.Ug,{alignItems:"center",gap:"4px",children:[(0,U.tZ)(ei.JO,{as:eo.iKx,size:20}),(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:i("related_link")})]}),s.map((e,t)=>(0,U.tZ)(RelatedLinkAdCard,{card:e,cardIndex:t.toString(),onClickEvent:handleAdEventClick},t))]})};function ReferenceCardAd_templateObject(){let e=(0,D._)(['\n        cursor: pointer;\n        &::before {\n          content: "";\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          border-radius: 12px;\n          background-color: rgba(0, 0, 0, 0.5);\n        }\n      ']);return ReferenceCardAd_templateObject=function(){return e},e}function ReferenceCardAd_templateObject1(){let e=(0,D._)(["\n              overflow: hidden;\n              text-overflow: ellipsis;\n              display: -webkit-box;\n              -webkit-line-clamp: 1;\n              -webkit-box-orient: vertical;\n              line-height: 160%;\n            "]);return ReferenceCardAd_templateObject1=function(){return e},e}function ReferenceCardAd_templateObject2(){let e=(0,D._)(['\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          color: inherit;\n          & > * {\n            position: relative;\n            z-index: 1;\n          }\n          &::before {\n            content: "";\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            border-radius: 4px;\n            background-color: rgba(255, 255, 255, 0.1);\n            z-index: 0;\n          }\n        ']);return ReferenceCardAd_templateObject2=function(){return e},e}let ReferenceCardAd=e=>{var t,n;let{message:o,referenceAd:r,onExposed:i,onSetAdData:a,isLastMessage:l}=e,{handleEvent:c}=(0,e$.m)(),[d,s]=(0,X.useState)(!1),[u,p]=(0,X.useState)(!1),_=r;l&&(r||!o.ads)||(_=null===(t=o.ads)||void 0===t?void 0:t.find(e=>"CHAT_REFERENCE"===e.inventoryCode));let{adCreative:h,adData:m}=useAdsCreative(null!==(n=null==_?void 0:_.adCreativeId)&&void 0!==n?n:"");(0,X.useEffect)(()=>{if(o._id&&(null==m?void 0:m.adUid)&&!u){var e,t;c("expose_ad_chat_card",{...getAdEventProperties(m),event_type:"expose",msg_id:null!==(e=o._id)&&void 0!==e?e:"",chat_id:null!==(t=o.chatId)&&void 0!==t?t:""}),p(!0),a(m)}},[null==m?void 0:m.adUid,o._id]);let g=!!o.adCreativeId,handleExposed=()=>{i(!0),s(!0)};return h&&!d&&_?(0,U.BX)(z.xu,{width:"228px",height:"99px",borderRadius:"12px",padding:"16px",position:"relative",backgroundImage:"url(".concat(null==h?void 0:h.backgroundImage,")"),backgroundSize:"cover",backgroundPosition:"center",onClick:()=>{if(null==h?void 0:h.link){var e,t;window.open(h.link,"_blank"),c("click_ad_chat_card",{...getAdEventProperties(m),event_type:"click",msg_id:null!==(e=o._id)&&void 0!==e?e:"",chat_id:null!==(t=o.chatId)&&void 0!==t?t:"",click_type:"chat_card"})}},css:(0,J.iv)(ReferenceCardAd_templateObject()),children:[(0,U.BX)(z.gC,{maxWidth:"196px",gap:"10px",position:"relative",zIndex:"1",children:[(0,U.BX)(z.Ug,{width:"100%",justifyContent:"flex-start",alignItems:"center",gap:"6px",children:[(0,U.tZ)(z.xu,{width:"16px",height:"16px",borderRadius:"50%",overflow:"hidden",children:(0,U.tZ)("img",{src:null==h?void 0:h.logo,width:"100%",height:"100%"})}),(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_white",css:(0,J.iv)(ReferenceCardAd_templateObject1()),children:null==h?void 0:h.brandName})]}),(0,U.tZ)(z.Jd,{typo:"$100-14-semi",color:"$color_text_white",children:null==h?void 0:h.mainText}),(0,U.tZ)(z.Jd,{typo:"$100-12-reg",color:"$color_text_white",children:null==h?void 0:h.subText})]}),(0,U.tZ)(z.zx,{position:"absolute",minWidth:"19px",height:"14px",right:"8px",top:"8px",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, 0.4)",zIndex:"1",css:(0,J.iv)(ReferenceCardAd_templateObject2()),children:g?(0,U.tZ)(z.Jd,{fontSize:"9px",color:"#61605A",children:"AD"}):(0,U.BX)(z.Ug,{justifyContent:"center",alignItems:"center",padding:"0 4px 0 7px",onClick:e=>{e.stopPropagation(),handleExposed()},children:[(0,U.tZ)(z.Jd,{fontSize:9,fontWeight:600,color:"#61605A",paddingRight:"2px",unselectable:"on",children:"AD"}),(0,U.tZ)(z.Jd,{fontSize:9,fontWeight:600,color:"#61605A",unselectable:"on",children:"ㅣ"}),(0,U.tZ)(ei.JO,{as:eo.S5X,size:11,color:"#61605A"})]})})]}):null},SelectForm_SelectForm=e=>{let{title:t,isSelected:n,onClick:o}=e;return(0,U.tZ)(z.zx,{maxWidth:"362px",minWidth:"228px",width:"100%",height:"47px",border:"1px solid",borderColor:n?"$color_outline_primary":"$color_outline_tertiary",backgroundColor:n?"$color_surface_secondary":"$color_surface_ivory",borderRadius:"5px",onClick:()=>{null==o||o()},children:(0,U.tZ)(z.Jd,{typo:"$100-15-med",color:"$color_text_primary",children:t})})},ReferenceCardAdRedeem=e=>{var t,n,o,r;let{adInfo:i,message:a,onCollapse:l}=e,{handleEvent:c}=(0,e$.m)(),[d,s]=(0,X.useState)(null),[u,p]=(0,X.useState)(""),_={adEventName:"expose_ad_block_modal",adEventBody:{...getAdEventProperties(i),event_type:"expose",msg_id:null!==(t=a._id)&&void 0!==t?t:"",chat_id:null!==(n=a.chatId)&&void 0!==n?n:""}},h={adEventName:"click_ad_block_modal",adEventBody:{...getAdEventProperties(i),event_type:"click",msg_id:null!==(o=a._id)&&void 0!==o?o:"",chat_id:null!==(r=a.chatId)&&void 0!==r?r:"",feedback:null!=d?d:"",feedback_detail:null!=u?u:""}},handleReasonSelect=e=>{s(e===d?null:e),"기타"!==e&&p("")},handleOtherReasonChange=e=>{p(e)};return(0,X.useEffect)(()=>{c(_.adEventName,{..._.adEventBody})},[]),(0,U.BX)(z.xu,{width:"228px",maxHeight:"600px",children:[(0,U.BX)(z.gC,{maxWidth:"740px",width:"100%",gap:"8px",marginBottom:"28px",children:[(0,U.tZ)(z.Jd,{typo:"$140-16-semi",color:"$color_text_primary",children:"이 광고를 그만 보려는 이유가 무엇인가요?"}),(0,U.tZ)(z.Jd,{typo:"$140-14-med",color:"$color_text_secondary",children:"더 도움이 되는 정보를 제공해 드릴게요."})]}),(0,U.BX)(z.gC,{justifyContent:"space-between",gap:"12px",marginBottom:"16px",children:[(0,U.tZ)(SelectForm_SelectForm,{title:"관심이 없는 광고예요",isSelected:"관심이 없는 광고예요"===d,onClick:()=>handleReasonSelect("관심이 없는 광고예요")}),(0,U.tZ)(SelectForm_SelectForm,{title:"답변 내용에 방해가 돼요",isSelected:"답변 내용에 방해가 돼요"===d,onClick:()=>handleReasonSelect("답변 내용에 방해가 돼요")}),(0,U.tZ)(SelectForm_SelectForm,{title:"광고가 너무 자주 표시돼요",isSelected:"광고가 너무 자주 표시돼요"===d,onClick:()=>handleReasonSelect("광고가 너무 자주 표시돼요")}),(0,U.tZ)(SelectForm_SelectForm,{title:"부적절한 광고예요",isSelected:"부적절한 광고예요"===d,onClick:()=>handleReasonSelect("부적절한 광고예요")}),(0,U.tZ)(SelectForm_SelectForm,{title:"이 광고를 이미 확인했어요",isSelected:"이 광고를 이미 확인했어요"===d,onClick:()=>handleReasonSelect("이 광고를 이미 확인했어요")}),(0,U.tZ)(SelectForm_SelectForm,{title:"기타",isSelected:"기타"===d,onClick:()=>handleReasonSelect("기타")}),"기타"===d&&(0,U.tZ)(z.II,{value:u,onChange:e=>null==handleOtherReasonChange?void 0:handleOtherReasonChange(e.target.value),width:"100%",height:"46px",border:"1px solid",borderColor:"$color_outline_secondary",backgroundColor:"$color_surface_ivory",borderRadius:"5px",marginBottom:"4px",placeholder:"이유를 알려주세요",padding:"11px 16px",typo:"$160-15-med",color:"$color_text_primary"})]}),(0,U.tZ)(z.gC,{marginTop:"24px",children:(0,U.BX)(z.Ug,{justifyContent:"center",gap:"9px",children:[(0,U.tZ)(z.Wv,{size:"$medium",hierarchy:"$secondary",onClick:()=>{l()},children:(0,U.tZ)(z.Jd,{margin:"0px 13px",children:"취소"})}),(0,U.tZ)(z.Wv,{size:"$medium",hierarchy:"$primary",disabled:!d,onClick:()=>{d&&("기타"!==d||u)&&(c(h.adEventName,{...h.adEventBody}),l(),(0,eO.wp)("이 광고는 더이상 노출되지 않아요. \n 더 유용한 광고로 찾아뵙겠습니다."))},children:(0,U.tZ)(z.Jd,{margin:"0px 13px",children:"제출"})})]})})]})},ReferenceCardAdLayout=e=>{let{message:t,referenceAd:n,setIsExposedBlockAd:o,onSetAdCreative:r,isLastMessage:i,setIsAdRelated:a}=e,[l,c]=(0,X.useState)(!1),[d,s]=(0,X.useState)(null);return d||n?(a(!0),l?(0,U.tZ)(ReferenceCardAdRedeem,{adInfo:d,message:t,onCollapse:()=>{c(!1),o(!1)}}):(0,U.tZ)(ReferenceCardAd,{referenceAd:n,message:t,onExposed:()=>{c(!0),o(!0)},onSetAdData:e=>{var t;s(e),r(null!==(t=null==e?void 0:e.adCreativeId)&&void 0!==t?t:"")},isLastMessage:i})):(a(!1),null)},useDisplayGenerateStep=()=>{var e,t,n,o,r;let[i,a]=X.useState([]),l=(0,eC.sJ)(ey.CU),c="generating"===l,d=i.length>0?null===(e=i.at(-1))||void 0===e?void 0:e.stepName:"",s=i.length>0?null===(t=i[i.length-1])||void 0===t?void 0:t.clientAction:"",u=null===(n=i.filter(e=>"searchResult"in e&&e.searchResult&&e.searchResult.length>0)[0])||void 0===n?void 0:n.searchResult,p=null===(o=i.filter(e=>"imageReferenceResults"in e&&e.imageReferenceResults.length>0)[0])||void 0===o?void 0:o.imageReferenceResults,_=null===(r=i.filter(e=>"videoReferenceResults"in e&&e.videoReferenceResults.length>0)[0])||void 0===r?void 0:r.videoReferenceResults;return X.useEffect(()=>{"ready"!==l&&"canceling"!==l&&a([])},[l]),X.useEffect(()=>{let e=tu.Gz.subscribe(e=>{a(e)});return()=>{e.unsubscribe()}},[]),{generateStep:i,isGenerating:c,currentStepName:d,currentClientAction:s,currentSearchResult:u,currentImageReferenceResults:p,currentVideoReferenceResults:_}},tG=[{display:"Skeleton 1"},{display:"Skeleton 2"}],useSearchResultList=e=>{let{currentMessage:t}=e,{currentStepName:n,currentClientAction:o,currentSearchResult:r}=useDisplayGenerateStep(),i=(null==t?void 0:t.searchResult)||void 0,[a,l]=X.useMemo(()=>i?[i,"history"]:r?[r,"current"]:"browsing_server_planner_result_citation"===n&&"show_skeleton"===o?[tG,"skeleton"]:[[],"empty"],[i,r,o,n]),c=X.useMemo(()=>a.length>4,[a.length]);return{searchResultList:a,resultType:l,enableCollapse:c}},useExposeEvent=e=>{let{currentMessage:t,isAdWebview:n}=e,{trackEvent:o}=(0,H.Ke)(),{searchParams:r}=(0,W.je)(),{uuid:i,isLastMessage:a}=th(),{generating:l}=tj(),c=(0,eC.sJ)(ey.GY),{searchResultList:d,resultType:s}=useSearchResultList({currentMessage:t}),{model:u,enableOptions:p}=tg(),_=null==p?void 0:p.searchLink;(0,X.useEffect)(()=>{let e="history"===s&&(!_||void 0!==t.cachedChip),p="current"===s&&_;if("NEW_ASSISTANT_MESSAGE_ID"!==t._id&&d.length&&a&&!l&&(e||p)){let e=d.find(e=>(0,eA.isAdSearchResult)(e)),a=r.get("inventory");n||o("expose_chat_recommend_link",{content:{...d.map(e=>e.title)},thumbnail:{...d.map(e=>!!e.thumbnail)},platform:{...d.map(e=>e.siteName)},model_name:u.toUpperCase(),msg_id:t._id,fe_msg_id:c,uuid:i,inventory_position:"key"===a?"key-in":"chip"===a?"cached_chip":null,...e&&{is_ad:!0,_id:e.adId,...e.eventProperty}})}},[d,s,l])};function SearchResultCard_templateObject(){let e=(0,D._)(["\n  display: -webkit-box;\n  max-height: 40px;\n  line-height: 140%;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  word-break: break-word;\n"]);return SearchResultCard_templateObject=function(){return e},e}function SearchResultCard_templateObject1(){let e=(0,D._)(["\n          flex-shrink: 0;\n          z-index: 1;\n          cursor: ",";\n\n          &:hover {\n            background-color: ",";\n          }\n        "]);return SearchResultCard_templateObject1=function(){return e},e}let tW=(0,J.iv)(SearchResultCard_templateObject()),SearchResultCard=e=>{let{searchResult:t,isSkeleton:n,index:o,onClick:r}=e,[i,a]=(0,X.useState)(!1);return((0,X.useEffect)(()=>{i||a(n)},[n,i]),i)?(0,U.tZ)(V.Od,{width:"228px",minHeight:"142px",borderRadius:"8px"}):(0,U.tZ)(z.gC,{width:"100%",minHeight:60,padding:16,gap:"10px",borderRadius:8,backgroundColor:"$color_surface_tertiary",css:e=>{var n;return(0,J.iv)(SearchResultCard_templateObject1(),(null==t?void 0:t.externalLink)?"pointer":"default",null===(n=e.colors)||void 0===n?void 0:n.$color_surface_tertiary_hover)},onClick:e=>{e.stopPropagation(),(null==t?void 0:t.externalLink)&&(null==r||r(),window.navigator.userAgent.toLowerCase().includes("iphone")||window.navigator.userAgent.toLowerCase().includes("android")?t.externalLink&&window.location.assign(t.externalLink):window.open(t.externalLink,"_blank","noopener noreferrer"))},children:(0,U.BX)(z.xu,{display:"flex",flexDirection:"column",gap:"10px",children:[(0,U.BX)(z.Ug,{gap:"6px",alignItems:"center",children:[(null==t?void 0:t.favicon)&&(0,U.tZ)("img",{style:{width:"16px",height:"16px",borderRadius:"16px"},src:t.favicon,alt:"favicon"}),!(null==t?void 0:t.favicon)&&((null==t?void 0:t.type)?(0,U.tZ)(z.kC,{width:"16px",height:"16px",backgroundColor:(null==t?void 0:t.type)==="file"?"$color_outline_accent_red":"$color_surface_elevated",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,U.tZ)(ei.JO,{as:(null==t?void 0:t.type)==="file"?eo.qTh:eo.kr2,size:10,color:(null==t?void 0:t.type)==="file"?"$color_icon_ivory":"$color_text_accent_bg_blue"})}):(0,U.tZ)(z.xu,{width:"16px",height:"16px",borderRadius:"16px",backgroundColor:"$color_surface_secondary",display:"flex",justifyContent:"center",alignItems:"center",children:(0,U.tZ)(z.Jd,{typo:"$100-12-semi",color:"$color_action_blue_primary",children:o+1})})),(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_tertiary",style:{flex:1,lineHeight:"normal",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.siteName})]}),(0,U.tZ)(z.Jd,{typo:"$140-14-med",color:"$color_text_primary",css:tW,children:t.title}),(0,U.tZ)(z.Jd,{typo:"$140-12-reg",color:"$color_text_secondary",css:tW,children:t.snippet}),t.page&&(0,U.BX)(z.Jd,{typo:"$140-12-reg",color:"$color_text_tertiary",css:tW,children:[t.page,"페이지"]})]})})},SearchResultCollapseController=e=>{let{enableCollapse:t,currentMessageId:n,messageIndex:o,reGenerate:r,children:i}=e,[a,l]=X.useState(t),{trackEvent:c}=(0,H.Ke)(),{chatId:d}=td();return X.useEffect(()=>{t&&l(!0)},[t]),i({collapse:a,openCollapse:()=>{c("click_chat_recommend_link_more_btn",{chat_id:d,msg_id:n,msg_index:o,re_generate:r,type:"open"}),l(!1)},closeCollapse:()=>{c("click_chat_recommend_link_more_btn",{chat_id:d,msg_id:n,msg_index:o,re_generate:r,type:"close"}),l(!0)}})};function MessageSearchResultListV2_templateObject(){let e=(0,D._)(["\n                      cursor: pointer;\n                      flex-shrink: 0;\n\n                      &:hover {\n                        background-color: ",";\n                      }\n                    "]);return MessageSearchResultListV2_templateObject=function(){return e},e}let MessageSearchResultListV2=e=>{var t,n;let{currentMessage:o,messageIndex:r,messageListItemIndex:i,messageLength:a,isAdWebview:l,isLastMessage:c}=e,{mediaQueries:d}=(0,er.TC)(),s=(0,N.ac)(d.mobile),{searchParams:u}=(0,W.je)(),p=u.get("input_kb"),_=(0,G.T_)("chat.feature_chat_room.message_search_result_list"),{trackEvent:h}=(0,H.Ke)(),{startTrack:m}=(0,H.aY)(),{uuid:g}=th(),{searchResultList:x,resultType:v,enableCollapse:f}=useSearchResultList({currentMessage:o}),{unitId:b}=tg(),{id:y}=(0,e_.Jv)(),{id:C}=(0,e_.mp)(),{id:k}=(0,e_.Ob)(),{adStep:w}=useBrandAdStep(),Z=null==w?void 0:w.ads,I=null==Z?void 0:Z.find(e=>"CHAT_REFERENCE"===e.inventoryCode),O=null===(t=o.ads)||void 0===t?void 0:t.find(e=>"CHAT_REFERENCE"===e.inventoryCode),S=y===b,B=C===b,$=k===b,A=null===(n=o.error)||void 0===n?void 0:n.message,M=!!A||f;useExposeEvent({currentMessage:o,isAdWebview:l});let{enableOptions:R}=tg(),j=null==R?void 0:R.searchLink,[E,T]=(0,X.useState)(!p),[L,F]=(0,X.useState)(4),[P,D]=(0,X.useState)(!1),[K,V]=(0,X.useState)(null),[Y,q]=(0,X.useState)(!1),{getModelByModelName:Q}=(0,e_.pw)(),ee=eq.sO;(0,X.useEffect)(()=>{K?F(3):F(4)},[K]);let handleSetAdCreative=e=>{V(e)},handleClickSearchResult=(e,t)=>()=>{var n,i,a,l,c;let d={chat_id:null!==(a=o.chatId)&&void 0!==a?a:"",model_name:null!==(l=o.model.toUpperCase())&&void 0!==l?l:"",index:t,link:null!==(c=e.externalLink)&&void 0!==c?c:"",msg_id:o._id,type:j?"reference":"relation",uuid:null!=g?g:""};h("click_chat_recommend_link",{display:e.display,has_thumbnail:!!e.thumbnail,link_type:"external",msg_index:r,position:"chat",purpose:ee?null===(n=Q(o.model))||void 0===n?void 0:n.displayName:void 0,...d}),m({purpose:ee?null===(i=Q(o.model))||void 0===i?void 0:i.displayName:void 0,...d})},et=!(null==O?void 0:O.adRequestId)&&(!I||!c),en=0===x.length||"empty"===v;return et&&(en||B||$)?(0,U.tZ)(z.xu,{width:["100%","100%",228,228],height:"100%",className:"empty-".concat(i)}):(0,U.tZ)(SearchResultCollapseController,{enableCollapse:M,currentMessageId:null==o?void 0:o._id,messageIndex:r,reGenerate:a-1===r,children:e=>{let{collapse:t,openCollapse:n,closeCollapse:r}=e;return(0,U.BX)(z.gC,{style:{flex:1},gap:"8px",width:"100%",children:[(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",width:"100%",justifyContent:"space-between",pr:"20px",children:[(Y||!en)&&(0,U.BX)(z.Ug,{alignItems:"center",gap:"4px",children:[(0,U.tZ)(ei.JO,{as:S?eo.iKx:eo.tId,size:20}),(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:S?_("title.ai_search"):_("title.ai_work")})]}),(Y||!en)&&s&&(0,U.tZ)(ei.JO,{as:eo.I4Y,color:"$color_icon_tertiary",size:24,onClick:()=>T(!E),style:{cursor:"pointer",transform:E?"rotate(0deg)":"rotate(-180deg)",transition:"transform 0.3s"}})]}),(0,U.BX)(z.xu,{width:["100%","100%",228,228],display:"flex",height:"100%",gap:"8px",overflow:["hidden","hidden","auto","auto"],paddingBottom:E?[24,24,0,0]:0,maxHeight:[E?"100dvh":0,E?"100dvh":0,"100dvh","100dvh"],flexWrap:"wrap",children:[(0,U.tZ)(ReferenceCardAdLayout,{referenceAd:null!=I?I:O,message:o,setIsExposedBlockAd:D,setIsAdRelated:q,onSetAdCreative:handleSetAdCreative,isLastMessage:null!=c&&c}),!$&&!P&&!B&&($?[]:A&&t&&!s?x.slice(0,1):!A&&M&&t&&!s?x.slice(0,L):x).map((e,t)=>(0,U.tZ)(z.xu,{display:"flex",flexBasis:["calc(50% - 8px)","calc(33.333% - 8px)","100%","100%"],width:"100%",children:(0,U.tZ)(SearchResultCard,{searchResult:e,isSkeleton:"skeleton"===v,index:t,onClick:handleClickSearchResult(e,t)})},"".concat(e.title,"-").concat(t))),!$&&!P&&M&&(0,U.tZ)(z.xu,{width:"100%",display:["none","none","flex","flex"],justifyContent:"center",children:(0,U.BX)(z.Ug,{onClick:t?n:r,gap:"2px",bg:"$color_surface_tertiary",paddingX:"16px",paddingY:"12px",borderRadius:"20px",alignItems:"center",css:e=>{var t;return(0,J.iv)(MessageSearchResultListV2_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_tertiary_hover)},children:[(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_secondary",children:t?_("reference.more"):_("reference.collapse")}),(0,U.tZ)(ei.JO,{as:t?eo.aEp:eo.wtG,size:12,color:"$color_icon_secondary"})]})})]})]})}})},MessageSideBar=e=>{let{message:t,currentMessage:n,messageIndex:o,messageListItemIndex:r,isAdWebview:i,isLastMessage:a}=e,{mediaQueries:l}=(0,er.TC)(),[c,d]=(0,X.useState)(0),s=(0,N.ac)(l.mobile);return(useExposeEvent({currentMessage:n,isAdWebview:i}),(0,X.useLayoutEffect)(()=>{var e,t;let n=null!==(t=null===(e=document.querySelector(".empty-".concat(r-1)))||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0;d(n)},[s,r]),"assistant"!==n.role)?(0,U.tZ)(z.xu,{width:["100%","100%",228,228],height:"100%",className:"empty-".concat(r)}):(0,U.tZ)(z.xu,{backgroundColor:["$color_bg_elevated_secondary","$color_bg_elevated_secondary","$color_bg_screen","$color_bg_screen"],zIndex:1,children:(0,U.BX)(z.gC,{position:"sticky",top:0,left:0,gap:"16px",mt:[0,0,-c,-c],pt:["20px","20px","16px","16px"],pb:["0px","0px","16px","16px"],backgroundColor:"$color_bg_screen",children:[(0,U.tZ)(RelatedLinkAd,{message:n}),(0,U.tZ)(MessageSearchResultListV2,{messageIndex:o,messageLength:t.length,currentMessage:n,messageListItemIndex:r,isLastMessage:a})]})})};function ActionCardItem_templateObject(){let e=(0,D._)(["\n            @media screen and (max-width: 1024px) {\n              gap: 2px;\n            }\n          "]);return ActionCardItem_templateObject=function(){return e},e}function ActionCardItem_templateObject1(){let e=(0,D._)(["\n              @media screen and (max-width: 1440px) {\n                font-size: 12px;\n              }\n\n              @media screen and (max-width: 1024px) {\n                font-size: 10px;\n              }\n\n              @media screen and (max-width: 768px) {\n                font-size: 8px;\n              }\n            "]);return ActionCardItem_templateObject1=function(){return e},e}function ActionCardItem_templateObject2(){let e=(0,D._)(["\n                @media screen and (max-width: 1440px) {\n                  font-size: 14px;\n                }\n\n                @media screen and (max-width: 1024px) {\n                  font-size: 12px;\n                }\n\n                @media screen and (max-width: 768px) {\n                  font-size: 10px;\n                }\n              "]);return ActionCardItem_templateObject2=function(){return e},e}function ActionCardItem_templateObject3(){let e=(0,D._)(["\n              @media screen and (max-width: 1024px) {\n                font-size: 10px;\n              }\n\n              @media screen and (max-width: 768px) {\n                font-size: 8px;\n              }\n            "]);return ActionCardItem_templateObject3=function(){return e},e}function ActionCardItem(e){var t,o;let{index:r,image:i,title:a,subtitle:l,imageLink:c,onClick:d}=e,s=(0,X.useRef)(null),u=(0,X.useRef)(null),[p,_]=(0,X.useState)(null!==(o=null===(t=s.current)||void 0===t?void 0:t.clientWidth)&&void 0!==o?o:150),[h,m]=(0,X.useState)(!1),[g,x]=(0,X.useState)(!1),[v,f]=(0,X.useState)(!1),{mode:b}=(0,er.TC)(),y=(0,G.T_)("chat.chat_room.ad_action_card");(0,X.useEffect)(()=>{let e=new ResizeObserver(e=>{let{width:t}=e[0].contentRect;_(t)});return s.current&&e.observe(s.current),()=>e.disconnect()},[]);let C=h?"translateY(".concat(function(e){switch(e){case 0:default:return"-38%";case 1:return"-28%";case 2:return"-48%"}}(r),")"):v?"translateY(-30px)":"translateY(0)",k=h?0:v?.6:1;return(0,U.BX)(z.gC,{ref:s,minWidth:"150px",position:"relative",style:{flex:1,aspectRatio:"1 / 1.25",flexShrink:0,cursor:"pointer"},onClick:()=>{m(e=>!e),d(h?"close":"open"),setTimeout(()=>window.open(c,"_blank"),800)},onMouseEnter:()=>{f(!0),u.current=setTimeout(()=>x(!0),1e3)},onMouseLeave:()=>{f(!1),x(!1),u.current&&clearTimeout(u.current)},draggable:!1,children:[(0,U.BX)(z.gC,{width:"100%",height:"100%",overflow:"hidden",position:"relative",children:[(0,U.tZ)("img",{src:"light"===b?"https://cdn-image.wrtn.ai/Ads/window_border.png":"https://cdn-image.wrtn.ai/Ads/window_border_dark.png",alt:"Window Border",style:{width:"100%",height:"100%",position:"absolute",objectFit:"contain",zIndex:4},draggable:!1}),(0,U.tZ)("img",{src:"https://cdn-image.wrtn.ai/Ads/window_cover.png",alt:"Window Cover",style:{objectFit:"contain",width:"100%",height:"100%",position:"absolute",zIndex:3,bottom:function(e){switch(e){case 0:default:return"45%";case 1:return"55%";case 2:return"35%"}}(r),transform:C,transition:".3s"},draggable:!1}),(0,U.tZ)("img",{src:"https://cdn-image.wrtn.ai/Ads/window_border_inner.png",alt:"Window Border Inner",style:{width:"100%",height:"100%",position:"absolute",objectFit:"contain",zIndex:2},draggable:!1}),(0,U.tZ)(z.xu,{style:{position:"absolute",width:"100%",height:"100%",zIndex:1,background:"linear-gradient(rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.5))",opacity:k,transition:".3s"}}),(0,U.tZ)(ed(),{src:i,alt:"Window Main Image",width:p,height:1.25*p,objectFit:"contain",style:{position:"absolute"},draggable:!1}),(0,U.BX)(z.gC,{position:"absolute",bottom:"20%",left:"20%",zIndex:1,gap:"5px",css:(0,J.iv)(ActionCardItem_templateObject()),children:[(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_white",css:(0,J.iv)(ActionCardItem_templateObject1()),children:l}),(0,U.BX)(z.Ug,{alignItems:"center",gap:"3px",children:[(0,U.tZ)(z.Jd,{typo:"$100-16-bold",color:"$color_text_white",css:(0,J.iv)(ActionCardItem_templateObject2()),children:a}),(0,U.tZ)(ei.JO,{as:eo.lA1,color:"$color_icon_white",size:18})]})]})]}),(0,U.BX)(z.gC,{position:"absolute",zIndex:10,right:2===r?0:-20,top:"30%",alignItems:"flex-end",overflow:"visible",children:[(0,U.tZ)(z.xu,{style:{visibility:!h&&g?"visible":"hidden"},backgroundColor:"#25855A",p:"2px 8px",borderRadius:"4px",children:(0,U.tZ)(z.Jd,{typo:"$140-12-med",color:"$color_text_white",css:(0,J.iv)(ActionCardItem_templateObject3()),children:y("tooltip")})}),0===r&&(0,U.tZ)(eK.q,{options:{autoplay:!0,loop:!0,animationData:n(46580)},style:{rotate:"190deg",margin:0,marginRight:30},width:"65px",height:"65px"})]})]})}function ChatActionCard_templateObject(){let e=(0,D._)(["\n          scrollbar-width: none;\n\n          @media screen and (max-width: 600px) {\n            scrollbar-width: thin;\n          }\n        "]);return ChatActionCard_templateObject=function(){return e},e}function ChatActionCard(e){var t;let{adCreativeId:n,message:o}=e,{adCreative:r,adData:i}=useAdsCreative(n),{user:a}=(0,eu.aF)(),l=(0,G.T_)("chat.chat_room.ad_action_card"),{handleEvent:c,handleEventWithoutThrottle:d}=(0,e$.m)(),[s,u]=(null==r?void 0:r.textTitle)?r.textTitle.split("{nickname}"):["",""],p=null==r?void 0:r.textBody.split("{nickname}").join(null==a?void 0:a.nickname);(0,X.useEffect)(()=>{var e;i&&c("expose_ad_action_card",{...getAdEventProperties(i),msg_id:o._id,chat_id:null!==(e=o.chatId)&&void 0!==e?e:"",index:["0","1","2"],event_type:"expose"})},[i,o._id,o.chatId]);let onClickImage=(e,t)=>{var n;i&&d("click_ad_action_card",{...getAdEventProperties(i),msg_id:o._id,chat_id:null!==(n=o.chatId)&&void 0!==n?n:"",index:e.toString(),event_type:"click",click_type:t})};return r?(0,U.BX)(z.gC,{backgroundColor:"$color_bg_screen",pt:"30px",children:[(0,U.tZ)(V.iz,{color:"$color_outline_tertiary"}),(0,U.BX)(z.Ug,{gap:"3px",alignItems:"center",margin:"24px 0px",children:[(0,U.tZ)(ei.JO,{as:eo.KUO,color:"$color_icon_tertiary",size:18}),(0,U.tZ)(z.Jd,{typo:"$100-14-semi",color:"$color_text_tertiary",children:l("title")})]}),(0,U.BX)(z.gC,{children:[(0,U.BX)(z.Jd,{typo:"$ex_180-16-bold",color:"$color_text_primary",display:"inline-block",children:[s," ",(0,U.tZ)(z.Jd,{typo:"$ex_180-16-bold",color:"$color_action_blue_primary",display:"inline-block",children:null!==(t=null==a?void 0:a.nickname)&&void 0!==t?t:"{nickname}"}),u]}),(0,U.tZ)(z.Jd,{typo:"$ex_180-16-med",color:"$color_text_primary",children:p})]}),(0,U.tZ)(z.Ug,{mt:"24px",py:"18px",gap:"24px",overflowX:"scroll",css:(0,J.iv)(ChatActionCard_templateObject()),children:(function(e){let t=[];for(let n=0;n<3;n++){let o="image".concat(n+1),r="title".concat(n+1),i="subtitle".concat(n+1),a="imageLink".concat(n+1);e[o]&&e[r]&&e[i]&&e[a]&&t.push({image:e[o],title:e[r],subtitle:e[i],imageLink:e[a]})}return t})(r).map((e,t)=>(0,U.tZ)(ActionCardItem,{index:t,image:e.image,title:e.title,subtitle:e.subtitle,imageLink:e.imageLink,onClick:e=>onClickImage(t,e)},t))})]}):null}let AdActionCard=e=>{let{message:t}=e,{variant:{feature_enabled:n}}=(0,el.i6)("fe-pb-chatRoom-actionCard"),{actionCard:o}=function(e){let t=(0,X.useMemo)(()=>{if((null==e?void 0:e.ads)&&(null==e?void 0:e.ads.length)>0)return e.ads.find(e=>"CHAT_WRTN_PICK"===e.inventoryCode)},[null==e?void 0:e.ads]);return{actionCard:t}}(t);return n&&(null==o?void 0:o.adCreativeId)?(0,U.tZ)(ChatActionCard,{adCreativeId:o.adCreativeId,message:t}):null};function DynamicChipListItem_templateObject(){let e=(0,D._)(["\n          &:hover {\n            & p {\n              color: ",";\n            }\n          }\n        "]);return DynamicChipListItem_templateObject=function(){return e},e}let DynamicChipListItem=e=>{let{title:t,onClick:n,divider:o}=e,r=t.match(/[\u0600-\u06FF]/g),i=r&&r.length>=10;return(0,U.BX)(eg.NU,{children:[(0,U.tZ)(z.zx,{onClick:n,width:"100%",paddingY:"8px",css:e=>{var t;return(0,J.iv)(DynamicChipListItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_text_brand)},children:(0,U.BX)(z.Ug,{dir:i?"rtl":"ltr",width:"100%",alignItems:"center",justifyContent:"space-between",children:[(0,U.tZ)(z.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",textAlign:i?"right":"left",children:t}),(0,U.tZ)(ei.JO,{as:eo.FNd,size:20})]})}),o]},t)};function DynamicChipList_templateObject(){let e=(0,D._)(["\n                    width: 100%;\n                    height: 1px;\n                    border-bottom: 1px solid\n                      ",";\n                    opacity: 0.5;\n                  "]);return DynamicChipList_templateObject=function(){return e},e}let DynamicChipList=e=>{let{message:t}=e,n=(0,G.T_)("chat.feature_chat_room.dynamic_chip"),{trackEvent:o}=(0,H.Ke)(),{searchParams:r}=(0,W.je)(),i=r.get("inventory"),a=(0,eC.sJ)(ey.GY),{generating:l,startGenerate:c}=tj(),{model:d,enableOptions:s,isUnitDisabled:u}=tg(),{chatId:p}=td(),_=(0,X.useRef)(null),{getModelByModelName:h}=(0,e_.pw)(),m=(0,X.useMemo)(()=>{if(t.length)return t[0]},[t]),g=(0,X.useMemo)(()=>{var e;return null!==(e=null==m?void 0:m.dynamicChips)&&void 0!==e?e:[]},[m]),trackHandleClickChipEvent=(e,t)=>{var n,r;let i={chatId:p,model_name:d.toUpperCase(),index:t,uuid:null!==(r=_.current)&&void 0!==r?r:""};o("click_command_chip",{command_chip_name:e.content,first_chip_type:"text",purpose:eq.sO?null===(n=h(d))||void 0===n?void 0:n.displayName:void 0,...i})},handleClickChip=(e,t)=>{c({message:e.content,model:d,mode:eA.ChatMode.CHAT,reroll:!1,commandChipType:"dynamic_chip",images:[]}),trackHandleClickChipEvent(e,t)};return((0,X.useEffect)(()=>{var e,n,r;(null===(e=t[0])||void 0===e?void 0:e._id)!=="NEW_ASSISTANT_MESSAGE_ID"&&t.length&&g.length&&(_.current=(0,eF.Z)(),o("expose_command_chip",{chat_id:p,msg_id:null===(n=t[0])||void 0===n?void 0:n._id,fe_msg_id:a,content:{...g.map(e=>e.content)},model_name:d.toUpperCase(),uuid:_.current,inventory_position:"key"===i?"key-in":"chip"===i?"cached_chip":null,purpose:eq.sO?null===(r=h(d))||void 0===r?void 0:r.displayName:void 0}))},[l,g]),!l&&(null==s?void 0:s.dynamicChip)&&!u&&g.length)?(0,U.BX)(z.gC,{py:20,width:"100%",gap:"12px",children:[(0,U.tZ)(z.Ug,{alignItems:"center",gap:"4px",children:(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_tertiary",children:n("description")})}),(0,U.tZ)(eg.WY,{children:g.map((e,t)=>(0,U.tZ)(DynamicChipListItem,{onClick:()=>handleClickChip(e,t),title:e.content,divider:t<(null==g?void 0:g.length)-1?(0,U.tZ)(z.xu,{css:e=>{var t;return(0,J.iv)(DynamicChipList_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)}}):void 0},e.content))})]}):null};var WarningMessage=e=>(0,U.BX)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e,children:[(0,U.tZ)("path",{fill:"#FA0",fillRule:"evenodd",d:"M8.583 1.728a.667.667 0 0 0-1.169 0L1.208 13.012a.667.667 0 0 0 .585.987h12.411a.667.667 0 0 0 .584-.988L8.583 1.729Z",clipRule:"evenodd"}),(0,U.tZ)("g",{fill:"#0D0D0C",children:(0,U.tZ)("path",{d:"M7.414 6.291h1.333v3.333H7.414V6.291ZM8.08 11.624a.667.667 0 1 0 0-1.333.667.667 0 0 0 0 1.333Z"})})]});let MessageErrorRenderer=e=>{let{message:t}=e,{user:n}=(0,eu.aF)(),o=(0,G.T_)(),r=(0,eB.sJ)(ey.h5),i=(0,eB.sJ)(ey._b),{model:a,enableOptions:l}=tg(),{lastUserMessage:c}=td(),{isLastMessage:d}=th(),{startGenerate:s,generating:u}=tj(),regenerate=async()=>{var e,t;c&&await s({message:null!==(t=null==c?void 0:c.content)&&void 0!==t?t:"",model:a,mode:eA.ChatMode.CHAT,reroll:!0,commandChipType:"",images:r.images,referenceIds:r.referenceIds,assignmentId:i||(null==c?void 0:null===(e=c.meta)||void 0===e?void 0:e.assignmentId)})};if(!t.error)return null;let p="error"===t.error.type&&(null==l?void 0:l.reroll)&&n;return p?(0,U.BX)(z.Ug,{p:"12px",width:"100%",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",justifyContent:"space-between",children:[(0,U.BX)(z.Ug,{gap:"8px",alignItems:"center",children:[(0,U.tZ)(z.xu,{display:"flex",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"$palette_gray_gray_50",p:"4px",children:(0,U.tZ)(WarningMessage,{})}),(0,U.tZ)(z.Jd,{typo:"$140-13-med",color:"$color_text_primary",children:o("feature_assignment.result.error.label")})]}),!u&&d&&(0,U.BX)(z.zx,{display:"flex",px:"16px",py:"12px",backgroundColor:"$color_surface_brand",flexDirection:"row",alignItems:"center",gap:"6px",borderRadius:"8px",onClick:regenerate,children:[(0,U.tZ)(ei.JO,{as:eo.AFx,color:"$color_icon_white",size:14}),(0,U.tZ)(z.Jd,{typo:"$100-14-bold",color:"$color_text_white",children:o("feature_assignment.result.error.button")})]})]}):(0,U.BX)(z.Ug,{gap:"8px",alignItems:"center",children:["warning"===t.error.type&&(0,U.tZ)(ei.JO,{as:eo.aq6,color:"$color_icon_quaternary",size:24}),(0,U.tZ)(z.Jd,{typo:"$100-16-med",color:"$color_text_tertiary",children:t.error.message})]})};function MessageImage_templateObject(){let e=(0,D._)(["\n        aspect-ratio: ",";\n\n        &:hover {\n          cursor: pointer;\n\n          > div {\n            display: flex;\n          }\n        }\n      "]);return MessageImage_templateObject=function(){return e},e}let MessageImage=e=>{let{url:t,onClick:n,border:o,aspectRatio:r,children:i}=e;return(0,U.tZ)(z.xu,{padding:"8px",borderRadius:"8px",backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",border:o?"1px solid":void 0,borderColor:"$color_outline_secondary",backgroundPosition:"center",width:"100%",display:"flex",alignItems:"flex-end",justifyContent:"flex-end",css:(0,J.iv)(MessageImage_templateObject(),r?"".concat(r):eq.vc?"4 / 3":"1"),onClick:n,children:i})};function MessageImageFooter_templateObject(){let e=(0,D._)(["\n        display: ",";\n      "]);return MessageImageFooter_templateObject=function(){return e},e}function MessageImageFooter_templateObject1(){let e=(0,D._)(["\n          background: rgba(0, 0, 0, 0.4);\n        "]);return MessageImageFooter_templateObject1=function(){return e},e}function MessageImageFooter_templateObject2(){let e=(0,D._)(["\n          background: rgba(0, 0, 0, 0.4);\n        "]);return MessageImageFooter_templateObject2=function(){return e},e}function MessageImageFooter_templateObject3(){let e=(0,D._)(["\n              background: rgba(0, 0, 0, 0.4);\n            "]);return MessageImageFooter_templateObject3=function(){return e},e}function MessageImageFooter_templateObject4(){let e=(0,D._)(["\n                  &:hover {\n                    background-color: ",";\n                  }\n                "]);return MessageImageFooter_templateObject4=function(){return e},e}function _templateObject5(){let e=(0,D._)(["\n                  &:hover {\n                    background-color: ",";\n                  }\n                "]);return _templateObject5=function(){return e},e}let MessageImageFooter=e=>{let{image:t,isVisible:n,toggleImageLike:o,toggleImageDislike:r,downloadUpScaledImage:i,eventProps:a}=e,l=(0,G.T_)(),[c,d]=X.useState(!1),s=n?"36px":"24px",{trackEvent:u}=(0,H.Ke)(),onClickDownload=e=>{e.stopPropagation(),u("img_download_done",{...a,is_upscale:!1,image_urls:t.url}),window.open(t.url,"_blank","noopener,noreferrer")},onClickDownloadUpScaled=(e,t)=>{e.stopPropagation(),i(t,d)};return(0,U.BX)(z.Ug,{css:(0,J.iv)(MessageImageFooter_templateObject(),n?"flex":"none"),gap:"6px",zIndex:1,children:[(0,U.tZ)(z.zx,{width:s,height:s,display:"flex",justifyContent:"center",alignItems:"center",css:(0,J.iv)(MessageImageFooter_templateObject1()),borderRadius:"4px",onClick:e=>{e.stopPropagation(),o(),eO.Am.alert(l("common.alert.message_evaluation"),"MESSAGE_EVALUATION")},children:(0,U.tZ)(ei.JO,{as:t.liked?eo.RYq:eo.EG6,color:"$color_icon_white",size:18})}),(0,U.tZ)(z.zx,{width:s,height:s,display:"flex",justifyContent:"center",alignItems:"center",css:(0,J.iv)(MessageImageFooter_templateObject2()),borderRadius:"4px",onClick:e=>{e.stopPropagation(),r(),eO.Am.alert(l("common.alert.message_evaluation"),"MESSAGE_EVALUATION")},children:(0,U.tZ)(ei.JO,{as:t.disliked?eo.xR:eo.Bnh,color:"$color_icon_white",size:18})}),(0,U.tZ)(V.Lt,{x:"right",renderOpener:e=>{let{open:t}=e;return(0,U.tZ)(z.zx,{width:s,height:s,display:"flex",justifyContent:"center",alignItems:"center",css:(0,J.iv)(MessageImageFooter_templateObject3()),borderRadius:"4px",onClick:e=>{e.stopPropagation(),u("click_img_download_btn",a),t()},children:(0,U.tZ)(ei.JO,{as:eo.WGO,color:"$color_icon_white",size:18})})},renderContent:e=>{let{close:t}=e;return(0,U.BX)(z.gC,{minWidth:"144px",backgroundColor:"$color_surface_ivory",border:"1px solid",borderColor:"$color_outline_secondary",borderRadius:"8px",overflow:"hidden",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.05), 0px 2px 4px -2px rgba(0, 0, 0, 0.10);",children:[(0,U.BX)(z.zx,{display:"flex",alignItems:"center",gap:"10px",px:"14px",py:"10px",css:e=>{var t;return(0,J.iv)(MessageImageFooter_templateObject4(),null==e?void 0:null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},onClick:e=>{onClickDownload(e),t()},children:[(0,U.tZ)(ei.JO,{as:eo.WGO,color:"$color_icon_secondary",size:16}),(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_secondary",children:l("ui.download.download_button")})]}),(0,U.BX)(z.zx,{display:"flex",alignItems:"center",gap:"10px",px:"14px",py:"10px",css:e=>{var t;return(0,J.iv)(_templateObject5(),null==e?void 0:null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},onClick:e=>onClickDownloadUpScaled(e,t),children:[c?(0,U.tZ)(eg.$j,{}):(0,U.tZ)(ei.JO,{as:eo.dps,color:"$color_icon_secondary",size:16}),(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_secondary",children:l("ui.download.download_upscale_button")})]})]})}})]})},MessageImageModal=e=>{let{imageUrlList:t,imageLinks:n,aspectRatioList:o,selectedImageIndex:r,closeModal:i,messageImageFooter:a,onClickPrevious:l,onClickNext:c,onClickExit:d,modalHeader:s}=e,[u,p]=X.useState(r),{trackEvent:_}=(0,H.Ke)();return(0,U.BX)(z.xu,{width:"600px",maxWidth:"80.1587302%",maxHeight:"80.0404585%",height:"auto",children:[s,(0,U.tZ)(MessageImage,{url:t[u],aspectRatio:null==o?void 0:o.at(u),onClick:n?()=>{_("click_img_url_btn",{type:"ai_search_img",url:null==n?void 0:n[u]}),window.open(null==n?void 0:n[u],"_blank","noopener,noreferrer")}:void 0,children:null==a?void 0:a(u)}),(0,U.tZ)(z.xu,{width:"100%",position:"fixed",bottom:28,left:0,right:0,children:(0,U.tZ)(z.Ug,{width:"100%",gap:"16px",justifyContent:"center",alignItems:"center",children:t.map((e,n)=>(0,U.tZ)(z.zx,{onClick:()=>p(n),children:(0,U.tZ)(z.xu,{width:12,height:12,borderRadius:"50%",backgroundColor:e===t[u]?"$color_icon_brand":"$color_icon_disabled"})},e))})}),(0,U.tZ)(z.zx,{onClick:()=>{u>0&&(p(u-1),null==l||l(u-1))},position:"fixed",left:20,top:"calc(50% - 48px)",style:{cursor:u===t.length-1?"not-allowed":"pointer"},children:(0,U.tZ)(ei.JO,{as:eo.k9_,size:48,color:"$color_text_white",opacity:0===u?.3:1,style:{cursor:0===u?"not-allowed":"pointer"}})}),(0,U.tZ)(z.zx,{onClick:()=>{u<t.length-1&&(p(u+1),null==c||c(u+1))},position:"fixed",right:20,top:"calc(50% - 48px)",style:{cursor:u===t.length-1?"not-allowed":"pointer"},children:(0,U.tZ)(ei.JO,{as:eo.xMl,size:48,color:"$color_text_white",opacity:u===t.length-1?.3:1})}),!s&&(0,U.tZ)(z.zx,{position:"fixed",top:"20px",right:"20px",onClick:()=>{null==d||d(u),i()},children:(0,U.tZ)(ei.JO,{as:eo.S5X,size:29,color:"$color_icon_white"})})]})},useUpScaledDownloadImage=()=>{let{user:e}=(0,eu.aF)(),{sendAirbridgeEvent:t}=(0,tO.lM)(),{trackEvent:n}=(0,H.Ke)(),o=X.useCallback(async(o,r,i,a,l,c,d)=>{if(!o.image)return;let s=o.image._id,u=o.image.imageUrls[r];try{a(!0);let o=await putGenerateUpScaledImageDownload({targetUrl:u.url,imageId:s,email:(null==e?void 0:e.email)||""}),i=document.createElement("a");i.href=o,i.setAttribute("download","true"),document.body.appendChild(i),i.click(),document.body.removeChild(i),n("img_download_done",{index:r,image_urls:u.url,is_upscale:!0,position:l,msg_id:c,chat_id:d}),t("download_image")}catch(e){console.error(e)}finally{a(!1),i()}},[e]);return{downloadUpScaledImage:o}};function MessageImageGallery_templateObject(){let e=(0,D._)(["\n                  display: flex;\n                  width: 50%;\n                "]);return MessageImageGallery_templateObject=function(){return e},e}function MessageImageGallery_templateObject1(){let e=(0,D._)(["\n                  display: grid;\n                  grid-template-columns: 1fr 1fr;\n                  grid-template-rows: 1fr;\n                  grid-gap: 16px;\n                  width: 100%;\n                "]);return MessageImageGallery_templateObject1=function(){return e},e}function MessageImageGallery_templateObject2(){let e=(0,D._)(["\n            ","\n          "]);return MessageImageGallery_templateObject2=function(){return e},e}let MessageImageGallery=e=>{var t;let{message:n}=e,{chatId:o}=td(),{isProMode:r}=tg(),{role:i}=n,{trackEvent:a}=(0,H.Ke)(),[l,c]=X.useState(0),{currentClientAction:d}=useDisplayGenerateStep(),{updateAssistantLoadingMessage:s}=useLoadingMessage(o),u=X.useMemo(()=>"assistant"===i&&n.image||null,[n,i]),p=u?u.imageUrls:[],{toggleImageLike:_,toggleImageDislike:h}=function(e){let{mutate:t}=useChatRoom(e),n=X.useRef(!1),{trackEvent:o}=(0,H.Ke)(),mutateMessage=(e,n,o)=>{t(t=>{if(!t)throw Error;return{...t,messages:t.messages.map(t=>Array.isArray(t)?t.map(t=>t._id===e._id&&t.image?{...t,image:{...t.image,imageUrls:t.image.imageUrls.map((e,t)=>t===n?{...e,...o}:e)}}:t):t.image?{...t,image:{...t.image,imageUrls:t.image.imageUrls.map((e,t)=>t===n?{...e,...o}:e)}}:t)}},{revalidate:!1,populateCache:!0})},logImageEvalEvent=(e,t,n)=>{if(!e.image)return;let r=e.image.imageUrls[t];"liked"===n&&o("click_like_btn",{chat_id:e._id,chat_index:0,feature_menu:"image",model_name:String(e.model).toUpperCase(),onoff:!r.liked,image_urls:r.url,image_id:e.image._id,position:"chat"}),"disliked"===n&&o("click_unlike_btn",{chat_id:e._id,chat_index:0,feature_menu:"image",model_name:String(e.model).toUpperCase(),onoff:!r.disliked,position:"chat",image_urls:r.url,image_id:e.image._id,msg_id:e._id})},toggleImageLike=async(e,t)=>{try{if(n.current||(n.current=!0,!e.image))return;let o=e.image._id,r={liked:e.image.imageUrls[t].liked,disliked:e.image.imageUrls[t].disliked};!r.liked&&r.disliked?Object.assign(r,{liked:!0,disliked:!1}):Object.assign(r,{liked:!r.liked}),mutateMessage(e,t,r),await evaluateImage({imageId:o,data:{index:t,...r}})}finally{n.current=!1,logImageEvalEvent(e,t,"liked")}},toggleImageDislike=async(e,t)=>{try{if(n.current||(n.current=!0,!e.image))return;let o=e.image._id,r={liked:e.image.imageUrls[t].liked,disliked:e.image.imageUrls[t].disliked};!r.disliked&&r.liked?Object.assign(r,{liked:!1,disliked:!0}):Object.assign(r,{disliked:!r.disliked}),mutateMessage(e,t,r),await evaluateImage({imageId:o,data:{index:t,...r}})}finally{n.current=!1,logImageEvalEvent(e,t,"disliked")}};return{toggleImageLike,toggleImageDislike}}(o||""),{downloadUpScaledImage:m}=useUpScaledDownloadImage(),g=X.useMemo(()=>{var e;return"user"===i?n.images||[]:(null===(e=n.image)||void 0===e?void 0:e.imageUrls.map(e=>e.url))||[]},[n.images,null===(t=n.image)||void 0===t?void 0:t.imageUrls,i]),x=n.image&&"SKELETON"===n.image._id,v=1===g.length,onClickMoveImage=(e,t)=>{a("click_next_result_btn",{type:r?"pro_mode_img":"ai_image_img",current_index:t,direction:e})},onClickExit=e=>{a("click_detailed_view_exit_btn",{type:r?"pro_mode_img":"ai_image_img",current_index:e})};return((0,X.useEffect)(()=>{"show_image_skeleton"===d&&s({isGenerateImage:!0})},[d,s]),0!==g.length||x)?(0,U.tZ)(V.CO,{zIndex:9,renderOpener:e=>{let{openModal:t}=e;return(0,U.BX)(z.xu,{css:(0,J.iv)(MessageImageGallery_templateObject2(),v?(0,J.iv)(MessageImageGallery_templateObject()):(0,J.iv)(MessageImageGallery_templateObject1())),children:[x?eq.vc?(0,U.BX)(U.HY,{children:[(0,U.tZ)(V.Od,{borderRadius:"8px",aspectRatio:"4 / 3"}),(0,U.tZ)(V.Od,{borderRadius:"8px",aspectRatio:"4 / 3"}),(0,U.tZ)(V.Od,{borderRadius:"8px",aspectRatio:"4 / 3"}),(0,U.tZ)(V.Od,{borderRadius:"8px",aspectRatio:"4 / 3"})]}):(0,U.tZ)(U.HY,{children:(0,U.tZ)(V.Od,{borderRadius:"8px",aspectRatio:"1"})}):null,g.map((e,r)=>(0,U.tZ)(MessageImage,{url:e,onClick:()=>{c(r),a("expose_img_expand",{index:r,image_urls:e,msg_id:n._id,chat_id:o||""}),t()},children:"assistant"===i&&p.length>0&&(0,U.tZ)(MessageImageFooter,{image:p[r],toggleImageLike:()=>_(n,r),toggleImageDislike:()=>h(n,r),eventProps:{index:r,position:"chat",msg_id:n._id,chat_id:o||""},downloadUpScaledImage:(e,t)=>m(n,r,e,t,"chat",n._id,o||"")})},e))]})},renderContent:e=>{let{closeModal:t}=e;return(0,U.tZ)(z.xu,{display:"flex",justifyContent:"center",children:(0,U.tZ)(MessageImageModal,{imageUrlList:g,selectedImageIndex:l,closeModal:t,onClickPrevious:e=>onClickMoveImage("previous",e),onClickNext:e=>onClickMoveImage("next",e),onClickExit:e=>onClickExit(e),messageImageFooter:e=>"assistant"===i&&p.length>0?(0,U.tZ)(MessageImageFooter,{image:p[e],isVisible:!0,toggleImageLike:()=>_(n,e),toggleImageDislike:()=>h(n,e),eventProps:{index:e,position:"expand",msg_id:n._id,chat_id:o||""},downloadUpScaledImage:(t,r)=>m(n,e,t,r,"expand",n._id,o||"")}):null})})}}):null},MessageAttachmentGallery=e=>{var t,n;let{message:o}=e,{data:r}=(0,ew.$I)(null==o?void 0:o.chatId),i=(0,eC.sJ)(ey.Bb),{totalCount:a}=(0,eC.sJ)(ey.h5),l=(0,eC.sJ)(ey.CU),{getModelByModelName:c}=(0,e_.pw)(),{unit:d,isProMode:s}=tg(),u={model_name:null==d?void 0:d.name.toUpperCase(),uploadPosition:"home",purpose:null===(t=c(o.model))||void 0===t?void 0:t.displayName,is_pro_mode:s,current_box_number:a},p=!r&&"streaming"===l,_=(0,X.useMemo)(()=>(null==r?void 0:r.filter(e=>{var t,n;return(null===(t=o.referenceIds)||void 0===t?void 0:t.includes(e._id))||e.url&&(null===(n=o.images)||void 0===n?void 0:n.includes(e.url))}))||[],[r,o.referenceIds,o.images]),h=(0,X.useMemo)(()=>p?null==i?void 0:i.some(e=>"file"===e.type||"link"===e.type):null==_?void 0:_.some(e=>"FileReferenceItem"===e.kind||"LinkReferenceItem"===e.kind),[_,i,p]),m=(0,X.useMemo)(()=>p?i:formatReferenceData(_),[_,i,p]);return"assistant"===o.role||(null===(n=o.meta)||void 0===n?void 0:n.assignmentId)?null:h?(0,U.tZ)(ChatAttachmentList,{references:m,eventProperties:u}):(0,U.tZ)(MessageImageGallery,{message:o})},formatReferenceData=e=>e.map(e=>"FileReferenceItem"===e.kind?{_id:e._id,type:"file",status:"success",title:e.title,extension:e.extension,url:e.fileUrl}:"LinkReferenceItem"===e.kind?{_id:e._id,type:"link",status:"success",url:e.url,title:e.title,favicon:e.favicon}:"ImageReferenceItem"===e.kind?{_id:e._id,type:"image",status:"success",url:e.url}:void 0),getImageWidth=e=>0===e?"calc(50% - 8px)":1===e||2===e?"calc(25%  - 8px)":"calc((100% / 6) - 8px)",getImageHeight=e=>e<3?192:120;function ImageListSkeleton_templateObject(){let e=(0,D._)(["\n        row-gap: 10px;\n        column-gap: 8px;\n      "]);return ImageListSkeleton_templateObject=function(){return e},e}let ImageListSkeleton=()=>(0,U.tZ)(z.gC,{gap:"10px",children:(0,U.tZ)(z.xu,{flexWrap:"wrap",display:"flex",flexDirection:"row",css:(0,J.iv)(ImageListSkeleton_templateObject()),children:Array.from({length:9}).map((e,t)=>(0,U.BX)(z.gC,{gap:"8px",width:getImageWidth(t),children:[(0,U.tZ)(V.Od,{width:"100%",height:"".concat(getImageHeight(t),"px"),borderRadius:"4px"}),(0,U.tZ)(V.Od,{width:"56px",height:"20px",borderRadius:"4px"}),(0,U.tZ)(V.Od,{width:"100%",height:"12px",borderRadius:"4px"})]},t))})});var tK=n(2306);function ImageShowMorePopupController_templateObject(){let e=(0,D._)(["\n                    &:hover {\n                      background-color: ",";\n                    }\n                  "]);return ImageShowMorePopupController_templateObject=function(){return e},e}function ImageShowMorePopupController_templateObject1(){let e=(0,D._)(["\n                    &:hover {\n                      background-color: ",";\n                    }\n                  "]);return ImageShowMorePopupController_templateObject1=function(){return e},e}function ImageShowMorePopupController_templateObject2(){let e=(0,D._)(["\n              &:hover {\n                background-color: ",";\n              }\n            "]);return ImageShowMorePopupController_templateObject2=function(){return e},e}let ImageShowMorePopupController=e=>{var t,n;let{defaultImageList:o,renderContent:r}=e,{trackEvent:i}=(0,H.Ke)(),a=(0,N.ac)("(min-width: 1280px)"),l=(0,X.useRef)(null),c=(0,G.T_)(),{opened:d,changeOpened:s}=(0,tK.X)(),u=(0,eC.rb)(ey.QC),[p,_]=(0,X.useState)(),onClickMoveImage=(e,t)=>{i("click_next_result_btn",{type:"ai_search_img",current_index:t,direction:e})},scrollToTop=()=>{var e;null==l||null===(e=l.current)||void 0===e||e.scrollTo({top:0,behavior:"smooth"})},h=o.findIndex(e=>e.related_content_id===p),m=(0,X.useMemo)(()=>{let e=o.find(e=>e.related_content_id===p),t=o.filter(e=>e.related_content_id!==p);return e?[e,...t]:t},[o,p]),g=!(null===(t=o[h-1])||void 0===t?void 0:t.related_content_id),x=!(null===(n=o[h+1])||void 0===n?void 0:n.related_content_id);return(0,X.useEffect)(()=>{_(o[0].related_content_id),scrollToTop()},[o]),(0,U.BX)(z.gC,{height:"100%",children:[(0,U.BX)(z.Ug,{justifyContent:"space-between",alignItems:"center",padding:"16px 20px 8px 20px",children:[(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(ei.JO,{as:eo._zb,size:16}),(0,U.tZ)(z.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:c("chat.feature_chat_room.section.image")})]}),(0,U.BX)(z.Ug,{gap:"8px",children:[(0,U.tZ)(z.zx,{width:20,height:20,borderRadius:"4px",onClick:()=>{var e;let t=null===(e=o[h-1])||void 0===e?void 0:e.related_content_id;t&&(scrollToTop(),onClickMoveImage("previous",h-1),_(t))},css:g?void 0:e=>{var t;return(0,J.iv)(ImageShowMorePopupController_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},children:(0,U.tZ)(ei.JO,{as:eo.k9_,size:20,color:g?"$color_icon_disabled":"$color_icon_primary"})}),(0,U.tZ)(z.zx,{width:20,height:20,borderRadius:"4px",onClick:()=>{var e;let t=null===(e=o[h+1])||void 0===e?void 0:e.related_content_id;t&&(scrollToTop(),onClickMoveImage("next",h+1),_(t))},css:x?void 0:e=>{var t;return(0,J.iv)(ImageShowMorePopupController_templateObject1(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},children:(0,U.tZ)(ei.JO,{as:eo.xMl,size:20,color:x?"$color_icon_disabled":"$color_icon_primary"})}),(0,U.tZ)(z.zx,{width:20,height:20,borderRadius:"4px",onClick:()=>{i("click_detailed_view_exit_btn",{type:"ai_search_img",current_index:h},()=>{!d&&a&&s(!0),u()})},css:e=>{var t;return(0,J.iv)(ImageShowMorePopupController_templateObject2(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},children:(0,U.tZ)(ei.JO,{as:eo.S5X,size:20,color:"$color_icon_primary"})})]})]}),r({imageList:m,selectImage:e=>{var t;let{id:n}=e;_(n),scrollToTop(),i("click_detailed_img_search_result",{index:h,url:null===(t=m[h])||void 0===t?void 0:t.link})},renderContentRef:l})]})};function ImageShowMorePopupLayout_templateObject(){let e=(0,D._)(["\n              border: 1px solid ",";\n              box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.05);\n            "]);return ImageShowMorePopupLayout_templateObject=function(){return e},e}function ImageShowMorePopupLayout_templateObject1(){let e=(0,D._)(["\n            border: 1px solid ",";\n            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.05);\n          "]);return ImageShowMorePopupLayout_templateObject1=function(){return e},e}let ImageShowMorePopupLayout=e=>{let{children:t}=e,{opened:n,changeOpened:o}=(0,tK.X)(),r=(0,N.ac)("(min-width: 1280px)"),i=(0,eC.rb)(ey.QC);return(0,X.useEffect)(()=>{n||o(!1)},[n,o]),r?(0,U.tZ)(z.xu,{position:"absolute",left:"calc(100% + 16px)",children:(0,U.BX)(z.Ug,{children:[(0,U.tZ)(z.xu,{css:e=>{var t;return(0,J.iv)(ImageShowMorePopupLayout_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},position:"fixed",top:"calc(56px + 8px)",width:"19.7916667%",maxWidth:"380px",minWidth:"328px",bottom:"8px",borderRadius:"16px",backgroundColor:"$color_bg_screen",zIndex:9,children:t}),(0,U.tZ)(z.xu,{width:16})]})}):(0,U.BX)(U.HY,{children:[(0,U.tZ)(V.YM,{opened:!0,zIndex:9,onClick:i}),(0,U.tZ)(z.xu,{position:"fixed",backgroundColor:"$color_bg_screen",borderRadius:"16px",css:e=>{var t;return(0,J.iv)(ImageShowMorePopupLayout_templateObject1(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},width:328,top:0,right:0,bottom:0,zIndex:9,children:t})]})};function MessageImageListItem_templateObject(){let e=(0,D._)(["\n        cursor: pointer;\n\n        &:hover {\n          .itemTitle {\n            text-decoration: underline;\n          }\n\n          .itemImage {\n            box-shadow: 0px 4px 10px 0px rgba(0, 0, 0, 0.1);\n          }\n        }\n      "]);return MessageImageListItem_templateObject=function(){return e},e}function MessageImageListItem_templateObject1(){let e=(0,D._)(["\n            display: -webkit-box;\n            max-height: 12px;\n            line-height: 100%;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n            overflow: hidden;\n            word-break: break-word;\n          "]);return MessageImageListItem_templateObject1=function(){return e},e}let MessageImageListItem=e=>{var t;let{item:n,width:o,height:r,renderFaviconItem:i,renderTitle:a,...l}=e;return(0,U.BX)(z.gC,{gap:"8px",width:o,css:(0,J.iv)(MessageImageListItem_templateObject()),...l,children:[(0,U.tZ)("img",{height:r,style:{display:"block",objectFit:"cover",cursor:"pointer",width:"100%",borderRadius:"12px"},src:n.thumbnail,className:"itemImage"}),i?i({favicon:null==n?void 0:n.favicon,source:null==n?void 0:n.source}):(0,U.BX)(z.Ug,{gap:"4px",children:[(null==n?void 0:n.favicon)&&(0,U.tZ)("img",{style:{width:10,height:10,borderRadius:"50%"},src:n.favicon,alt:"".concat(n.source,"-favicon")}),(0,U.tZ)(z.Jd,{typo:"$100-12-reg",color:"$color_text_secondary",children:n.source})]}),a?a({title:null!==(t=null==n?void 0:n.title)&&void 0!==t?t:""}):(0,U.tZ)(z.Jd,{className:"itemTitle",typo:"$100-12-med",color:"$color_text_primary",css:(0,J.iv)(MessageImageListItem_templateObject1()),children:n.title})]},n.related_content_id)};function ImageShowMorePopup_templateObject(){let e=(0,D._)(["\n                border-bottom: 1px solid\n                  ",";\n              "]);return ImageShowMorePopup_templateObject=function(){return e},e}function ImageShowMorePopup_templateObject1(){let e=(0,D._)(["\n                    display: -webkit-box;\n                    max-height: 44px;\n                    line-height: 140%;\n                    -webkit-line-clamp: 2;\n                    -webkit-box-orient: vertical;\n                    overflow: hidden;\n                    word-break: break-word;\n                  "]);return ImageShowMorePopup_templateObject1=function(){return e},e}let ImageShowMorePopup=e=>{let{trackEvent:t}=(0,H.Ke)(),{imageList:n}=e,openMainImageLink=e=>{(null==e?void 0:e.link)&&(t("click_img_url_btn",{type:"ai_search_img",url:null==e?void 0:e.link}),window.open(null==e?void 0:e.link,"_blank"))};return(0,U.tZ)(ImageShowMorePopupLayout,{children:(0,U.tZ)(ImageShowMorePopupController,{defaultImageList:n,renderContent:e=>{let{imageList:t,selectImage:n,renderContentRef:o}=e;return(0,U.BX)(z.gC,{height:"100%",overflowY:"auto",ref:o,children:[(0,U.tZ)(MessageImageListItem,{width:"100%",paddingX:"12px",paddingTop:"4px",paddingBottom:"20px",item:t[0],css:e=>{var t;return(0,J.iv)(ImageShowMorePopup_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},onClick:()=>{openMainImageLink(t[0])},renderFaviconItem:e=>{var n;let{favicon:o,source:r}=e;return(0,U.BX)(z.Ug,{width:"fit-content",gap:"4px",borderRadius:"30px",backgroundColor:"$color_surface_tertiary",padding:"6px 8px",children:[(null===(n=t[0])||void 0===n?void 0:n.favicon)&&(0,U.tZ)("img",{style:{width:10,height:10,borderRadius:"50%"},src:o,alt:"".concat(r,"-favicon")}),(0,U.tZ)(z.Jd,{typo:"$100-12-reg",color:"$color_text_secondary",children:r})]})},renderTitle:e=>{let{title:t}=e;return(0,U.tZ)(z.Jd,{className:"itemTitle",typo:"$100-16-semi",color:"$color_text_primary",css:(0,J.iv)(ImageShowMorePopup_templateObject1()),children:t})}}),(0,U.tZ)(z.xu,{display:"flex",paddingX:"8px",paddingTop:"8px",paddingBottom:"16px",flexWrap:"wrap",children:t.slice(1,t.length).map(e=>(0,U.tZ)(MessageImageListItem,{width:"50%",height:"102px",paddingX:"4px",paddingY:"8px",item:e,onClick:()=>{var t;n({id:null!==(t=e.related_content_id)&&void 0!==t?t:""})}},e.related_content_id))})]})}})})};function MessageImageList_templateObject(){let e=(0,D._)(["\n          row-gap: 10px;\n          column-gap: 8px;\n          flex-wrap: wrap;\n          @media (max-width: 768px) {\n            overflow-x: auto;\n            white-space: nowrap;\n            flex-wrap: nowrap;\n            & > * {\n              min-width: 200px;\n              flex-shrink: 0;\n            }\n          }\n        "]);return MessageImageList_templateObject=function(){return e},e}let MessageImageList=e=>{let{messageId:t,chatId:n,imageReferences:o=[]}=e,{opened:r,changeOpened:i}=(0,tK.X)(),a=(0,N.ac)("(min-width: 1280px)"),[l,c]=(0,X.useState)(),[d,s]=(0,eC.FV)(ey.QC),u=(0,eC.rb)(ey.QC),{trackEvent:p}=(0,H.Ke)(),_=(0,X.useMemo)(()=>({msg_id:t,chat_id:n}),[t,n]),trackHoverSearchResult=e=>{let{index:t,url:n}=e;p("hover_img_search_result",{index:t,url:n,..._})},trackClickImageSearchResult=e=>{let{index:t,url:n}=e;p("click_img_search_result",{index:t,url:n,..._})},h=(0,X.useMemo)(()=>o&&o.length>0?o.slice(0,9):[],[o]),m=(0,X.useMemo)(()=>{let e=h.findIndex(e=>e.related_content_id===l),t=o[e],n=o.slice(9,o.length).filter(e=>e.related_content_id!==l);return t?[t,...n]:n},[h,o,l]);(0,X.useEffect)(()=>{!a&&d.messageId&&i(!1),r&&a&&u()},[d,a,r,u,i]);let g="NEW_ASSISTANT_MESSAGE_ID"===d.messageId||d.messageId===t&&m.length;return(0,X.useEffect)(()=>{if(!o||0===o.length||"NEW_ASSISTANT_MESSAGE_ID"===t)return;let e=o.slice(0,9);p("expose_img_search_result",{urls:e.map(e=>e.link),..._})},[o,t]),(0,U.BX)(U.HY,{children:[(0,U.tZ)(z.xu,{display:"flex",flexDirection:"row",css:(0,J.iv)(MessageImageList_templateObject()),children:h.map((e,n)=>(0,U.tZ)(MessageImageListItem,{onMouseOver:()=>{trackHoverSearchResult({index:n,url:null==e?void 0:e.link})},onClick:()=>{trackClickImageSearchResult({index:n,url:null==e?void 0:e.link}),c(e.related_content_id),s({messageId:t}),i(!1)},item:e,width:getImageWidth(n),height:getImageHeight(n)},e.related_content_id))}),g?(0,U.tZ)(ImageShowMorePopup,{imageList:m}):null]})};function MessageImageSearchResult_templateObject(){let e=(0,D._)(["\n            cursor: pointer;\n          "]);return MessageImageSearchResult_templateObject=function(){return e},e}function MessageImageSearchResult_templateObject1(){let e=(0,D._)(["\n              transform: rotate(","deg);\n              transition: transform 0.3s;\n            "]);return MessageImageSearchResult_templateObject1=function(){return e},e}let MessageImageSearchResult=e=>{var t;let{message:n,viewBrandAd:o}=e,{isLastMessage:r}=th(),{currentStepName:i,currentClientAction:a,currentImageReferenceResults:l}=useDisplayGenerateStep(),{trackEvent:c}=(0,H.Ke)(),d=(0,G.T_)(),{isStreaming:s}=useDisplayStreamMessage(!0),u=(0,eC.rb)(ey.QC),{value:p,setItem:_}=(0,N._)("collapse_history_".concat(n.chatId),{}),[h,m]=X.useState(!1),[g,x]=X.useState(null===(t=p[n._id])||void 0===t?void 0:t.image),v=(0,X.useMemo)(()=>({msg_id:n._id,chat_id:n.chatId}),[n]),f=(0,X.useMemo)(()=>n.imageReferenceResults?n.imageReferenceResults:l||[],[n.imageReferenceResults,l]);if((0,X.useEffect)(()=>{p&&p[n._id]&&x(p[n._id].image)},[]),(0,X.useEffect)(()=>{g||u()},[g,u]),(0,X.useEffect)(()=>{if(o&&x(!0),!s||"browsing_server_search_image_search_tool_result"===i&&!(null==f?void 0:f.length)||f&&f.length>0){m(!1);return}h||"browsing_server_search_query"!==i||"show_skeleton"!==a||m(!0)},[h,i,a,f,s,r,o]),f&&0!==f.length||h)return(0,U.tZ)(z.gC,{width:"100%",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",gap:"10px",padding:"12px 16px",children:(0,U.BX)(eg.mQ,{children:[(0,U.BX)(z.Ug,{justifyContent:"space-between",alignItems:"center",css:(0,J.iv)(MessageImageSearchResult_templateObject()),onClick:()=>{c("click_img_search_result_show_btn",{type:g?"open":"close",...v});let e={...p,[n._id]:{...p[n._id],image:!g}};_(e),x(e=>!e)},children:[(0,U.BX)(z.Ug,{width:"100%",gap:"6px",alignItems:"center",children:[(0,U.tZ)(ei.JO,{as:eo._zb,color:"$color_icon_brand",size:16}),(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_primary",children:d("chat.feature_chat_room.section.image")})]}),(0,U.tZ)(z.xu,{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",css:(0,J.iv)(MessageImageSearchResult_templateObject1(),g?180:0),children:(0,U.tZ)(ei.JO,{as:eo.I4Y,size:16,color:"$color_icon_secondary"})})]}),g?null:h?(0,U.tZ)(ImageListSkeleton,{}):(0,U.tZ)(MessageImageList,{messageId:n._id,chatId:n.chatId,imageReferences:f})]})})};function AssignmentTopicChip_templateObject(){let e=(0,D._)(["\n            cursor: pointer;\n          "]);return AssignmentTopicChip_templateObject=function(){return e},e}function AssignmentTopicChip_templateObject1(){let e=(0,D._)(["\n                    white-space: pre-wrap;\n                  "]);return AssignmentTopicChip_templateObject1=function(){return e},e}let AssignmentTopicChip=e=>{let{message:t,assignmentId:n,eventProperties:o}=e,{trackEvent:r}=(0,H.Ke)();return(0,U.tZ)(V.CO,{renderOpener:e=>{let{openModal:i}=e;return(0,U.tZ)(z.Ug,{onMouseEnter:()=>r("hover_wait_phrase_generate",o),padding:"4px 6px",backgroundColor:"$color_surface_accent_bg_blue",borderRadius:"12px",gap:"4px",onClick:()=>{i(),r("expose_ai_writing_assignment_info",{assignment_id:n})},css:(0,J.iv)(AssignmentTopicChip_templateObject()),children:(0,U.tZ)(z.Jd,{typo:"$100-12-reg",color:"$color_action_blue_primary",children:t})},t)},renderContent:e=>{let{closeModal:t}=e;return(0,U.tZ)(z.xu,{children:(0,U.tZ)(AssignmentOutlineModal,{assignmentId:n,closeModal:t})})}})},AssignmentOutlineModal=e=>{let{assignmentId:t,closeModal:n}=e,{trackEvent:o}=(0,H.Ke)(),{data:r}=useGetAssignmentOutline(t),i=(0,G.T_)("chat.feature_chat_room");return(0,U.BX)(z.gC,{backgroundColor:"$color_bg_screen",width:"508px",boxShadow:"0px 0px 10px 0px rgba(0, 0, 0, 0.05)",border:"1px solid",borderRadius:"20px",borderColor:"$color_outline_tertiary",children:[(0,U.BX)(z.Ug,{padding:"24px",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid",borderColor:"$color_outline_tertiary",children:[(0,U.tZ)(z.Jd,{typo:"$100-20-bold",color:"$color_text_primary",children:i("assignment.chip")}),(0,U.tZ)(z.zx,{onClick:n,children:(0,U.tZ)(ei.JO,{as:eo.S5X,size:20,color:"$color_icon_primary"})})]}),(0,U.BX)(z.gC,{alignItems:"flex-end",padding:"24px",gap:"32px",children:[(0,U.tZ)(z.gC,{width:"100%",gap:"20px",minHeight:"30vh",maxHeight:"50vh",overflowY:"auto",children:null==r?void 0:r.map(e=>(0,U.BX)(z.gC,{gap:"12px",children:[(0,U.tZ)(z.Jd,{typo:"$100-16-semi",color:"$color_text_primary",children:e.label}),(0,U.tZ)(z.xu,{backgroundColor:"$color_surface_tertiary",borderRadius:"5px",padding:"11px 16px",children:(0,U.tZ)(z.Jd,{typo:"$160-16-med",color:"$color_text_secondary",css:(0,J.iv)(AssignmentTopicChip_templateObject1()),children:e.content})})]},e._id))}),(0,U.tZ)(z.xu,{width:"108px",children:(0,U.tZ)(z.Wv,{hierarchy:"$primary",size:"$large_01",onClick:n,full:!0,children:i("assignment.confirm")})})]})]})},ReferenceTagChip=e=>{let{message:t,icon:n,iconVisible:o}=e;return(0,U.BX)(z.Ug,{padding:"4px 6px",backgroundColor:"$color_surface_tertiary",borderRadius:"12px",gap:"4px",children:[n?(0,U.tZ)("img",{style:{width:10,height:10,borderRadius:"50%"},src:n,alt:t}):!!o&&(0,U.tZ)(z.kC,{width:"10px",height:"10px",backgroundColor:"$color_outline_accent_red",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,U.tZ)(ei.JO,{as:eo.qTh,size:8,color:"$color_icon_ivory"})}),(0,U.tZ)(z.Jd,{typo:"$100-12-reg",color:"$color_text_secondary",children:t})]},t)};function SearchResultInfoChip_templateObject(){let e=(0,D._)(["\n        cursor: pointer;\n      "]);return SearchResultInfoChip_templateObject=function(){return e},e}function SearchResultInfoChip_templateObject1(){let e=(0,D._)(["\n              cursor: ",";\n            "]);return SearchResultInfoChip_templateObject1=function(){return e},e}function SearchResultInfoChip_templateObject2(){let e=(0,D._)(["\n              cursor: pointer;\n            "]);return SearchResultInfoChip_templateObject2=function(){return e},e}function SearchResultInfoChip_templateObject3(){let e=(0,D._)(["\n                border: 1px solid ",";\n              "]);return SearchResultInfoChip_templateObject3=function(){return e},e}function SearchResultInfoChip_templateObject4(){let e=(0,D._)(["\n                  display: -webkit-box;\n                  max-height: 40px;\n                  line-height: 140%;\n                  -webkit-line-clamp: 2;\n                  -webkit-box-orient: vertical;\n                  overflow: hidden;\n                  word-break: break-word;\n                "]);return SearchResultInfoChip_templateObject4=function(){return e},e}let SearchResultInfoChip=e=>{var t,n,o;let{item:r,messageIndex:i,message:a,index:l}=e,[c,d]=(0,X.useState)(!1),{trackEvent:s}=(0,H.Ke)(),{getModelByModelName:u}=(0,e_.pw)(),p=a.searchResult,_=null==p?void 0:null===(t=p[l])||void 0===t?void 0:t.siteName,h=null==p?void 0:null===(n=p[l])||void 0===n?void 0:n.title,m=null==p?void 0:null===(o=p[l])||void 0===o?void 0:o.snippet,onClickAdditionalInfo=(e,t)=>{var n;s("click_chat_recommend_link",{chat_id:a.chatId,model_name:a.model.toUpperCase(),index:t,link:e.link,msg_id:a._id,type:"wait_phrase",position:"chat",messageIndex:i,purpose:null===(n=u(a.model))||void 0===n?void 0:n.displayName}),e.link&&(window.navigator.userAgent.toLowerCase().includes("iphone")||window.navigator.userAgent.toLowerCase().includes("android")?window.location.assign(e.link):window.open(e.link,"_blank","noopener noreferrer"))},onHoverAdditionalInfo=e=>{let t={url:e.link};s("hover_wait_phrase_generate",t)};return(0,U.tZ)(z.xu,{onMouseOver:()=>{r.link&&(onHoverAdditionalInfo(r),d(!0))},onClick:()=>onClickAdditionalInfo(r,l),onMouseLeave:()=>d(!1),css:(0,J.iv)(SearchResultInfoChip_templateObject()),children:(0,U.tZ)(V.Lt,{open:c,x:"left",padding:0,renderOpener:()=>(0,U.BX)(z.Ug,{css:(0,J.iv)(SearchResultInfoChip_templateObject1(),r.link?"pointer":"default"),padding:"4px 6px",overflow:"hidden",backgroundColor:c?"$color_surface_tertiary_hover":"$color_surface_tertiary",borderRadius:"12px",gap:"4px",children:[r.icon&&(0,U.tZ)("img",{style:{width:10,height:10,borderRadius:"50%"},src:r.icon,alt:r.content}),(0,U.tZ)(z.Jd,{typo:"$100-12-reg",color:"$color_text_secondary",children:r.content})]}),renderContent:()=>(0,U.BX)(z.xu,{css:(0,J.iv)(SearchResultInfoChip_templateObject2()),children:[(0,U.tZ)(z.xu,{height:"7px"}),(0,U.BX)(z.gC,{padding:"12px 16px",width:"228px",backgroundColor:"$color_bg_screen",borderRadius:"8px",css:e=>{var t;return(0,J.iv)(SearchResultInfoChip_templateObject3(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},children:[(0,U.BX)(z.Ug,{gap:"6px",alignItems:"center",children:[r.icon&&(0,U.tZ)("img",{style:{width:16,height:16,borderRadius:"50%"},src:r.icon,alt:r.content}),(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_secondary",children:_})]}),(0,U.tZ)(z.xu,{height:"6px"}),(0,U.tZ)(z.Jd,{typo:"$140-12-med",color:"$color_text_primary",children:h}),(0,U.tZ)(z.xu,{height:"4px"}),(0,U.tZ)(z.Jd,{typo:"$140-12-reg",color:"$color_text_secondary",css:(0,J.iv)(SearchResultInfoChip_templateObject4()),children:m})]})]})})})};var tV=JSON.parse('{"v":"4.8.0","meta":{"g":"LottieFiles AE 3.5.7","a":"","k":"","d":"","tc":""},"fr":30,"ip":0,"op":40,"w":700,"h":700,"nm":"Circle 2","ddd":1,"assets":[],"layers":[{"ddd":1,"ind":2,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"rx":{"a":0,"k":0,"ix":8},"ry":{"a":1,"k":[{"i":{"x":[0],"y":[1]},"o":{"x":[1],"y":[0]},"t":0,"s":[0]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":30,"s":[720]},{"t":39,"s":[720]}],"ix":9,"x":"var $bm_rt;\\n$bm_rt = loopOutDuration(\'cycle\', 0);"},"rz":{"a":0,"k":0,"ix":10},"or":{"a":0,"k":[0,0,0],"ix":7},"p":{"a":0,"k":[350,350,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[500,500],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.282348632813,0.145111083984,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":40,"st":0,"bm":0}],"markers":[]}');function MessageStepRender_templateObject(){let e=(0,D._)(["\n            cursor: pointer;\n          "]);return MessageStepRender_templateObject=function(){return e},e}function MessageStepRender_templateObject1(){let e=(0,D._)(["\n              transform: rotate(","deg);\n              transition: transform 0.3s;\n            "]);return MessageStepRender_templateObject1=function(){return e},e}let MessageStepRender=e=>{let{message:t,messageIndex:n}=e,{trackEvent:o}=(0,H.Ke)(),{generating:r}=tj(),{enableOptions:i,unit:a,isProMode:l}=tg(),{role:c,isLastMessage:d}=th(),{chatId:s}=td(),u=(0,eC.sJ)(ey.GY),p=(0,G.T_)(),_=(0,eC.sJ)(ey.h5),h=(0,eC.sJ)(ey.UB),m=(0,eC.sJ)(ey._b),{generateStep:g}=useDisplayGenerateStep(),{streamMessage:x,isStreaming:v}=useDisplayStreamMessage(d),f=useCurrentText(t.content),b=X.useMemo(()=>t.generateStep||[],[t.generateStep]),[y,C]=X.useState(!0),k=x.length>0,{getModelByModelName:w}=(0,e_.pw)(),Z=X.useMemo(()=>b.length>0?b.filter(e=>e.message):d&&g.length>0?g.filter(e=>e.message):[],[g,b,d]);X.useEffect(()=>{if(!r&&d&&g.length>0){var e,n;o("expose_wait_phrase_generate",{message:g[g.length-1].message,step:g[g.length-1].stepName,chat_id:s,msg_id:t._id,fe_msg_id:u,model_name:null==a?void 0:a.name.toUpperCase(),purpose:(null==a?void 0:a.name)&&eq.sO?null===(e=w(a.name))||void 0===e?void 0:e.displayName:void 0,refined_querys:g[g.length-1].query,url_list:null===(n=g[g.length-1].searchResult)||void 0===n?void 0:n.map(e=>null==e?void 0:e.externalLink),is_image_input:_.images.length>0||h.imageCount>0,is_file_input:_.fileCount>0||h.fileCount>0,is_link_input:_.linkCount>0||h.linkCount>0,assignment_id:m})}},[g,r]);let I=g.length>0;X.useEffect(()=>{d&&I&&(k?C(!0):C(!1))},[I,d,k]);let{markSearchProcessShown:O}=(0,ep.DD)(),S=(0,X.useRef)(!1);return((0,X.useEffect)(()=>{f.length<1&&!S.current&&(O(),S.current=!0)},[f,O]),"assistant"===c&&(null==i?void 0:i.searchLink)&&(null==Z?void 0:Z.length))?(0,U.tZ)(z.gC,{width:"100%",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",gap:"10px",padding:"12px 16px",children:(0,U.BX)(eg.mQ,{children:[(0,U.BX)(z.Ug,{justifyContent:"space-between",alignItems:"center",css:(0,J.iv)(MessageStepRender_templateObject()),onClick:()=>{o("click_wrtnsearch_step_more",{type:y?"open":"close"}),C(e=>!e)},children:[(0,U.BX)(z.Ug,{width:"100%",gap:"6px",alignItems:"center",children:[(0,U.tZ)(ei.JO,{as:l?eo.Y0Y:eo.lMR,color:"$color_icon_brand",size:16}),(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_primary",children:p(l?"chat.generate_step.pro_mode.title":"chat.generate_step.ai_search.title")})]}),(0,U.tZ)(z.xu,{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",css:(0,J.iv)(MessageStepRender_templateObject1(),y?180:0),children:(0,U.tZ)(ei.JO,{as:eo.I4Y,size:16,color:"$color_icon_secondary"})})]}),!y&&Z.map((e,o)=>{if(!e.message)return null;let r=o===Z.length-1,i=f.length>0||!v,l=function(e){var t;let n=null==e?void 0:e.tags;if(!n||n.length<1)return[];let o=null===(t=n[0])||void 0===t?void 0:t.type;switch(o){case"query":return n.filter(e=>"query"===e.type).map(e=>{var t;return{icon:null,content:null!==(t=e.text)&&void 0!==t?t:"",link:null}});case"site":return n.filter(e=>"site"===e.type).map(e=>{var t,n,o;return{icon:null!==(t=e.favicon)&&void 0!==t?t:null,content:null!==(n=e.siteName)&&void 0!==n?n:"",link:null!==(o=e.externalLink)&&void 0!==o?o:""}});default:return[]}}(e),c=function(e){var t,n;if(!e.tags||(null===(t=e.tags)||void 0===t?void 0:t.length)===0)return null;let o=null===(n=e.tags)||void 0===n?void 0:n.map(e=>(null==e?void 0:e.type)==="file"?{type:"file",content:null==e?void 0:e.fileName}:(null==e?void 0:e.type)==="site"?{type:"link",content:null==e?void 0:e.siteName,icon:null==e?void 0:e.favicon}:(null==e?void 0:e.type)==="topic"?{type:"topic",content:null==e?void 0:e.topic,iconVisible:!1}:(null==e?void 0:e.type)==="text"?{type:"text",content:null==e?void 0:e.text,iconVisible:!1}:void 0);return(null==o?void 0:o.length)>0?o:null}(e);return(0,U.BX)(z.gC,{gap:"10px",children:[(0,U.BX)(z.Ug,{gap:"8px",alignItems:"center",children:[!r||i?(0,U.tZ)("img",{src:e.icon,alt:e.message,style:{width:12,height:12}}):(0,U.tZ)(eK.q,{style:{display:"flex",width:12,height:12,margin:0},options:{animationData:tV}}),(0,U.tZ)(z.Jd,{typo:"$100-12-reg",color:"$color_text_tertiary",children:e.message})]}),l&&l.length>0&&(0,U.tZ)(z.Ug,{ml:"20px",flexWrap:"wrap",gap:"8px",children:l.map((e,o)=>(0,U.tZ)(SearchResultInfoChip,{item:e,index:o,messageIndex:n,message:t},o))}),0===l.length&&c&&c.length>0&&(0,U.tZ)(z.Ug,{ml:"20px",flexWrap:"wrap",gap:"8px",children:c.map(e=>{var n,o;return"topic"===e.type?(0,U.tZ)(AssignmentTopicChip,{message:e.content,assignmentId:(null==t?void 0:null===(n=t.meta)||void 0===n?void 0:n.assignmentId)||m,eventProperties:{chat_id:s,model_name:null==a?void 0:a.name.toUpperCase(),purpose:(null==a?void 0:a.name)&&eq.sO?null===(o=w(a.name))||void 0===o?void 0:o.displayName:void 0,assignment_id:m,content:e.content}},e.content):(0,U.tZ)(ReferenceTagChip,{message:e.content,icon:e.icon,iconVisible:e.iconVisible},e.content)})})]},"".concat(t._id,"-").concat(e.message))})]})}):null};function VideoListItem_templateObject(){let e=(0,D._)(["\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"]);return VideoListItem_templateObject=function(){return e},e}function VideoListItem_templateObject1(){let e=(0,D._)(["\n            width: calc(33.3% - 6.67px);\n            cursor: pointer;\n          "]);return VideoListItem_templateObject1=function(){return e},e}let tY=(0,J.iv)(VideoListItem_templateObject()),VideoListItem=e=>{var t;let{videoReferences:n,commonProperties:o,index:r}=e,{trackEvent:i}=(0,H.Ke)(),a=null===(t=n.link)||void 0===t?void 0:t.split("v=")[1],l="https://www.youtube.com/embed/".concat(a,"?origin=").concat(window.location.origin,"&cc_load_policy=1"),RenderVideoIframe=e=>(0,U.tZ)("iframe",{style:{borderRadius:4,aspectRatio:1.77777778},width:"100%",src:"".concat(l,"&autoplay=").concat((null==e?void 0:e.autoplay)?1:0)});return(0,U.tZ)(V.CO,{renderOpener:e=>{var t,a,l,c,d,s;let{openModal:u}=e;return(0,U.BX)(z.xu,{position:"relative",css:(0,J.iv)(VideoListItem_templateObject1()),children:[(0,U.BX)(z.gC,{paddingBottom:"8px",width:"100%",gap:"8px",children:[RenderVideoIframe(),(0,U.BX)(z.gC,{gap:"8px",children:[(0,U.tZ)(z.Jd,{typo:"$140-14-semi",color:"$color_text_primary",css:tY,children:n.title}),(null==n?void 0:n.rich_snippet)&&(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_tertiary",css:tY,children:"".concat(null===(l=n.rich_snippet)||void 0===l?void 0:null===(a=l.top)||void 0===a?void 0:null===(t=a.extensions)||void 0===t?void 0:t.at(1)," \xb7 ").concat(null===(s=n.rich_snippet)||void 0===s?void 0:null===(d=s.top)||void 0===d?void 0:null===(c=d.extensions)||void 0===c?void 0:c.at(2))})]})]}),(0,U.tZ)(z.xu,{position:"absolute",left:0,right:0,top:0,bottom:0,onMouseOver:()=>i("hover_video_search_result",{index:r,url:n.link,...o}),onClick:()=>{u(),i("click_video_search_result",{index:r,url:n.link,...o})}})]})},renderContent:e=>{let{closeModal:t}=e;return(0,U.BX)(z.xu,{width:"100%",maxWidth:"84.6560847%",children:[(0,U.tZ)(z.zx,{onClick:()=>{t(),i("click_detailed_view_exit_btn",{type:"ai_search_video",current_index:r,url:n.link})},position:"fixed",top:20,right:20,children:(0,U.tZ)(ei.JO,{as:eo.S5X,size:48,color:"$color_text_white"})}),RenderVideoIframe({autoplay:!0})]})}})},VideoListItemSkeleton=()=>(0,U.tZ)(z.Ug,{gap:"10px",width:"100%",children:Array.from({length:3}).map((e,t)=>(0,U.BX)(z.gC,{gap:"12px",width:"33%",children:[(0,U.tZ)(V.Od,{width:"100%",aspectRatio:"256/144",borderRadius:"12px"}),(0,U.BX)(z.gC,{style:{flex:1},gap:"8px",children:[(0,U.tZ)(V.Od,{width:"100%",height:"20px",borderRadius:"12px"}),(0,U.tZ)(V.Od,{width:"59.06%",height:"12px",borderRadius:"12px"})]})]},t))});function MessageVideoList_templateObject(){let e=(0,D._)(["\n            cursor: pointer;\n          "]);return MessageVideoList_templateObject=function(){return e},e}function MessageVideoList_templateObject1(){let e=(0,D._)(["\n              transform: rotate(","deg);\n              transition: transform 0.3s;\n            "]);return MessageVideoList_templateObject1=function(){return e},e}let MessageVideoList=e=>{var t;let{message:n,collapse:o=!0}=e,{chat:r}=td(),{isLastMessage:i}=th(),{currentStepName:a,currentClientAction:l,currentVideoReferenceResults:c}=useDisplayGenerateStep(),{trackEvent:d}=(0,H.Ke)(),s=(0,G.T_)(),{isStreaming:u}=useDisplayStreamMessage(!0),p=(null==r?void 0:r.model)===eA.ChatModel.WRTN_FAST_SEARCH,{value:_,setItem:h}=(0,N._)("collapse_history_".concat(n.chatId),{}),[m,g]=X.useState(!1),[x,v]=X.useState(o||(null===(t=_[n._id])||void 0===t?void 0:t.video)),f=(0,X.useMemo)(()=>({msg_id:n._id,chat_id:n.chatId}),[n]),b=(0,X.useMemo)(()=>n.videoReferenceResults?n.videoReferenceResults:c||[],[n.videoReferenceResults,c]);return((0,X.useEffect)(()=>{_&&_[n._id]&&v(_[n._id].video)},[]),(0,X.useEffect)(()=>{b&&0!==b.length&&"NEW_ASSISTANT_MESSAGE_ID"!==n._id&&!x&&d("expose_video_search_result",{urls:b.map(e=>e.link),...f})},[null==n?void 0:n._id,x,b]),(0,X.useEffect)(()=>{if(i){if(!u||"browsing_server_search_video_search_tool_result"===a&&!(null==b?void 0:b.length)||b&&b.length>0){g(!1);return}m||"browsing_server_search_query"!==a||"show_skeleton"!==l||g(!0)}},[i,m,a,l,b,u,p]),p)?null:b&&0!==b.length||m?(0,U.tZ)(z.gC,{width:"100%",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",gap:"10px",padding:"12px 16px",children:(0,U.BX)(eg.mQ,{children:[(0,U.BX)(z.Ug,{justifyContent:"space-between",alignItems:"center",css:(0,J.iv)(MessageVideoList_templateObject()),onClick:()=>{d("click_video_search_result_show_btn",{type:x?"open":"close",...f});let e={..._,[n._id]:{..._[n._id],video:!x}};h(e),v(e=>!e)},children:[(0,U.BX)(z.Ug,{width:"100%",gap:"6px",alignItems:"center",children:[(0,U.tZ)(ei.JO,{as:eo.XX8,color:"$color_icon_brand",size:16}),(0,U.tZ)(z.Jd,{typo:"$100-12-med",color:"$color_text_primary",children:s("chat.feature_chat_room.section.video")})]}),(0,U.tZ)(z.xu,{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",css:(0,J.iv)(MessageVideoList_templateObject1(),x?180:0),children:(0,U.tZ)(ei.JO,{as:eo.I4Y,size:16,color:"$color_icon_secondary"})})]}),x?null:m?(0,U.tZ)(VideoListItemSkeleton,{}):(0,U.tZ)(z.gC,{gap:"10px",children:(0,U.tZ)(z.Ug,{gap:"10px",flexWrap:"wrap",children:b&&b.length>0&&b.map((e,t)=>(0,U.tZ)(VideoListItem,{videoReferences:e,index:t,commonProperties:f},t))})})]})}):void 0},tq=X.memo(e=>{let{message:t,isLastMessage:n,messageListItemIndex:o,isAdWebview:r}=e,{model:i}=tg(),a=[eA.ChatModel.WRTN_SEARCH,eA.ChatModel.GPT4,eA.ChatModel.GPT4_ASSIGNMENT,eA.ChatModel.PRO_MODE,eA.ChatModel.WRTN_FAST_SEARCH].includes(i),{id:l}=(0,e_.Ob)(),{id:c}=(0,e_.zU)(),[d,s]=(0,X.useState)(!1),[u,p]=(0,X.useState)(null),_=c===l;return(0,U.tZ)(MessageProvider,{message:t,isLastMessage:n,children:(0,U.tZ)(MessageRerollSelector,{message:t,children:e=>{let{currentMessage:i,messageIndex:l,headerSelector:c,messageRef:h}=e;return(0,U.BX)(z.xu,{children:[(0,U.BX)(z.kC,{flexDirection:["column","column","row","row"],maxWidth:["1660px","1660px","1580px"],justifyContent:_?"center":"flex-start",gap:["0","0","16px","16px"],children:[(0,U.BX)(z.xu,{display:"flex",flexDirection:"column",width:"100%",maxWidth:[688,688,688,780],paddingY:16,gap:"8px",borderRadius:"5px",position:"relative",bg:"transparent",flexShrink:1,zIndex:2,children:[(0,U.BX)(z.gC,{gap:"12px","data-testid":"chat-room-message",children:[(0,U.BX)(z.Ug,{gap:"8px",alignItems:"center",children:[(0,U.tZ)(MessageResponseTitle,{message:i}),(0,U.tZ)(z.LZ,{}),c()]}),(0,U.BX)(z.gC,{gap:"8px",children:[(0,U.tZ)(MessageStepRender,{message:i,messageIndex:l}),!_&&"assistant"===i.role&&(0,U.tZ)(MessageVideoList,{message:i}),!_&&"assistant"===i.role&&(0,U.tZ)(MessageImageSearchResult,{message:i,viewBrandAd:d})]}),(0,U.tZ)(MessageAttachmentGallery,{message:i}),(0,U.tZ)(GenerationStepBrandBannerLayout,{message:i,messageListItemIndex:o,isLastMessage:n,setViewBrandAd:e=>{s(e)},onBrandAdInfo:e=>{p(e)}}),(0,U.tZ)(ts.f,{target:"assistant"===i.role&&a?h:void 0,children:(0,U.tZ)(z.xu,{ref:h,id:"chat-room-message-".concat(o),children:(0,U.tZ)(MessageContentRenderer,{message:i,isAdWebview:r,brandAdInfo:u})})}),(0,U.tZ)(MessageErrorRenderer,{message:i}),!_&&"assistant"===i.role&&(0,U.tZ)(MessageImageGallery,{message:i}),(0,U.tZ)(AdActionCard,{message:i}),(0,U.tZ)(MessageFooter,{message:i,messageIndex:l,messageListItemIndex:o,messageRef:h})]}),"assistant"===i.role&&n&&(0,U.tZ)(z.xu,{width:"100%",height:"1px",opacity:"0.5",backgroundColor:"$color_outline_tertiary",marginY:"4px"}),"assistant"===i.role&&n&&(0,U.tZ)(DynamicChipList,{message:t})]}),(0,U.tZ)(z.xu,{display:["none","none","flex","flex"],children:(0,U.tZ)(MessageSideBar,{message:t,messageIndex:l,messageLength:t.length,currentMessage:i,messageListItemIndex:o,isLastMessage:n})})]}),"assistant"===i.role&&!n&&(0,U.tZ)(z.xu,{width:"100%",height:"1px",opacity:"0.5",backgroundColor:"$color_outline_tertiary",marginY:"40px"})]})}})})}),MessageListRenderer=e=>{let{messages:t,isAdWebview:n}=e;return(0,U.BX)(z.xu,{className:"chatMessageList",children:[(0,U.tZ)(z.xu,{height:"8px"}),t.flatMap((e,o)=>{let r=0===o,i=o===t.length-1,a=Array.isArray(e)?e:[e];return(0,U.tZ)(tq,{message:a,isFirstMessage:r,isLastMessage:i,messageListItemIndex:o,isAdWebview:n},"message-".concat(a[0]._id,"-").concat(o))})]})},ChatMessageList=e=>{let{chat:t,chatId:n,isLoading:o,isAdWebview:r}=e,i=(0,eC.sJ)(ey._8),a=(0,eC.sJ)(ey.y),l=!a.shouldRestart&&i.input.length<1&&o,{messages:c}=useMessages(t,!n||a.shouldRestart||i.input.length>0,i.input),d=0===c.length,{flag:s,loading:u}=(0,el.T6)("202412_chat_perf");return(0,U.tZ)(z.xu,{flex:1,position:"relative",children:l?(0,U.tZ)(EmptyLayout,{leftSection:(0,U.tZ)(ChatSkeleton,{})}):d&&!(!u&&s)?(0,U.tZ)(EmptyContent,{}):(0,U.tZ)(z.xu,{paddingX:[20,40,40,40],children:(0,U.tZ)(z.xu,{maxWidth:"1024px",width:"100%",margin:"0 auto",children:(0,U.tZ)(MessageListRenderer,{messages:c,isAdWebview:r})})})})};var tQ=n(17300),t0=n(54489),t1=n(26967);function AssignmentNotification_AppInstallModal_templateObject(){let e=(0,D._)(["\n                    font-size: 8px;\n                  "]);return AssignmentNotification_AppInstallModal_templateObject=function(){return e},e}let AppInstallModal_AppInstallModal=e=>{let{closeModal:t}=e,n=(0,G.T_)(),o=(0,G.bU)();return(0,U.BX)(z.xu,{position:"relative",padding:"20px 20px 43px 20px",width:440,height:428,borderRadius:12,backgroundColor:"#fff",children:[(0,U.BX)(z.gC,{width:"100%",height:"100%",alignItems:"center",justifyContent:"top",gap:"16px",children:[(0,U.tZ)(z.xu,{height:"12px"}),(0,U.tZ)(z.Jd,{typo:"$100-24-bold",color:"#1A1918",children:n("feature_mobile_install.sub_title1")}),(0,U.tZ)(z.Jd,{typo:"$100-24-bold",color:"#F72F08",children:n("feature_mobile_install.sub_title2")}),(0,U.tZ)(z.xu,{width:301,height:105,borderRadius:12,marginTop:"5px",marginBottom:"5px",backgroundColor:"#F7F7F5",children:(0,U.BX)(z.Ug,{alignItems:"flex-start",justifyContent:"left",marginLeft:18,marginTop:22,children:[(0,U.tZ)(ei.tD,{width:61,height:61}),(0,U.BX)(z.gC,{alignItems:"flex-start",marginLeft:16,gap:"6px",children:[(0,U.tZ)(z.Jd,{typo:"$100-18-semi",color:"#1A1918",children:n("feature_mobile_install.cta_title")}),(0,U.BX)(z.Ug,{alignItems:"flex-end",children:[(0,U.tZ)(z.Jd,{typo:"$100-12-semi",color:"#85837D",marginTop:10,children:n("feature_mobile_install.cta_word")}),(0,U.tZ)(z.Jd,{color:"#A8A69D",marginLeft:"4px",css:(0,J.iv)(AssignmentNotification_AppInstallModal_templateObject()),children:n("feature_mobile_install.cta_word2")})]}),(0,U.tZ)(ei.A3,{})]})]})}),(0,U.tZ)(ed(),{src:"ko-KR"===o?"https://d1k8apdmymvh8f.cloudfront.net/wrtn/wrtn_app_install_qr.png":"https://d1k8apdmymvh8f.cloudfront.net/wrtn/jt4lfh16_qr_code.png",alt:"WRTN App Installer QR",width:92,height:92}),(0,U.tZ)(z.Jd,{typo:"$100-14-semi",color:"#A8A69D",marginTop:"5px",children:n("feature_mobile_install.sub_title3")})]}),(0,U.tZ)(z.zx,{position:"absolute",top:"20px",right:"20px",width:"20px",height:"20px",onClick:t,children:(0,U.tZ)(ei.JO,{as:eo.S5X,size:20,color:"$color_text_tertiary"})})]})},VerifyNeededModal=e=>{let{step:t,setStep:n,onClick:o}=e,{trackEvent:r}=(0,H.Ke)();return(0,X.useEffect)(()=>{"verifyNeeded"===t&&r("expose_ai_writing_authorize_modal")},[t]),(0,U.tZ)(V.cV,{width:444,opened:"verifyNeeded"===t,title:(0,U.BX)(z.gC,{mt:"20px",mb:"26px",children:[(0,U.tZ)(ed(),{alt:"본인 인증",width:240,height:206,unoptimized:!0,src:"https://wrtn-fe-web-asset.s3.ap-northeast-2.amazonaws.com/assignment/auth.png"}),(0,U.tZ)("br",{}),"과제 완료 알림을 받기 위해",(0,U.tZ)("br",{}),"최초 1회 본인인증이 필요해요"]}),content:"인증을 완료한 후 돌아와서 확인 버튼을 눌러주세요",onClose:()=>{n(null)},confirm:{text:"인증 바로가기",onClick:()=>{r("click_ai_writing_authorize_btn"),o()}}})},VerifyConfirmModal=e=>{let{step:t,setStep:n,onClick:o}=e,{trackEvent:r}=(0,H.Ke)();return(0,X.useEffect)(()=>{"verifyConfirm"===t&&r("expose_ai_writing_authorize_confirm_modal")},[t]),(0,U.tZ)(V.cV,{width:444,opened:"verifyConfirm"===t,title:(0,U.BX)(z.gC,{mt:"20px",mb:"26px",gap:"40px",children:[(0,U.tZ)(ed(),{alt:"본인 인증",width:240,height:206,unoptimized:!0,src:"https://wrtn-fe-web-asset.s3.ap-northeast-2.amazonaws.com/assignment/auth.png"}),"본인인증을 완료했다면",(0,U.tZ)("br",{}),"인증 완료 버튼을 눌러주세요"]}),onClose:()=>{n(null)},confirm:{text:"인증 완료",onClick:()=>{r("click_ai_writing_authorize_confirm_btn"),o()}}})},VerifyFailedModal=e=>{let{step:t,setStep:n}=e,{trackEvent:o}=(0,H.Ke)();return(0,X.useEffect)(()=>{"verifyFailed"===t&&o("expose_ai_writing_authorize_fail_modal")},[t]),(0,U.tZ)(V.cV,{width:444,opened:"verifyFailed"===t,title:(0,U.BX)(z.gC,{mt:"20px",mb:"26px",gap:"40px",children:[(0,U.tZ)(ed(),{alt:"인증 실패",width:240,height:206,unoptimized:!0,src:"https://wrtn-fe-web-asset.s3.ap-northeast-2.amazonaws.com/assignment/error.png"}),"본인인증에 실패했어요",(0,U.tZ)("br",{}),"인증을 다시 진행해 주세요"]}),onClose:()=>{n(null)},cancel:{text:"이전으로",onClick:()=>{o("click_ai_writing_authorize_fail_btn"),n("verifyNeeded")}}})},VerifySucceededModal=e=>{let{step:t,passStepIncluded:n}=e,{trackEvent:o}=(0,H.Ke)();return(0,X.useEffect)(()=>{"registerSucceeded"===t&&(n?o("expose_ai_writing_authorize_done_modal"):o("expose_ai_writing_kakaotalk_noti_ready_modal"))},[t,n]),(0,U.tZ)(V.cV,{width:380,opened:"registerSucceeded"===t,title:(0,U.BX)(z.gC,{mt:"20px",gap:"24px",justifyContent:"center",alignItems:"center",children:[(0,U.tZ)(ei.JO,{as:eo.mkl,size:24,color:"#2CAA00"}),n?"본인인증이 완료되었어요!":"곧 과제 완료 알림이 도착해요"]}),content:"요청 주신 과제 작성이 완료되는 대로\n바로 알림을 보내드릴게요",confirm:{onClick:e=>e(),text:"확인"},onClose:()=>{}})},t2=(0,e2.dU)("NEXT_PUBLIC_SSO_URL"),t4=(0,e2.dU)("NEXT_PUBLIC_BASE_URL"),VerificationButtonAndModalContainer=e=>{let{registered:t,chatId:n}=e,{trackEvent:o}=(0,H.Ke)(),r=(0,G.T_)(),{user:i,mutate:a}=(0,eu.aF)(),{trigger:l}=usePostAssignmentNotification(n||""),{trigger:c}=(0,t1.Hr)(),d=!!(null==i?void 0:i.passClientId)&&!!(null==i?void 0:i.phoneNumber),[s,u]=(0,X.useState)(null),[p,_]=(0,X.useState)(!1),h=(0,eC.sJ)(ey._b),[m,g]=(0,X.useState)(!1),x=(0,G.bU)(),registerNotification=async()=>{await l(),u("registerSucceeded")},handleClickRegisterButton=async()=>{if(!t){o("click_ai_writing_kakaotalk_noti_request_btn",{assignment_id:h});try{"ko-KR"===x?d?(await registerNotification(),await a()):u("verifyNeeded"):g(!0)}catch(e){(0,eO.wp)(r("feature_assignment.alarm.alert.error"))}}},handleClickVerificationButton=async()=>{window.open("".concat(t2,"/pass/webview?redirect_uri=").concat(t4),"_blank","width=420,height=500,left=200,top=200"),u("verifyConfirm")},handleClickVerificationConfirmButton=async()=>{try{let e=await c();if(!e)throw Error("postCheckPassRegistered Failed");await registerNotification(),_(!0)}catch(e){u("verifyFailed")}};return(0,U.BX)(U.HY,{children:[(0,U.BX)(z.zx,{display:"flex",width:"max-content",alignItems:"center",gap:"4px",backgroundColor:t?"$color_bg_screen":"ko-KR"===x?"#FFDA00":"$color_surface_brand",padding:"8px 12px",borderRadius:"16px",typo:"$100-14-med",color:"$palette_gray_gray_black",border:"1px solid",borderColor:"$color_outline_tertiary",onClick:handleClickRegisterButton,children:["ko-KR"===x&&(0,U.tZ)(ei.JO,{as:eo.eCc,size:16,color:"$palette_gray_gray_black"}),t?r("feature_assignment.alarm.done"):r("feature_assignment.alarm.yet"),(0,U.tZ)(ei.JO,{as:t?eo.nmC:eo.lA1,size:16,color:"$palette_gray_gray_black"})]}),(0,U.tZ)(VerifyNeededModal,{step:s,setStep:u,onClick:handleClickVerificationButton}),(0,U.tZ)(VerifyConfirmModal,{step:s,setStep:u,onClick:handleClickVerificationConfirmButton}),(0,U.tZ)(VerifyFailedModal,{step:s,setStep:u}),(0,U.tZ)(VerifySucceededModal,{step:s,passStepIncluded:p}),(0,U.tZ)(V.CO,{opened:m,onClose:()=>g(!1),renderContent:e=>{let{closeModal:t}=e;return(0,U.tZ)(AppInstallModal_AppInstallModal,{closeModal:t})}})]})},AssignmentNotificationContainer=e=>{let{chatId:t}=e,{data:n}=useGetAssignmentNotificationStatus(t||""),o=(0,G.T_)();return(0,U.tZ)(z.gC,{backgroundColor:"$color_surface_tertiary",borderRadius:"16px",padding:"20px",gap:"16px",alignItems:"center",children:(0,U.BX)(z.gC,{gap:"10px",alignItems:"center",textAlign:"center",children:[(0,U.BX)(z.Ug,{gap:"8px",alignItems:"center",children:[(0,U.tZ)(ei.JO,{as:eo.pkD,size:20,color:"$color_icon_brand"}),(0,U.tZ)(z.Jd,{typo:"$100-18-bold",color:"$color_text_primary",children:o("feature_assignment.alarm.title")})]}),(0,U.tZ)(z.Jd,{typo:"$160-16-med",color:"$color_text_primary",children:o("feature_assignment.alarm.sub_title")}),(0,U.tZ)(VerificationButtonAndModalContainer,{registered:!!n,chatId:t})]})})};function AppDownloadModal_templateObject(){let e=(0,D._)(["\n        aspect-ratio: 450 / 540;\n      "]);return AppDownloadModal_templateObject=function(){return e},e}function AppDownloadModal_templateObject1(){let e=(0,D._)(["\n          cursor: pointer;\n        "]);return AppDownloadModal_templateObject1=function(){return e},e}let AppDownloadModal=e=>{let{closeModal:t}=e,{trackEvent:n}=(0,H.Ke)(),{character:o}=tg(),{chatId:r}=td(),{user:i}=(0,eu.aF)(),handleCloseAppInstallEvent=()=>{var e,t;n("exit_app_install_recommend_modal",{characterName:null==o?void 0:o.name,category:null==o?void 0:null===(t=o.categories)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.name,chatId:r,characterId:null==o?void 0:o._id,is_owner:(null==o?void 0:o.creator.wrtnUid)===(null==i?void 0:i._id),featureMenu:"character"})};return(0,U.BX)(z.xu,{borderRadius:"16px",width:"100%",maxWidth:"450px",position:"relative",pt:"60px",px:"40px",mx:"10px",css:(0,J.iv)(AppDownloadModal_templateObject()),onClick:e=>e.stopPropagation(),children:[(0,U.tZ)("img",{src:"https://cdn-image.wrtn.ai/Banner/ai-character-modal-img-kr%402x.png",style:{width:"100%",borderRadius:"16px",position:"absolute",top:0,left:0,zIndex:-1}}),(0,U.tZ)(z.xu,{position:"absolute",right:"20px",top:"20px",onClick:()=>{handleCloseAppInstallEvent(),t()},css:(0,J.iv)(AppDownloadModal_templateObject1()),children:(0,U.tZ)(ei.JO,{as:eo.S5X,size:24,color:"$color_icon_white"})})]})},AppDownloadButton=()=>{let{trackEvent:e}=(0,H.Ke)(),{character:t}=tg(),{chatId:n}=td(),{user:o}=(0,eu.aF)(),handleClickAppInstallEvent=()=>{var r,i;e("click_app_install_recommend",{characterName:null==t?void 0:t.name,category:null==t?void 0:null===(i=t.categories)||void 0===i?void 0:null===(r=i[0])||void 0===r?void 0:r.name,chatId:n,characterId:null==t?void 0:t._id,is_owner:(null==t?void 0:t.creator.wrtnUid)===(null==o?void 0:o._id),featureMenu:"character"})};return(0,U.tZ)(U.HY,{children:N.P8?(0,U.tZ)(z.Wv,{hierarchy:"$primary",size:"$x_small",onClick:()=>{handleClickAppInstallEvent(),window.open("https://agent.wrtn.ai/@wrtn/wrtn?ad_creative=install_UI&ad_group=aicharacter_user&campaign=aicharacter_app_recommend&og_tag_id=53971433&routing_short_id=xodx9p&tracking_template_id=8eda79859bf92dee1188b2c61a98ff4c&ad_type=click","_blank")},children:"뤼튼 앱 설치"}):(0,U.tZ)(V.CO,{renderContent:e=>{let{closeModal:t}=e;return(0,U.tZ)(AppDownloadModal,{closeModal:t})},renderOpener:e=>{let{openModal:t}=e;return(0,U.tZ)(z.Wv,{hierarchy:"$primary",size:"$x_small",onClick:()=>{handleClickAppInstallEvent(),t()},children:"뤼튼 앱 설치"})}})})},BannerLayout=e=>{let{onClose:t,children:n}=e;return(0,U.BX)(z.gC,{padding:"24px",pb:"20px",gap:"12px",width:"100%",position:"relative",backgroundColor:"$color_surface_tertiary",borderRadius:"5px",alignItems:"center",children:[(0,U.tZ)(z.zx,{position:"absolute",top:"0",right:"0",padding:"8px",onClick:t,children:(0,U.tZ)(ei.JO,{as:eo.S5X,size:16,color:"$color_icon_tertiary"})}),n]})};function AppDownloadBanner_templateObject(){let e=(0,D._)(["\n            // show blank space between two words\n            white-space: pre;\n          "]);return AppDownloadBanner_templateObject=function(){return e},e}let AppDownloadBanner=()=>{let{trackEvent:e}=(0,H.Ke)(),{unitType:t,character:n}=tg(),{chatId:o}=td(),{user:r}=(0,eu.aF)(),{onCloseBanner:i,showBanner:a}=(0,N.SK)("app_download_banner",N.jU&&eq.sO&&"character"===t);X.useEffect(()=>{if(a){var t,i;e("view_app_install_recommend",{characterName:null==n?void 0:n.name,category:null==n?void 0:null===(i=n.categories)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.name,chatId:o,characterId:null==n?void 0:n._id,is_owner:(null==n?void 0:n.creator.wrtnUid)===(null==r?void 0:r._id),featureMenu:"character"})}},[]);let handleCloseAppInstallEvent=()=>{var t,i;e("exit_app_install_recommend",{characterName:null==n?void 0:n.name,category:null==n?void 0:null===(i=n.categories)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.name,chatId:o,characterId:null==n?void 0:n._id,is_owner:(null==n?void 0:n.creator.wrtnUid)===(null==r?void 0:r._id),featureMenu:"character"})};return a?(0,U.BX)(BannerLayout,{onClose:()=>{handleCloseAppInstallEvent(),i()},children:[(0,U.BX)(z.Ug,{width:"100%",flexWrap:"wrap",justifyContent:"center",children:[(0,U.BX)(z.Jd,{typo:"$ex-140-14-semi",color:"$color_text_primary",css:(0,J.iv)(AppDownloadBanner_templateObject()),children:["모바일 앱에서 새로운"," "]}),(0,U.tZ)(z.Jd,{typo:"$ex-140-14-semi",color:"$color_text_primary",children:"캐릭터를 먼저 만나보세요"})]}),(0,U.tZ)(AppDownloadButton,{})]}):null},NewCharacterModelBanner=()=>{let{unitType:e}=tg(),{showBanner:t,onCloseBanner:n}=(0,N.SK)("new_character_model",N.jU&&eq.sO&&"character"===e),{trackEvent:o}=(0,H.Ke)();return(X.useEffect(()=>{t&&o("view_character_notice")},[]),t)?(0,U.tZ)(BannerLayout,{onClose:()=>{n()},children:(0,U.BX)(z.gC,{gap:"8px",alignItems:"center",children:[(0,U.tZ)(z.Jd,{typo:"$140-16-semi",color:"$color_text_primary",textAlign:"center",children:"캐릭터의 기억력이 더욱 좋아졌어요"}),(0,U.BX)("a",{href:"https://www.notion.so/wrtn/AI-02a0f5d1de514b78902d589e96c3002c?pvs=4",onClick:()=>{o("click_character_notice_detail")},target:"_blank",rel:"noopener noreferrer",style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"4px"},children:[(0,U.tZ)(z.Jd,{typo:"$100-14-semi",color:"$color_action_blue_primary",children:"자세히 보기"}),(0,U.tZ)(ei.JO,{as:eo.xMl,color:"$color_action_blue_primary",size:15})]})]})}):null};function BannerList_templateObject(){let e=(0,D._)(["\n              position: absolute;\n              top: 0;\n              transform: translateY(-100%);\n            "]);return BannerList_templateObject=function(){return e},e}function BannerList_templateObject1(){let e=(0,D._)([""]);return BannerList_templateObject1=function(){return e},e}let t3=[{key:"app_download_banner",condition:!0},{key:"new_character_model",condition:!1,locale:"ko-KR",unitType:"character"}],BannerList=e=>{let{position:t}=e,n=(0,G.bU)(),{value:o}=(0,N._)("banner_info",{}),r="input"===t;return(0,U.tZ)(z.xu,{display:r?["flex","flex","none"]:"flex",flexDirection:"column",width:r?["calc(100% - 40px)","calc(100% - 40px)","100%"]:"100%",gap:"12px",css:r?(0,J.iv)(BannerList_templateObject()):(0,J.iv)(BannerList_templateObject1()),children:t3.map(e=>!1===e.condition||e.locale&&e.locale!==n||!1===o[e.key]?null:"app_download_banner"===e.key?(0,U.tZ)(AppDownloadBanner,{},e.key):"new_character_model"===e.key?(0,U.tZ)(NewCharacterModelBanner,{},e.key):null)})},ChatInput=e=>{var t;let{observedDiv:n}=e,o=X.useRef(null),[r,i]=X.useState(!1),a=(0,eC.Zl)(ey.yI),l=(0,eC.Zl)(ey.dW),c=(0,eC.Zl)(ey.u3),d=(0,eC.sJ)(ey.h5),s=(0,G.T_)("chat.chat_input"),{trackEvent:u}=(0,H.Ke)(),{chatId:p,chat:_,messageLength:h}=td(),{input:m}=tw(),{setInput:g}=tk(),{status:x}=tF(),{getModelByModelName:v}=(0,e_.pw)(),f=(0,eC.sJ)(ey.h5),{data:b}=(0,ew.$I)(p);(0,e7.O8)(o,"click",()=>i(!1));let{searchParams:y}=(0,W.je)(),C=null!==(t=y.get("input_kb"))&&void 0!==t?t:"",{unit:k,unitType:w,character:Z,enableOptions:I,model:O,isUnitDisabled:S,disableType:B,isProMode:$,isImageModel:A,isAssignmentModel:M}=tg(),{isChatInsideRoom:R}=td(),j=O===eA.ChatModel.GPT4,{generating:E,startGenerate:T,stopGenerate:L,canStopGenerate:F,generateStatus:P}=tj(),D=S||M&&h<=2&&!!x&&"error"===x.type,J=S&&"notSupported"===B,N=X.useMemo(()=>{if(S)return"사용할 수 없는 채팅방입니다";if("unit"===w){if(O===eA.ChatModel.WRTN_SEARCH)return"궁금한 것을 무엇이든 검색하세요";if(O===eA.ChatModel.SD3_TURBO)return"만들고 싶은 이미지를 상세하게 설명해 보세요";if(O===eA.ChatModel.GPT4||$)return"해결할 과제를 설명해 주세요"}return"character"===w&&Z?s("placeholder.character",{characterWithJosa:eq.sO?"".concat(Z.name,"에게"):Z.name}):s("placeholder.default")},[Z,S,s,w,O,$]),onGenerate=async()=>{(0!==m.trim().length||0!==C.trim().length)&&(g(""),l(""),await T({message:C||m,model:O,mode:eA.ChatMode.CHAT,reroll:!1,commandChipType:"",images:f.images,referenceIds:f.referenceIds}))},onStopGenerate=()=>{L()},K=!!m&&!D&&d.success,V=D||"before_streaming"===P||"generating"===P||!d.success,Y=!!I&&!(eq.sO&&O===eA.ChatModel.GPT4)&&I.draw,q={model_name:null==O?void 0:O.toUpperCase(),uploadPosition:"chat_room",chat_id:p,is_pro_mode:$,purpose:null==k?void 0:k.displayName,current_box_number:d.totalCount||0};return(0,X.useEffect)(()=>{R&&C&&onGenerate()},[R]),(0,X.useEffect)(()=>{$||c([])},[$,c]),(0,U.tZ)(z.xu,{width:"100%",position:"absolute",bottom:"0",left:"0",pl:["6px","25px","25px","25px"],pr:["6px","40px","40px","40px"],zIndex:3,children:(0,U.BX)(z.Ug,{width:"100%",maxWidth:"1024px",margin:"0 auto",zIndex:2,gap:["40px","40px","16px","16px"],ref:n,justifyContent:"space-between",children:[(0,U.BX)(z.xu,{position:"relative",paddingTop:16,paddingBottom:32,maxWidth:[688,688,688,780],width:"100%",children:[("streaming"===P||(null==_?void 0:_.status)==="streaming")&&h<=2&&M?(0,U.tZ)(AssignmentNotificationContainer,{chatId:p}):(null==_?void 0:_._id)&&(0,U.BX)(eZ.aA,{isActive:m.length>0||r,isDisabled:D,onFocus:()=>i(!0),maxWidth:1280,attachmentList:(null==I?void 0:I.image)&&(0,U.tZ)(AttachmentList,{eventProperties:q,setInput:g}),children:[(0,U.BX)(z.kC,{flexDirection:$?"row":"column-reverse",width:"100%",alignItems:$?"flex-end":"flex-start",gap:$?"4px":"8px",children:[!S&&(0,U.tZ)(eZ.Z,{isDisabled:S||E,drawable:Y,promptHub:!!I&&I.promptHub,code:!!I&&I.code,file:!!I&&I.file,iconGroupEventProperties:{purpose:null==k?void 0:k.displayName,is_pro_mode:$},fileEventProperties:{...q,method:"upload_btn_click",current_box_number:d.totalCount||0,index:d.totalCount},setInputText:g,chatRoomFileLimitExceeded:b&&b.length>=3,onError:eO.wp}),(0,U.tZ)(z.kC,{paddingRight:j?"0":"36px",width:"100%",children:(0,U.tZ)(eZ.kb,{value:m,onChange:e=>{g(e.target.value),l(e.target.value)},ref:o,onKeyPress:e=>{E||S||!d.success||("Enter"!==e.key||e.shiftKey||e.preventDefault(),e.metaKey||e.shiftKey||"Enter"!==e.key||!(m.trim().length>0)||(e.preventDefault(),e.stopPropagation(),sessionStorage.setItem("user-generate-action","enter"),onGenerate(),a(-1)))},placeholder:N,disabled:D,onClick:()=>{var e;return u("click_chat_input_btn",{model_name:O.toUpperCase(),chat_id:p,feature_menu:Z?"character":"chat",character_id:null==Z?void 0:Z._id,purpose:eq.sO?null===(e=v(O))||void 0===e?void 0:e.displayName:void 0})},linkHighlight:$})})]}),(0,U.tZ)(eZ.c7,{isActive:K,animateOnHover:!A,onClick:()=>{F?onStopGenerate():(onGenerate(),a(-1))},isDisabled:V,canStopGenerate:F,bottom:"19px",icon:(0,U.tZ)(ei.JO,{as:F?eo.xyj:A?eo.w6e:O.includes("search")?eo.hsj:eo.lA1,color:K||V?"$color_icon_white":"$color_surface_tertiary",size:20})})]}),("blocked"===B||"deleted"===B||"private"===B||J)&&(0,U.BX)(z.Ug,{position:"absolute",top:"-48px",right:"0",left:"0",margin:"0 auto",gap:"8px",alignItems:"center",px:"16px",backgroundColor:"$color_surface_accent_bg_red",borderRadius:"8px",height:"48px",minWidth:["calc(100% - 40px)","calc(100% - 40px)","100%","100%"],width:"fit-content",children:[(0,U.tZ)(ei.JO,{as:eo.$bG,size:24,color:"$color_text_accent_red"}),(0,U.BX)(z.Jd,{typo:"$ex_140-15-semi",color:"$color_text_accent_red",children:["deleted"===B&&s("status.deleted"),"blocked"===B&&s("status.blocked"),"private"===B&&s("status.private"),"notSupported"===B&&s("status.notSupport")]})]}),(0,U.tZ)(BannerList,{position:"input"})]}),(0,U.tZ)(z.xu,{display:["none","none","flex","flex"],width:"228px",flexShrink:0})]})})};function NewChatButton_templateObject(){let e=(0,D._)(["\n        cursor: pointer;\n      "]);return NewChatButton_templateObject=function(){return e},e}let NewChatButton=()=>{let{unit:e}=tg(),{chatId:t}=td(),n=(0,en.useRouter)(),{trackEvent:o}=(0,H.Ke)(),r=(0,G.T_)(),i=(0,N.ac)("(max-width: 768px)");return i?null:(0,U.tZ)(z.xu,{flexShrink:0,minWidth:84,css:(0,J.iv)(NewChatButton_templateObject()),children:(0,U.tZ)(z.Wv,{hierarchy:"$outline_secondary",size:"$small",onClick:()=>{o("click_new_chat_btn",{chatId:t,purpose:null==e?void 0:e.displayName,model_name:null==e?void 0:e.name.toUpperCase()}),n.push("/")},startContainer:(0,U.tZ)(ei.JO,{as:eo.FNd,size:16,color:"$color_action_blue_primary"}),children:(0,U.tZ)(z.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:r("chat.chat_room.new_chat")})})})},ChatRoomHeader=e=>{let{topic:t,isLoading:n}=e,o=(0,G.T_)(),r=(0,N.ac)("(max-width: 1023px)");return(0,U.tZ)(tl.m,{renderLeft:()=>(0,U.BX)(z.Ug,{gap:"10px",alignItems:"center",children:[r&&(0,U.tZ)(z.xu,{marginRight:10,minWidth:24}),(0,U.tZ)(NewChatButton,{})]}),title:n?(0,U.tZ)(V.Od,{width:"32%",height:"26px",maxWidth:"400px",borderRadius:"8px"}):(0,U.tZ)(z.Jd,{as:"h2",typo:"$160-16-semi",color:"$color_text_primary",textAlign:"center",width:[220,220,400,400],overflow:["hidden","hidden","inherit","inherit"],display:["none","block","block","block"],style:{whiteSpace:"nowrap",textOverflow:"ellipsis"},children:t&&t.trim().length>0?t.slice(0,45):o("chat.chat_room.new_chat")})})},ChatRoomListener=e=>{var t;let{chat:n}=e,o=(0,W.tv)(),r=(null===(t=o.query)||void 0===t?void 0:t.from)==="chatHome",{trackEvent:i}=(0,H.Ke)(),[a,l]=(0,eC.FV)(ey.y),c=(0,eC.Zl)(ey._8),d=(0,eC.rb)(ey._8),{images:s,referenceIds:u}=(0,eC.sJ)(ey.h5),p=(0,eC.sJ)(ey._b),_=(0,eC.sJ)(ey._8),{input:h,isChocoChip:m,adId:g,trendId:x,adContext:v}=_,{model:f}=tg(),{isChatInsideRoom:b,chatId:y}=td(),{setLoadingOverlay:C}=tM(),{generateStatus:k,startGenerate:w,stopGenerate:Z}=tj(),generateFromQuery=()=>{let e=o.query,t=e.q1;t&&(c({input:t,isChocoChip:!1}),null==e||delete e.q1,o.replace({query:{...e}},{},{shallow:!0}),w({message:t,mode:eA.ChatMode.CHAT,model:eA.ChatModel.WRTN_SEARCH,reroll:!1,commandChipType:"",isChocoChip:!1,images:[],ignoreRoom:!0}))};return(0,X.useEffect)(()=>{generateFromQuery()},[]),(0,X.useEffect)(()=>{if(y&&!h&&r){let e=o.query;null==e||delete e.from,o.replace({query:{...e}},{},{shallow:!0}),i("not_working_start_chat_after_create_chat")}},[]),X.useEffect(()=>{(null==_||!_.chatId||(null==_?void 0:_.chatId)===y)&&h&&h.trim().length>0&&n&&(w({message:h,model:f,mode:eA.ChatMode.CHAT,reroll:!1,commandChipType:m?"first_chip_general":"",isChocoChip:m,images:s,referenceIds:u,adId:g,trendId:x,assignmentId:p,adContext:v}),d())},[_,n,h,w,f,m,s,u,d,y,p,v]),X.useEffect(()=>{(null==_||!_.chatId||(null==_?void 0:_.chatId)===y)&&a.shouldRestart&&a.params&&b&&n&&(C(!1),setTimeout(()=>{a.params&&w(a.params),l({shouldRestart:!1,params:null})},10))},[a,n,b,null==_?void 0:_.chatId,y]),(0,X.useEffect)(()=>{let stopGenerateIfNotReady=()=>{"ready"!==k&&Z()};return o.events.on("routeChangeStart",stopGenerateIfNotReady),()=>{o.events.off("routeChangeStart",stopGenerateIfNotReady)}},[o.events,Z,k]),null},ChatSocketContainer=e=>{let{chatId:t,children:n}=e,o=(0,eB.Zl)(ey.BF),r=(0,X.useRef)(null),{socket:i}=(0,tI.i)(),a=(0,X.useCallback)((e,t)=>{e.connected||e.connect(),e.emit("enterChat",{chatId:t,clientHeaders:{"x-wrtn-id":(0,e1.ej)(e1.Mv.__W_ID),"wrtn-locale":e2.MV}})},[]);return(0,X.useEffect)(()=>{if(!i||!t)return;let handleFocus=()=>a(i,t);return window.addEventListener("focus",handleFocus),r.current&&(o(!1),i.emit("leaveChat",{chatId:r.current})),i.connected||i.connect(),i.emit("enterChat",{chatId:t,clientHeaders:{"x-wrtn-id":(0,e1.ej)(e1.Mv.__W_ID),"wrtn-locale":e2.MV}}),r.current=t,()=>{o(!1),window.removeEventListener("focus",handleFocus),i.removeAllListeners()}},[t,i,o,a]),(0,U.tZ)(U.HY,{children:n})};function ChatScrollButton_templateObject(){let e=(0,D._)(["\n        left: calc(50% - 14px - 114px);\n        @media (max-width: 768px) {\n          left: 50%;\n          transform: translateX(-50%);\n        }\n      "]);return ChatScrollButton_templateObject=function(){return e},e}function ChatScrollButton_templateObject1(){let e=(0,D._)(["\n            transition: top 0.2s ease-in-out, opacity 0.2s ease-in-out;\n\n            &:hover {\n              cursor: ",";\n              background-color: ",";\n              background-color: ",";\n            }\n          "]);return ChatScrollButton_templateObject1=function(){return e},e}let ChatScrollButton=e=>{let{bottom:t,loading:n}=e,[o]=(0,t0.e7)(),r=(0,t0.qJ)(),{isUnitDisabled:i}=tg(),a=i||n||o;return(0,U.tZ)(z.xu,{position:"absolute",bottom:t,zIndex:3,css:(0,J.iv)(ChatScrollButton_templateObject()),children:(0,U.tZ)(eg.xE,{isShow:!o,children:(0,U.tZ)(z.xu,{width:"28px",height:"28px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid",borderColor:"$color_outline_secondary",backgroundColor:"$color_surface_tertiary",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.05), 0px 2px 4px -2px rgba(0, 0, 0, 0.10);",onClick:a?void 0:()=>{r()},css:e=>{var t;return(0,J.iv)(ChatScrollButton_templateObject1(),a?"default":"pointer",null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover,(0,z.JH)({theme:e,backgroundColor:"$color_surface_tertiary",overlayColor:"$color_surface_hover"}))},children:(0,U.tZ)(ei.JO,{as:eo.aEp,size:16,color:"$color_icon_secondary"})})})})},InputResizeObserver=e=>{let{children:t}=e,{height:n,observedDiv:o}=(0,N.yU)();return t({height:n,observedDiv:o})},ChatRoom=e=>{let{unit:t,character:n}=e,{getChatIdFromPath:o}=(0,ep.dt)(),r=(0,eC.Zl)(ey.yI),i=o(),{data:a,isLoading:l}=useChatRoom(i),{markLandChatRoom:c}=(0,ep.DD)(),d=(0,eC.Zl)(ey._b);return(0,X.useEffect)(()=>(c(),()=>{r(1)}),[]),(0,X.useEffect)(()=>{var e,t,n,o;(null==a?void 0:a.messages)&&Array.isArray(null==a?void 0:a.messages)&&(null==a?void 0:a.messages.length)>0&&(null==a?void 0:null===(t=a.messages[0])||void 0===t?void 0:null===(e=t.meta)||void 0===e?void 0:e.assignmentId)&&d(null==a?void 0:null===(o=a.messages[0])||void 0===o?void 0:null===(n=o.meta)||void 0===n?void 0:n.assignmentId)},[null==a?void 0:a.messages]),(0,U.tZ)(ChatSocketContainer,{chatId:i,children:(0,U.tZ)(ChatEvaluationABTestProvider,{children:(0,U.tZ)(ChatRoomProvider,{unit:t,character:n,chatId:i,chat:a,children:(0,U.BX)(ChatMessageStatusProvider,{children:[(0,U.tZ)(ChatRoomHeader,{topic:null==a?void 0:a.topic,isLoading:l}),(0,U.tZ)(tQ.x,{}),(0,U.tZ)(z.gC,{height:"calc(100vh - ".concat(56+tQ.w,"px)"),overflow:"hidden",position:"relative",children:(0,U.BX)(t0.ZP,{className:"scroll-container",scrollViewClassName:"scroll-view",followButtonClassName:"follow-button",initialScrollBehavior:"auto",mode:"bottom",children:[(0,U.tZ)(ChatMessageList,{chat:a,chatId:i,isLoading:l},"".concat(i,"_").concat(l)),(0,U.tZ)(InputResizeObserver,{children:e=>{let{height:t,observedDiv:n}=e;return(0,U.BX)(U.HY,{children:[(0,U.tZ)(ChatScrollButton,{bottom:t,loading:l}),(0,U.tZ)(z.xu,{minHeight:200,height:t,maxWidth:"1660px"}),(0,U.tZ)(ChatInput,{observedDiv:n})]})}}),(0,U.tZ)(ChatRoomListener,{chat:a})]})})]})})})})},t6={_id:"664c4ecf7b06b76f1a75182a",userId:"6487d9e8958ad287eb8dd353",isDeleted:!1,version:"1.2.0",shareChatIds:[],messagedAt:"2024-05-21T07:35:47.667Z",createdAt:"2024-05-21T07:35:43.354Z",updatedAt:"2024-05-21T07:35:48.021Z",__v:0,topic:"엔비디아 주식을 무료로 받는 방법?",messages:[{_id:"664c4ed362249af066428cdf",chatId:"664c4ecf7b06b76f1a75182a",role:"user",content:"엔비디아 주식을 무료로 받는 방법?",meta:{},model:"WRTN_SEARCH",pluginName:"search",liked:!1,disliked:!1,dynamicChipList:[],dynamicChips:[],searchResult:[],images:[],__t:"PluginInput",createdAt:"2024-05-21T07:35:47.644Z",updatedAt:"2024-05-21T07:35:47.644Z",__v:0},[{_id:"664c4ed362249af066428ce1",userId:"6487d9e8958ad287eb8dd353",chatId:"664c4ecf7b06b76f1a75182a",role:"assistant",type:"PluginOutput",content:"사용자님! 주식에 관심이 있으시군요 \uD83D\uDCC8\n그렇다면 절대 놓치지 말아야 할 혜자로운 이벤트 소식이 있어요.\nㅤ\n상상인증권에서 MTS(모바일 트레이딩 시스템) 오픈 기념으로, 무료로 주식을 당첨받을 수 있는 랜덤박스 이벤트를 진행한대요 \uD83D\uDC40 \n사용자님께 알려드리고 싶어서 이벤트 정보를 요약해왔어요.\nㅤ\n### 『상상인증권 New MTS 오픈 기념 이벤트』 [[1]](https://ad-tracker-api.dev.wrtn.club/1ku-5Q?inventory=cached_chip)\nㅤ\n#### \uD83D\uDC49 이벤트 내용\n1. **21일간 매일** 주식 랜덤 박스를 열 수 있어요.\uD83C\uDF81\n\n2. **최대 10주까지** 무료로 당첨될 수 있어요!\n\n3. 주식에 당첨되지 않아도 추첨을 통해 엔비디아 10주를 받을 수 있어요.\nㅤ\n#### \uD83D\uDC49 이벤트 기간\n2024년 5월 7일(화) ~ 2024년 5월 27일(월)\nㅤ\n#### \uD83D\uDC49 대상\n- 참여 제한 없이 기존 가입자, 신규 가입자 모두 해당\n- 휴대폰 번호 기준 1일 1회 총 21회 참여 가능\n\nㅤ\n#### \uD83D\uDC49 참여방법\n1. 랜덤 박스 이벤트 페이지 내 '랜덤 박스' 열기 클릭\n2. 주식 증정 받을 이름과 휴대폰번호 입력\n3. 주식 당첨 후 상상인증권 NEW MTS 계좌 개설 시 이벤트 종료 후 6월 7일 일괄 지급\n\nㅤ\n###### 이벤트 유의사항\n###### - 참여 대상 : 만 19세 이상 대한민국 국민 누구나 가능합니다. * 기존, 신규고객 모두 / 마케팅 동의 및 이벤트 신청 필수\n###### - 주식은 해외주식 약정 신청을 하셔야 정상 지급됩니다.\n###### - 주식 당첨 후 2024년 05월 31일까지 계좌를 개설하지 않을 시 당첨이 취소됩니다. * 휴대폰 번호당 1일 1회 참여 가능, 당첨 기회 1번\n###### - 당첨된 해외주식은 수량에 상관 없이 당사 계좌로만 입고 가능합니다.\n###### - 본 이벤트 경품 지급은 타인 계좌 대리 수령이 불가능합니다.\n###### - 본 이벤트는 당사 사정 또는 금융당국의 지도 및 권고에 따라 변경되거나 조기 종료될 수 있습니다.\n###### - 본 이벤트 경품은 6월 7일 일괄 지급 예정이며, 당사 사정에 따라 변경될 수 있습니다.\n###### - 본 이벤트 경품 수령에 따른 제세공과금은 당사가 부담합니다.\n\nㅤ\n###### 투자 유의사항\n###### - 투자 전 상품 설명서 및 약관을 반드시 읽어보시기 바랍니다.\n###### - 상상인증권 new MTS 해외 주식 수수료 : 0.10%~0.25%\n###### - 세금 및 기타비용은 수수료 이외에 별도 부과 / 매도 시, 수수료 외 Sec Fee 0.0008% 부과 / 주문건별 체결금액 기준 / 기타 상세 내용 홈페이지 참고\n###### - 이 금융투자상품은 예금자보호법에 따라 보호되지 않습니다.\n###### - 자세한 사항은 당사 고객센터(1566-0900)로 문의주시기 바랍니다.\n\nㅤ\n###### 한국금융투자협회 심사필 제24-01662호 (2024-04-30 ~ 2024-05-31)",isDeleted:!1,meta:{williamRequestId:"6efa0c06-9b9d-4823-837d-15ea742338d2",adId:"poc_sangsangin_push_msg_1"},version:"1.2.4",model:"WRTN_SEARCH",pluginName:"search",liked:!1,disliked:!1,pluginContent:[],reroll:!1,isSensitiveWord:!1,dynamicChipList:["주식 투자의 기본을 알려줄래?","투자에 필요한 자본이 어떻게 돼?","미래 기술에 대한 예측은?"],dynamicChips:[{adId:"poc_sangsangin_push_dynamic_1",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},eventProperty:{request_id:"ef0910c2-105e-41df-a176-7b025bce73db",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"dynamic_chip"},content:"오늘 주식 뽑기로 갓생 가나요?",link:"https://ad-tracker-api.dev.wrtn.club/y5pm1w?inventory=dynamic_chip"},{content:"주식 투자의 기본을 알려줄래?",category:"none"},{content:"투자에 필요한 자본이 어떻게 돼?",category:"none"},{content:"미래 기술에 대한 예측은?",category:"none"}],searchResult:[{adId:"poc_sangsangin_push_reference_1",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},eventProperty:{request_id:"ddc1ebc2-f110-47fb-b806-5b68b168c8ce",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"reference_link"},siteName:"상상인증권",thumbnail:null,title:"지금 바로 상상인증권에서 주식 받아가세요!",display:"상상인이벤트링크",externalLink:"https://ad-tracker-api.dev.wrtn.club/xTVH4A?inventory=reference_link"},{adId:"poc_sangsangin_push_reference_2",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},adGuidelineText:"한국금융투자협회 심사필 제24-01662호 (2024-04-30 ~ 2024-05-31)",eventProperty:{request_id:"ddc1ebc2-f110-47fb-b806-5b68b168c8ce",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"reference_link"},siteName:"상상인증권",thumbnail:"https://ad-assets.wrtn.ai/poc/sangsangin/Background.png",title:"상상인에서 주식 복권 뽑고 ‘엔비디아 가즈아~’",display:"상상인이벤트링크",externalLink:"https://ad-tracker-api.dev.wrtn.club/Qfxs9w?inventory=reference_link"}],status:"end",__t:"PluginOutput",tokens:[{type:"text",count:1299}],createdAt:"2024-05-21T07:35:47.656Z",updatedAt:"2024-05-21T07:35:49.091Z",__v:0,cachedChip:0,parentTurnId:"5bc0a72c-060c-4dbd-b4ce-7ae46b297b38",turnId:"b04333f9-58b9-4092-92e1-6139b6a8dc8e"}]],tempUnit:{_id:"65d592f0b18cdb6b8aa92373",name:"wrtn_search",enableOptions:{reroll:!1,dynamicChip:!0,staticChip:!1,referenceLink:!1,searchLink:!0,draw:!1,stream:!0,loading:!1,code:!1,promptHub:!1},allowAnonymous:!0,countryCode:"KR",appStatus:"released",webStatus:"released",thumbnail:"https://cdn-image.wrtn.ai/Icon/search_2.png",description:"실시간 검색이 가능해요",displayName:"AI 검색",tags:[],priority:10,createdAt:"2024-02-21T06:06:40.379Z",updatedAt:"2024-02-21T06:06:40.379Z",cardDescription:"AI 검색은 실시간 정보를 제공하는 뤼튼의 AI 에이전트입니다.\n최신 정보를 찾고 내용을 종합하여 사용자가 원하는 형태의 답변을 제공합니다. 수많은 정보를 찾아 요약하여 검색 시간을 효율적으로 단축합니다. 검색한 결과를 다듬을 수 있고, 그 결과를 바탕으로 새로운 정보를 생성할 수도 있습니다.",provider:"Wrtn"}},t8={_id:"664c4ecf7b06b76f1a75182a",userId:"6487d9e8958ad287eb8dd353",isDeleted:!1,version:"1.2.0",shareChatIds:[],messagedAt:"2024-05-21T07:35:47.667Z",createdAt:"2024-05-21T07:35:43.354Z",updatedAt:"2024-05-21T07:35:48.021Z",__v:0,topic:"엔비디아 주식을 무료로 받는 방법?",messages:[{_id:"664c4ed362249af066428cdf",chatId:"664c4ecf7b06b76f1a75182a",role:"user",content:"엔비디아 주식을 무료로 받는 방법?",meta:{},model:"WRTN_SEARCH",pluginName:"search",liked:!1,disliked:!1,dynamicChipList:[],dynamicChips:[],searchResult:[],images:[],__t:"PluginInput",createdAt:"2024-05-21T07:35:47.644Z",updatedAt:"2024-05-21T07:35:47.644Z",__v:0},[{_id:"664c4ed362249af066428ce1",userId:"6487d9e8958ad287eb8dd353",chatId:"664c4ecf7b06b76f1a75182a",role:"assistant",type:"PluginOutput",content:"사용자님! 주식에 관심이 있으시군요 \uD83D\uDCC8\n그렇다면 절대 놓치지 말아야 할 혜자로운 이벤트 소식이 있어요.\nㅤ\n상상인증권에서 MTS(모바일 트레이딩 시스템) 오픈 기념으로, 무료로 주식을 당첨받을 수 있는 랜덤박스 이벤트를 진행한대요 \uD83D\uDC40 \n사용자님께 알려드리고 싶어서 이벤트 정보를 요약해왔어요.\nㅤ\n### 『상상인증권 New MTS 오픈 기념 이벤트』 [[1]](https://ad.wrtn.ai/Wey3qg?inventory=cached_chip)\nㅤ\n#### \uD83D\uDC49 이벤트 내용\n1. **21일간 매일** 주식 랜덤 박스를 열 수 있어요.\uD83C\uDF81\n\n2. **최대 10주까지** 무료로 당첨될 수 있어요!\n\n3. 주식에 당첨되지 않아도 추첨을 통해 엔비디아 10주를 받을 수 있어요.\nㅤ\n#### \uD83D\uDC49 이벤트 기간\n2024년 5월 7일(화) ~ 2024년 5월 27일(월)\nㅤ\n#### \uD83D\uDC49 대상\n- 참여 제한 없이 기존 가입자, 신규 가입자 모두 해당\n- 휴대폰 번호 기준 1일 1회 총 21회 참여 가능\n\nㅤ\n#### \uD83D\uDC49 참여방법\n1. 랜덤 박스 이벤트 페이지 내 '랜덤 박스' 열기 클릭\n2. 주식 증정 받을 이름과 휴대폰번호 입력\n3. 주식 당첨 후 상상인증권 NEW MTS 계좌 개설 시 이벤트 종료 후 6월 7일 일괄 지급\n\nㅤ\n###### 이벤트 유의사항\n###### - 참여 대상 : 만 19세 이상 대한민국 국민 누구나 가능합니다. * 기존, 신규고객 모두 / 마케팅 동의 및 이벤트 신청 필수\n###### - 주식은 해외주식 약정 신청을 하셔야 정상 지급됩니다.\n###### - 주식 당첨 후 2024년 05월 31일까지 계좌를 개설하지 않을 시 당첨이 취소됩니다. * 휴대폰 번호당 1일 1회 참여 가능, 당첨 기회 1번\n###### - 당첨된 해외주식은 수량에 상관 없이 당사 계좌로만 입고 가능합니다.\n###### - 본 이벤트 경품 지급은 타인 계좌 대리 수령이 불가능합니다.\n###### - 본 이벤트는 당사 사정 또는 금융당국의 지도 및 권고에 따라 변경되거나 조기 종료될 수 있습니다.\n###### - 본 이벤트 경품은 6월 7일 일괄 지급 예정이며, 당사 사정에 따라 변경될 수 있습니다.\n###### - 본 이벤트 경품 수령에 따른 제세공과금은 당사가 부담합니다.\n\nㅤ\n###### 투자 유의사항\n###### - 투자 전 상품 설명서 및 약관을 반드시 읽어보시기 바랍니다.\n###### - 상상인증권 new MTS 해외 주식 수수료 : 0.10%~0.25%\n###### - 세금 및 기타비용은 수수료 이외에 별도 부과 / 매도 시, 수수료 외 Sec Fee 0.0008% 부과 / 주문건별 체결금액 기준 / 기타 상세 내용 홈페이지 참고\n###### - 이 금융투자상품은 예금자보호법에 따라 보호되지 않습니다.\n###### - 자세한 사항은 당사 고객센터(1566-0900)로 문의주시기 바랍니다.\n\nㅤ\n###### 한국금융투자협회 심사필 제24-01662호 (2024-04-30 ~ 2024-05-31)",isDeleted:!1,meta:{williamRequestId:"6efa0c06-9b9d-4823-837d-15ea742338d2",adId:"poc_sangsangin_push_msg_1"},version:"1.2.4",model:"WRTN_SEARCH",pluginName:"search",liked:!1,disliked:!1,pluginContent:[],reroll:!1,isSensitiveWord:!1,dynamicChipList:["주식 투자의 기본을 알려줄래?","투자에 필요한 자본이 어떻게 돼?","미래 기술에 대한 예측은?"],dynamicChips:[{adId:"poc_sangsangin_push_dynamic_1",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},eventProperty:{request_id:"ef0910c2-105e-41df-a176-7b025bce73db",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"dynamic_chip"},content:"오늘 주식 뽑기로 갓생 가나요?",link:"https://ad.wrtn.ai/6DqvpA?inventory=dynamic_chip"},{content:"주식 투자의 기본을 알려줄래?",category:"none"},{content:"투자에 필요한 자본이 어떻게 돼?",category:"none"},{content:"미래 기술에 대한 예측은?",category:"none"}],searchResult:[{adId:"poc_sangsangin_push_reference_1",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},eventProperty:{request_id:"ddc1ebc2-f110-47fb-b806-5b68b168c8ce",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"reference_link"},siteName:"상상인증권",thumbnail:null,title:"지금 바로 상상인증권에서 주식 받아가세요!",display:"상상인이벤트링크",externalLink:"https://ad.wrtn.ai/dH29Vg?inventory=reference_link"},{adId:"poc_sangsangin_push_reference_2",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},adGuidelineText:"한국금융투자협회 심사필 제24-01662호 (2024-04-30 ~ 2024-05-31)",eventProperty:{request_id:"ddc1ebc2-f110-47fb-b806-5b68b168c8ce",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"reference_link"},siteName:"상상인증권",thumbnail:"https://ad-assets.wrtn.ai/poc/sangsangin/Background.png",title:"상상인에서 주식 복권 뽑고 ‘엔비디아 가즈아~’",display:"상상인이벤트링크",externalLink:"https://ad.wrtn.ai/jhB0UQ?inventory=reference_link"}],status:"end",__t:"PluginOutput",tokens:[{type:"text",count:1299}],createdAt:"2024-05-21T07:35:47.656Z",updatedAt:"2024-05-21T07:35:49.091Z",__v:0,cachedChip:0,parentTurnId:"5bc0a72c-060c-4dbd-b4ce-7ae46b297b38",turnId:"b04333f9-58b9-4092-92e1-6139b6a8dc8e"}]],tempUnit:{_id:"65d592f0b18cdb6b8aa92373",name:"wrtn_search",enableOptions:{reroll:!1,dynamicChip:!0,staticChip:!1,referenceLink:!1,searchLink:!0,draw:!1,stream:!0,loading:!1,code:!1,promptHub:!1},allowAnonymous:!0,countryCode:"KR",appStatus:"released",webStatus:"released",thumbnail:"https://cdn-image.wrtn.ai/Icon/search_2.png",description:"실시간 검색이 가능해요",displayName:"AI 검색",tags:[],priority:10,createdAt:"2024-02-21T06:06:40.379Z",updatedAt:"2024-02-21T06:06:40.379Z",cardDescription:"AI 검색은 실시간 정보를 제공하는 뤼튼의 AI 에이전트입니다.\n최신 정보를 찾고 내용을 종합하여 사용자가 원하는 형태의 답변을 제공합니다. 수많은 정보를 찾아 요약하여 검색 시간을 효율적으로 단축합니다. 검색한 결과를 다듬을 수 있고, 그 결과를 바탕으로 새로운 정보를 생성할 수도 있습니다.",provider:"Wrtn"}},AppChatRoom=()=>{let e=(0,en.useRouter)(),{trackEvent:t}=(0,H.Ke)(),n="prod"===e2.Vi?t8:t6,o=n._id;return(0,X.useEffect)(()=>{let trackAndFetchData=async()=>{var o,r,i;t("view_webview_page",{screen_name:"WebView",feature_name:"ad",advertiser_id:"sangsangin",url:e.pathname});let a=n.messages[1][0].content,l=null!==(o=/\[🔗바로가기\]\(([^)]+)\)/.exec(a))&&void 0!==o?o:[],c=null!==(r=/\[\[1\]\]\(([^)]+)\)/.exec(a))&&void 0!==r?r:[],d=null!==(i=l[1])&&void 0!==i?i:c[1];if(d)try{await eL.default.get(d+"&position=home",{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(e){}};trackAndFetchData()},[]),(0,U.tZ)(ChatSocketContainer,{chatId:o,children:(0,U.tZ)(ChatEvaluationABTestProvider,{children:(0,U.tZ)(ChatRoomProvider,{unit:n.tempUnit,character:null,chatId:o,chat:n,children:(0,U.tZ)(z.gC,{height:"100%",backgroundColor:"$color_bg_screen",children:(0,U.tZ)(ChatMessageList,{chat:n,chatId:o,isLoading:!1,isAdWebview:!0},"".concat(o,"_").concat(!1))})})})})};var t7=n(41183),t5=n.n(t7);let ChatRoomHead=e=>{let{character:t}=e,n=(0,G.bU)();return n!==eq.pS.ko?null:(0,U.tZ)(t5(),{children:t&&(0,U.BX)(U.HY,{children:[(0,U.tZ)("title",{children:characterTitle(n,t)}),(0,U.tZ)("meta",{name:"description",content:characterDescription(n,t)},"description"),(0,U.tZ)("meta",{property:"og:description",content:characterDescription(n,t)},"og:description"),(0,U.tZ)("meta",{property:"og:image",content:characterThumbnail(t)})]})})},characterTitle=(e,t)=>{switch(e){case eq.pS.ko:return"".concat(t.name," | 뤼튼 캐릭터");case eq.pS.ja:return"";default:return"뤼튼"}},characterDescription=(e,t)=>{let n=t.description.split(/([.!?])\s*/)[0];switch(e){case eq.pS.ko:return"".concat(n);case eq.pS.ja:return"";default:return"당신의 첫 AI 에이전트 뤼튼. AI 검색부터 나만의 AI 캐릭터까지, AI의 끝없는 가능성을 탐험해 보세요."}},characterThumbnail=e=>{var t,n,o,r,i,a;return(null===(t=e.profileImage)||void 0===t?void 0:t.w600)?null===(n=e.profileImage)||void 0===n?void 0:n.w600:(null===(o=e.profileImage)||void 0===o?void 0:o.w200)?null===(r=e.profileImage)||void 0===r?void 0:r.w200:(null===(i=e.profileImage)||void 0===i?void 0:i.origin)?null===(a=e.profileImage)||void 0===a?void 0:a.origin:e.thumbnail?e.thumbnail:"https://fe-web-assets.wow.wrtn.ai/og-image.png"},ChatRoomPage=e=>{let{unit:t,character:n}=e;return(0,U.BX)(U.HY,{children:[(0,U.tZ)(ChatRoomHead,{unit:t,character:n}),(0,U.tZ)(z.gC,{width:"100%",height:"100dvh",overflow:"hidden",backgroundColor:"$color_bg_screen",position:"relative",children:(0,U.tZ)(ChatRoom,{unit:t,character:n})})]})},ChatRoomV2Page=e=>{let{unit:t}=e,{replace:n}=(0,W.tv)();return e2.Ts?(0,U.BX)(U.HY,{children:["ChatRoomV2Page, ",null==t?void 0:t._id]}):(n("/"),null)},getTrendAiSearchList=e=>q.Np.William.get("/trend-ai-search",e),getTrendAiSearchKey=(e,t)=>0===e?["/trend-ai-search",String(e)]:t?["/trend-ai-search",String(e),t.nextCursor]:null,useInfiniteTrendAiSearchList=()=>{let{data:e,setSize:t,isLoading:n}=(0,et.g_)(getTrendAiSearchKey,async e=>await getTrendAiSearchList({params:{limit:4,...e?{cursor:e[2]}:{}}}),{fallback:[]});return{data:e,setSize:t,isLoading:n}},useTrendAiSearchList=function(){let{limit:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:5},{data:t,isLoading:n}=(0,et.dH)("/trend-ai-search",()=>getTrendAiSearchList({params:{limit:e}}),{fallback:[],revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1});return{data:t,isLoading:n}};var t9=n(72975);let TrendAiSearchItemSkeleton=()=>(0,U.BX)(U.HY,{children:[(0,U.tZ)(z.xu,{width:"60px",height:"60px",borderRadius:"8px",border:"1px solid",borderColor:"$color_outline_tertiary",flex:"0 0 auto",overflow:"hidden",children:(0,U.tZ)(V.Od,{})}),(0,U.BX)(z.gC,{gap:"10px",width:"100%",children:[(0,U.tZ)(V.Od,{height:"22px"}),(0,U.tZ)(V.Od,{height:"44px"}),(0,U.tZ)(V.Od,{width:"60px",height:"16px"})]})]});function TrendAiSearchItem_templateObject(){let e=(0,D._)(["\n        &:first-of-type {\n          padding-top: 0;\n        }\n      "]);return TrendAiSearchItem_templateObject=function(){return e},e}function TrendAiSearchItem_templateObject1(){let e=(0,D._)(["\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n              "]);return TrendAiSearchItem_templateObject1=function(){return e},e}function TrendAiSearchItem_templateObject2(){let e=(0,D._)(["\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n              "]);return TrendAiSearchItem_templateObject2=function(){return e},e}let TrendAiSearchItem=e=>{let{item:t,isLoading:n,index:o}=e,{getFormatUpdateAt:r}=(0,ee.xh)(),{postMessage:i}=(0,N.sW)(),a=n||!t,{trackEvent:l}=(0,H.Ke)(),appNavigateToDetailPage=e=>{l("click_trend_card",{index:o,trend_id:e,trend_title:null==t?void 0:t.title,section_order:4}),i({type:"navigate",payload:{screen:"trend_ai_search_detail",params:{trendId:e},type:"push"}})};return(0,U.tZ)(z.Ug,{onClick:a?void 0:()=>appNavigateToDetailPage(t._id),gap:"12px",padding:"16px 0",borderBottom:"1px solid",borderColor:"$color_divider_secondary",css:(0,J.iv)(TrendAiSearchItem_templateObject()),children:a?(0,U.tZ)(TrendAiSearchItemSkeleton,{}):(0,U.BX)(U.HY,{children:[(0,U.tZ)(z.xu,{width:"60px",height:"60px",borderRadius:"8px",border:"1px solid",borderColor:"$color_outline_tertiary",flex:"0 0 auto",overflow:"hidden",children:(0,U.tZ)("img",{alt:t.title,src:t.thumbnail,width:"100%",height:"100%"})}),(0,U.BX)(z.gC,{gap:"10px",width:"100%",children:[(0,U.tZ)(z.Jd,{typo:"$140-16-semi",color:"$color_text_primary",css:(0,J.iv)(TrendAiSearchItem_templateObject1()),children:t.title}),(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_primary",css:(0,J.iv)(TrendAiSearchItem_templateObject2()),children:t.summary}),(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(ei.JO,{as:eo.Ar$,size:16,color:"$color_icon_tertiary"}),(0,U.tZ)(z.Jd,{typo:"$110-12-med",color:"$color_text_tertiary",children:r(new Date(t.createdAt))})]})]})]})})},TrendAiSearchList=e=>{var t;let{infinite:n=!1}=e,{trackEvent:o}=(0,H.Ke)(),{data:r,setSize:i,isLoading:a}=useInfiniteTrendAiSearchList(),l=(null==r?void 0:r.flatMap(e=>e.trendAiSearchList))||[],c=(null==r?void 0:null===(t=r[r.length-1])||void 0===t?void 0:t.nextCursor)||!1,d=n?l.slice(1):l,[s,u]=(0,t9.YD)({triggerOnce:!0,threshold:0});return(X.useEffect(()=>{u&&c&&i(e=>e+1)},[u,c,i]),X.useEffect(()=>{(null==d?void 0:d.length)>0&&o("view_trend_card",{content:{...null==d?void 0:d.map(e=>e._id)},section_order:4})},[d,o]),N.sk)?null:(0,U.BX)(z.gC,{children:[a?Array.from({length:2}).map((e,t)=>(0,U.tZ)(TrendAiSearchItem,{index:t,isLoading:a},t)):null==d?void 0:d.map((e,t)=>(0,U.tZ)(TrendAiSearchItem,{index:t,item:e},t)),n&&!a&&(0,U.tZ)(z.xu,{width:"100%",height:"1px",ref:s}),n&&!c&&(0,U.tZ)(z.xu,{width:"100%",height:"50px"})]})},TrendAiSearchListHeader=()=>{let e=(0,G.T_)("chat.trend_ai"),{postMessage:t}=(0,N.sW)(),{trackEvent:n}=(0,H.Ke)();return(0,U.BX)(z.Ug,{justifyContent:"space-between",children:[(0,U.tZ)(z.Jd,{typo:"$140-18-semi",color:"$color_text_primary",children:e("title")}),(0,U.tZ)(z.zx,{onClick:()=>{n("click_more_btn",{section_name:"trendAiSearch"}),t({type:"navigate",payload:{screen:"trend_ai_search_all",params:{},type:"push"}})},children:(0,U.tZ)(ei.JO,{as:eo.xMl,size:24,color:"$color_action_blue_primary"})})]})},AppTrendAiSearch=()=>(0,U.BX)(z.gC,{width:"100%",gap:"14px",px:"20px",children:[(0,U.tZ)(TrendAiSearchListHeader,{}),(0,U.tZ)(TrendAiSearchList,{})]});function TrendAiSearchThumbnailSkeleton_templateObject(){let e=(0,D._)(["\n        aspect-ratio: 16 / 9;\n      "]);return TrendAiSearchThumbnailSkeleton_templateObject=function(){return e},e}let TrendAiSearchThumbnailSkeleton=()=>(0,U.BX)(U.HY,{children:[(0,U.tZ)(z.xu,{borderRadius:"12px",border:"1px solid",borderColor:"$color_outline_tertiary",overflow:"hidden",css:(0,J.iv)(TrendAiSearchThumbnailSkeleton_templateObject()),children:(0,U.tZ)(V.Od,{})}),(0,U.BX)(z.gC,{gap:"10px",children:[(0,U.tZ)(V.Od,{height:"22px"}),(0,U.tZ)(V.Od,{height:"44px"}),(0,U.tZ)(V.Od,{width:"60px",height:"16px"})]})]});function TrendAiSearchThumbnail_templateObject(){let e=(0,D._)(["\n              aspect-ratio: 16 / 9;\n            "]);return TrendAiSearchThumbnail_templateObject=function(){return e},e}function TrendAiSearchThumbnail_templateObject1(){let e=(0,D._)(["\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n              "]);return TrendAiSearchThumbnail_templateObject1=function(){return e},e}function TrendAiSearchThumbnail_templateObject2(){let e=(0,D._)(["\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n              "]);return TrendAiSearchThumbnail_templateObject2=function(){return e},e}let TrendAiSearchThumbnail=()=>{let{getFormatUpdateAt:e}=(0,ee.xh)(),{postMessage:t}=(0,N.sW)(),{data:n,isLoading:o}=useTrendAiSearchList({limit:1}),r=null==n?void 0:n.trendAiSearchList[0],i=o||!r,appNavigateToDetailPage=e=>{t({type:"navigate",payload:{screen:"trend_ai_search_detail",params:{trendId:e},type:"push"}})};return N.sk?null:(0,U.tZ)(z.gC,{onClick:i?void 0:()=>appNavigateToDetailPage(r._id),gap:"16px",borderBottom:"1px solid",borderColor:"$color_divider_secondary",paddingBottom:"14px",children:i?(0,U.tZ)(TrendAiSearchThumbnailSkeleton,{}):(0,U.BX)(U.HY,{children:[(0,U.tZ)(z.xu,{borderRadius:"12px",border:"1px solid",borderColor:"$color_outline_tertiary",overflow:"hidden",css:(0,J.iv)(TrendAiSearchThumbnail_templateObject()),children:(0,U.tZ)("img",{src:r.thumbnail,alt:r.title,width:"100%"})}),(0,U.BX)(z.gC,{gap:"10px",children:[(0,U.tZ)(z.Jd,{typo:"$140-16-semi",color:"$color_text_primary",css:(0,J.iv)(TrendAiSearchThumbnail_templateObject1()),children:r.title}),(0,U.tZ)(z.Jd,{typo:"$160-14-med",color:"$color_text_primary",css:(0,J.iv)(TrendAiSearchThumbnail_templateObject2()),children:r.summary}),(0,U.BX)(z.Ug,{gap:"4px",alignItems:"center",children:[(0,U.tZ)(ei.JO,{as:eo.Ar$,size:16,color:"$color_icon_tertiary"}),(0,U.tZ)(z.Jd,{typo:"$110-12-med",color:"$color_text_tertiary",children:e(new Date(r.createdAt))})]})]})]})})};var ne=n(28786);function AppChatHomePage_templateObject(){let e=(0,D._)(["\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            -webkit-user-drag: none;\n          "]);return AppChatHomePage_templateObject=function(){return e},e}let AppChatHomePage=()=>(0,U.tZ)(ne.c,{children:(0,U.tZ)(ChocoChipABTestProvider,{children:(0,U.BX)(z.gC,{width:"100%",minHeight:"100vh",gap:"60px",backgroundColor:"$color_bg_screen",css:(0,J.iv)(AppChatHomePage_templateObject()),children:[(0,U.tZ)(AppChocoChipList,{}),(0,U.tZ)(AppCharacterRandomList,{}),(0,U.tZ)(AppTrendAiSearch,{})]})})});function AppTrendAiSearchPage_templateObject(){let e=(0,D._)(["\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n          -webkit-user-drag: none;\n        "]);return AppTrendAiSearchPage_templateObject=function(){return e},e}let AppTrendAiSearchPage=()=>{let{trackEvent:e}=(0,H.Ke)();return X.useEffect(()=>{e("view_trend_page")},[]),(0,U.tZ)(ne.c,{children:(0,U.BX)(z.gC,{py:"30px",px:["20px","20px","40px"],width:"100%",minHeight:"100vh",gap:"14px",backgroundColor:"$color_bg_screen",css:(0,J.iv)(AppTrendAiSearchPage_templateObject()),children:[(0,U.tZ)(TrendAiSearchThumbnail,{}),(0,U.tZ)(TrendAiSearchList,{infinite:!0})]})})},AppAdChatRoomPageHome=()=>(0,U.tZ)(ne.c,{children:(0,U.tZ)(z.gC,{width:"100%",height:"calc(100dvh)",overflow:"hidden",backgroundColor:"$color_bg_screen",position:"relative",children:(0,U.tZ)(AppChatRoom,{})})}),AssignmentLayout=e=>{let{content:t,title:n}=e;return(0,U.BX)(z.gC,{width:"100%",height:"100%",children:[(0,U.tZ)(tl.m,{title:n}),(0,U.tZ)(tQ.x,{title:"레포트 자동 완성도 무료인가요?"}),(0,U.tZ)(z.xu,{width:"100%",height:"100%",overflowY:"auto",overflowX:"hidden",children:t})]})};var nt=n(36856),nn=n(66323);let no=e0()(()=>Promise.all([n.e(5470),n.e(5454),n.e(8463),n.e(1319)]).then(n.bind(n,41319)).then(e=>e.AssignmentForm),{loadableGenerated:{webpack:()=>[41319]},ssr:!1}),Assignment=()=>{let{data:e}=(0,nn.qf)(),t=(0,G.T_)();return(0,U.tZ)(nt.WQ,{children:(0,U.tZ)(nt.GN,{data:e,children:(0,U.tZ)(nt.N3,{children:(0,U.tZ)(nt.Z6,{children:(0,U.tZ)(nt.PO,{children:(0,U.tZ)(nt.no,{children:(0,U.tZ)(AssignmentLayout,{title:t("feature_assignment.header"),content:(0,U.tZ)(no,{})})})})})})})})},AssignmentPage=()=>{let{trackEvent:e}=(0,H.Ke)();return(0,X.useEffect)(()=>{e("view_ai_report_page")},[]),(0,U.tZ)(Assignment,{})}},15982:function(e,t,n){n.d(t,{sD:function(){return ChatDragDropDetector},aA:function(){return ChatInputWrapper},kb:function(){return d},Z:function(){return InputIconGroup},c7:function(){return SendButton}});var o=n(5079),r=n(54067),i=n(44194),a=n(35237),l=n(92376),c=n(31275);function _templateObject(){let e=(0,o._)(["\n            ","\n            ","\n          "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,o._)(["\n  resize: none;\n  outline: none;\n  &::placeholder {\n    color: ",";\n    line-height: 160%;\n    font-size: 16px;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,o._)(["\n  // richTextarea는 디자인시스템을 사용할 수 없어서 직접 css 작성\n  font-size: 16px;\n  line-height: 160%;\n  font-weight: 500;\n  border: none;\n  background-color: transparent;\n"]);return _templateObject2=function(){return e},e}let d=(0,i.forwardRef)((e,t)=>{let{linkHighlight:n=!1,...o}=e,{flag:i}=(0,c.T6)("fe-web-chat-link"),d={...o,ref:t,maxRows:8,css:commonStyles};return(0,r.tZ)(l.Y4,{...d,css:e=>(0,a.iv)(_templateObject(),s,commonStyles(e)),linkHighlight:i&&n,"data-testid":"chat-textarea"})}),commonStyles=e=>{var t;return(0,a.iv)(_templateObject1(),"dark"===e.mode?e.colors.$color_text_tertiary:null===(t=e.colors)||void 0===t?void 0:t.$color_text_textfield_disabled)},s=(0,a.iv)(_templateObject2());var u=n(11012),p=n(22346),_=n(60819),h=n(67697),m=n(41671),g=n(63040),x=n(16660),v=n(81623),f=n(30008),b=n(34867);let InvisibleFileInput=e=>{let{inputRef:t,onChange:n}=e;return(0,r.tZ)("input",{id:"file_upload_input",ref:t,style:{display:"none"},type:"file",accept:".jpg, .jpeg, .png, .gif, .webp, .pdf, .txt, .hwp, .docx",multiple:!0,onChange:n})};function InputIconGroup_templateObject(){let e=(0,o._)(["\n              &:hover {\n                cursor: ",";\n                background-color: ",";\n              }\n            "]);return InputIconGroup_templateObject=function(){return e},e}function InputIconGroup_templateObject1(){let e=(0,o._)(["\n              &:hover {\n                cursor: ",";\n                background-color: ",";\n              }\n            "]);return InputIconGroup_templateObject1=function(){return e},e}function InputIconGroup_templateObject2(){let e=(0,o._)(["\n              &:hover {\n                cursor: ",";\n                background-color: ",";\n              }\n            "]);return InputIconGroup_templateObject2=function(){return e},e}function _templateObject3(){let e=(0,o._)(["\n              &:hover {\n                cursor: ",";\n                background-color: ",";\n              }\n            "]);return _templateObject3=function(){return e},e}let InputIconGroup=e=>{let{isDisabled:t,drawable:n,promptHub:o,code:d,file:s,fileOptionCallback:y,fileEventProperties:C,iconGroupEventProperties:k,setInputText:w,chatRoomFileLimitExceeded:Z,onError:I}=e,O=i.useRef(null),S=(0,x.T_)("chat.chat_input.icon_group"),B=(0,x.bU)(),{trackEvent:$}=(0,g.Ke)(),{user:A}=(0,b.aF)(),{addAttachments:M,isAvailableAttachment:R}=(0,u.sH)(),{handleOpenLoginDialog:j}=(0,f.tF)(),{flag:E}=(0,c.T6)("fe-web-chat-filechat"),[T,L]=(0,v.FV)(v.WA),F=!t&&R&&!Z,onChangeFiles=async e=>{var t;let n=e.target.files;n&&0!==n.length&&(await M(n,C,{onError:I}),(null===(t=O.current)||void 0===t?void 0:t.value)&&(O.current.value=""))};return n||o||d||s?(0,r.BX)(_.Ug,{gap:"4px",children:[T&&(0,r.tZ)(h.YH,{setInput:w}),s&&E&&(0,r.BX)(l.u,{content:S("tooltip.attach_file"),children:[(0,r.tZ)(_.xu,{p:"4px",size:28,onClick:F?()=>{var e;if(!A)return j();$("click_file_upload_btn",{current_box_number:null==C?void 0:C.current_box_number,chat_id:null==C?void 0:C.chat_id}),null===(e=O.current)||void 0===e||e.click(),null==y||y()}:void 0,onMouseEnter:()=>$("hover_file_upload_btn",{chat_id:null==C?void 0:C.chat_id,purpose:null==k?void 0:k.purpose,is_pro_mode:null==k?void 0:k.is_pro_mode}),borderRadius:"3px",css:e=>{var t;return(0,a.iv)(InputIconGroup_templateObject(),F?"pointer":"not-allowed",null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},children:(0,r.tZ)(m.JO,{as:p.wJV,color:F?"$color_icon_secondary":"$color_icon_disabled",size:20})}),(0,r.tZ)(InvisibleFileInput,{inputRef:O,onChange:onChangeFiles})]}),"ja-JP"!==B&&A&&o&&(0,r.tZ)(l.u,{content:S("tooltip.prompt_hub"),children:(0,r.tZ)(_.xu,{p:"4px",size:28,onClick:()=>{L(!0),$("click_prompthub_markdown",k)},borderRadius:"3px",css:e=>{var n;return(0,a.iv)(InputIconGroup_templateObject1(),t?"not-allowed":"pointer",null===(n=e.colors)||void 0===n?void 0:n.$color_surface_secondary_hover)},children:(0,r.tZ)(m.JO,{as:p.ZPN,color:t?"$color_icon_disabled":"$color_icon_secondary",size:20})})}),d&&(0,r.tZ)(l.u,{content:S("tooltip.code"),children:(0,r.tZ)(_.xu,{p:"4px",size:28,onClick:()=>{$("click_code_markdown",k),w(e=>e+S("template.code"))},borderRadius:"3px",css:e=>{var n;return(0,a.iv)(InputIconGroup_templateObject2(),t?"not-allowed":"pointer",null===(n=e.colors)||void 0===n?void 0:n.$color_surface_secondary_hover)},children:(0,r.tZ)(m.JO,{as:p.HPd,color:t?"$color_icon_disabled":"$color_icon_secondary",size:20})})}),A&&n&&(0,r.tZ)(l.u,{content:S("tooltip.image"),children:(0,r.tZ)(_.xu,{p:"4px",size:28,onClick:()=>{$("click_draw_markdown"),w(e=>e+"[[넓은 우주 공간이 배경으로 펼쳐져 있으며, 반짝이는 별들과 소용돌이치는 은하들이 그 공간을 채우고 있습니다. 중앙에는 매혹적이고 신비로운 색상의 우주 먼지 구름이 황금빛 털의 골든 리트리버 개를 둘러싸고 있습니다.]] 그려줘")},borderRadius:"3px",css:e=>{var n;return(0,a.iv)(_templateObject3(),t?"not-allowed":"pointer",null===(n=e.colors)||void 0===n?void 0:n.$color_surface_secondary_hover)},children:(0,r.tZ)(m.JO,{as:p._s$,color:t?"$color_icon_disabled":"$color_icon_secondary",size:20})})})]}):null},ChatInputWrapper=e=>{let{children:t,isActive:n,onFocus:o,isDisabled:i,maxWidth:a=650,gap:l="12px",padding:c="20px",attachmentList:d}=e;return(0,r.BX)(_.gC,{position:"relative",padding:c,width:"100%",maxWidth:a,borderRadius:"34px",gap:l,onFocus:o,border:"2px solid",borderColor:n?"$color_outline_tertiary":"transparent",backgroundColor:i?"$color_surface_secondary":"$color_surface_tertiary",children:[d,t]})};function SendButton_templateObject(){let e=(0,o._)(["\n        transition: padding 0.2s ease-in-out;\n\n        &:hover {\n          cursor: ",";\n          background-color: ",";\n          padding-right: ",";\n        }\n      "]);return SendButton_templateObject=function(){return e},e}let SendButton=e=>{let{isActive:t,animateOnHover:n,onClick:o,isDisabled:i,canStopGenerate:l,icon:c,bottom:d="22px"}=e;return(0,r.tZ)(_.gC,{position:"absolute",right:"20px",bottom:d,justifyContent:"center",alignItems:"center",backgroundColor:t?"$color_surface_brand":l?"$color_icon_primary":"$color_icon_disabled",borderRadius:"16px",p:"4px",size:"28px",onClick:i?void 0:o,css:e=>(0,a.iv)(SendButton_templateObject(),i?"not-allowed":t?"pointer":"default",t&&(0,_.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_surface_brand"}),t&&n&&"8px"),children:c})},ChatDragDropDetector=e=>{let{children:t,fileUploadEventProperties:n}=e,o=(0,i.useRef)(null),{addAttachments:a}=(0,u.sH)(),l=(0,i.useCallback)(async e=>{var t;e.preventDefault(),e.stopPropagation();let o=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;o&&!(o.length<1)&&await a(o,n)},[a,n]);return(0,r.tZ)(_.Ug,{onDrop:l,position:"relative",width:"100%",height:"100%",justifyContent:"center",ref:o,children:t})}},58933:function(e,t,n){n.d(t,{gE:function(){return s},QC:function(){return b},_b:function(){return f},h5:function(){return m},u3:function(){return h},dW:function(){return r},_8:function(){return c},UB:function(){return _},Bb:function(){return p},Bh:function(){return i},GY:function(){return y},Aq:function(){return x},gn:function(){return v},CU:function(){return a},DY:function(){return g},yI:function(){return d},y:function(){return l},BF:function(){return u}});var o=n(45570);let r=(0,o.cn)({key:"chatInputState",default:""}),i=(0,o.cn)({key:"chatTempInputState",default:""}),a=(0,o.cn)({key:"generateStatusState",default:"ready"}),l=(0,o.cn)({key:"shouldRestartState",default:{shouldRestart:!1,params:null}}),c=(0,o.cn)({key:"chatListenState",default:{input:"",isChocoChip:!1,adId:void 0,trendId:void 0,adContext:void 0}});(0,o.cn)({key:"loginDialogState",default:!1}),(0,o.cn)({key:"loginInAppBlockDialogState",default:!1}),(0,o.cn)({key:"nonLoginGenerateLimitState",default:!1});let d=(0,o.cn)({key:"messageEvaluationBannerIndex",default:1}),s=(0,o.cn)({key:"loadingOverlayState",default:!1}),u=(0,o.cn)({key:"socketConnectedState",default:!1}),p=(0,o.cn)({key:"chatRoomAttachmentState",default:[]}),_=(0,o.nZ)({key:"chatRoomAttachmentSelector",get:e=>{let{get:t}=e,n=t(p),o=0,r=0,i=0;return n.forEach(e=>{"image"===e.type?i++:"file"===e.type?r++:"link"===e.type&&o++}),{linkCount:o,fileCount:r,imageCount:i}}}),h=(0,o.cn)({key:"attachmentState",default:[]}),m=(0,o.nZ)({key:"chatListenWithAttachmentsState",get:e=>{let{get:t}=e,n=t(h),o=t(g),r=[],i=[],a=0,l=0;n.forEach(e=>{"image"===e.type?(r.push(e.url),a++):"file"===e.type?(i.push(e._id),a++):"link"===e.type&&(i.push(o[e.url]),l++)});let c=n.every(e=>"success"===e.status);return{attachments:n,images:r,referenceIds:i,success:c,linkCount:l,fileAndImageCount:a,fileCount:n.filter(e=>"file"===e.type).length,totalCount:n.length}}}),g=(0,o.cn)({key:"linkIdMapState",default:{}}),x=(0,o.cn)({key:"fastSearchState",default:!1}),v=(0,o.cn)({key:"fastSearchStateAB",default:""});(0,o.cn)({key:"sentryState",default:{isInitialized:!1}});let f=(0,o.cn)({key:"assignmentIdState",default:""}),b=(0,o.cn)({key:"SelectedMessageIdForImagePopup",default:{messageId:""}}),y=(0,o.cn)({key:"clientMessageId",default:void 0})},11012:function(e,t,n){n.d(t,{L4:function(){return getAttachmentInfo},NH:function(){return getFilteredLinks},Zm:function(){return getPreSignedDocumentURL},R1:function(){return safeEncodeURI},XV:function(){return uploadS3File},sH:function(){return useAttachment},$I:function(){return useChatRoomAttachment},nB:function(){return useLink},y5:function(){return useLinkMetadata},fw:function(){return usePostLinkAnalysis}});var o=n(93677),r=n(701);let getPreSignedImageURL=e=>o.Np.William.get("/image/upload?extension=".concat(e)),getPreSignedDocumentURL=e=>o.Np.William.get("/pro-mode/upload?extension=".concat(e)),uploadS3File=(e,t)=>r.default.put(e,t,{headers:{"Content-Type":t.type}});var i=n(58933),a=n(62413),l=n(63040),c=n(16660),d=n(81623),s=n(38072),u=n(70810);let p={"image/jpeg":"jpeg","image/png":"png","image/gif":"gif","image/webp":"webp"},getAttachmentInfo=e=>{let t=e.match(/\.(pdf|txt|hwp|docx)$/),n=t?t[1]:"",o=e.replace(/\.[^/.]+$/,"");return{title:o,extension:n}},useS3Upload=()=>{let{trackEvent:e}=(0,l.Ke)(),uploadImageToS3=async(t,n)=>{try{let o=await getPreSignedImageURL(p[t.type]),{uploadUrl:r,downloadUrl:i}=o;return await uploadS3File(r,t),e("upload_img_done",n),i}catch(t){var r;e("upload_img_fail",{...n,error_code:(0,o.IZ)(t)?null===(r=t.response)||void 0===r?void 0:r.data.message:"unknown"})}},uploadFileToS3=async e=>{var t;let n=null===(t=getAttachmentInfo(e.name))||void 0===t?void 0:t.extension;if(!n)return;let o=await getPreSignedDocumentURL(n),{fileUuid:r,fileUploadUrl:i}=o;return await uploadS3File(i,e),r};return{uploadImageToS3,uploadFileToS3}};var _=n(20381);let postLinkMetadata=async e=>await o.Np.William.post("/pro-mode/metadata",{url:e}),useLinkMetadata=()=>(0,_._5)("/pro-mode/metadata",async function(e,t){let{arg:n}=t,{url:o}=n;return await postLinkMetadata(o)}),postFileAnalysis=async e=>await o.Np.William.post("/pro-mode/file",e),usePostFileAnalysis=()=>(0,_._5)("/pro-mode/file",async function(e,t){let{arg:n}=t;return await postFileAnalysis(n)}),postLinkAnalysis=async e=>await o.Np.William.post("/pro-mode/link",e),usePostLinkAnalysis=()=>(0,_._5)("/pro-mode/link",async function(e,t){let{arg:n}=t;return await postLinkAnalysis(n)}),getAttachmentList=async e=>await o.Np.William.get("/pro-mode/chat/".concat(e,"/rag")),useChatRoomAttachment=e=>(0,_.dH)(!!e&&"/pro-mode/chat/".concat(e,"/file"),()=>getAttachmentList(e),{revalidateOnFocus:!1}),useAttachment=()=>{let e=(0,c.T_)("use_upload_pending_image"),{trackEvent:t}=(0,l.Ke)(),{uploadFileToS3:n,uploadImageToS3:o}=useS3Upload(),{trigger:r}=usePostFileAnalysis(),p=(0,d.Zl)(i.u3),{linkCount:_,fileAndImageCount:h,totalCount:m}=(0,d.sJ)(i.h5),{getChatIdFromPath:g}=(0,a.dt)(),x=g(),addAttachments=async(n,o,r)=>{let i=3-_;if(n.length>i){var a;return null==r||null===(a=r.onError)||void 0===a||a.call(r,e("maximum_file",{count:3})),[]}let l=Array.from(n).slice(0,i);for(let e=0;e<l.length;e++){let n=l[e],i=n.type.includes("image"),a=!i,c=(0,u.Z)();if(i&&(addAttachment({_id:c,type:"image",url:"",status:"loading"}),t("expose_img_upload_loading",{index:m+e,chat_id:x||""}),uploadImage(n,c,o,{onError:null==r?void 0:r.onError})),a){let{title:i,extension:a}=getAttachmentInfo(n.name);addAttachment({_id:c,type:"file",title:i,extension:a||"",status:"loading",url:""}),t("expose_file_upload_loading",{index:m+e,chat_id:x||""}),uploadFile(n,c,{...o,index:m+e},{onError:null==r?void 0:r.onError})}}},addAttachment=e=>{p(t=>[...t,e])},updateAttachment=(e,t)=>{p(n=>n.map(n=>n._id===e?{...n,...t}:n))},removeAttachment=e=>{p(t=>t.filter(t=>t._id!==e))},uploadImage=async(t,n,r,i)=>{if(t.size>5242880){var a;null==i||null===(a=i.onError)||void 0===a||a.call(i,e("overflow_image_size",{size:5})),removeAttachment(n);return}let l=await o(t,r);if(!l){removeAttachment(n);return}updateAttachment(n,{url:l,status:"success"})},uploadFile=async(o,i,a,l)=>{var c,d,u;if(o.size>10485760){null==l||null===(c=l.onError)||void 0===c||c.call(l,e("overflow_file_size",{size:10})),removeAttachment(i);return}let{extension:p}=getAttachmentInfo(o.name);if(!p){null==l||null===(d=l.onError)||void 0===d||d.call(l,e("not_allow_extension")),removeAttachment(i);return}try{let e=await n(o);if(!e)throw Error("Failed to upload file to S3");let{_id:l,fileUrl:c}=await r({fileUuid:e,extension:p,title:o.name,chatId:x||void 0});if(!l)throw Error("Failed to post file analysis");updateAttachment(i,{_id:l,status:"success",url:c}),t("upload_file_done",{...a,file_id:l,file_name:o.name})}catch(e){updateAttachment(i,{status:"error"}),t("upload_file_fail",{...a,error_status:(0,s.IZ)(e)?null===(u=e.response)||void 0===u?void 0:u.data.message:"unknown"})}};return{addAttachments,updateAttachment,isAvailableAttachment:h<3,totalCount:m}},useLink=e=>{let{linkLimitExceeded:t}=e;return{updateAttachmentsWithLinks:(e,n)=>{let o=[...e],r=0,i=!1,a=o.filter(e=>"link"===e.type).length;return o.forEach((e,t)=>{"link"===e.type&&r<n.length&&(e.url!==n[r]&&(o[t]={...e,url:n[r],status:"loading"},i=!0),r++)}),t||n.slice(r).forEach(e=>{if(a>=2)return;let t=o.some(t=>"link"===t.type&&t.url===e);!t&&(o.push({_id:"link-".concat(a),type:"link",url:e,title:"",favicon:"",status:"loading"}),i=!0,a++)}),{newAttachments:o,isUpdated:i}}}},h=/https?:\/\/(www\.)?[-a-zA-Zㄱ-ㅎ가-힣0-9@:%._+~#=]{1,256}\.[a-zA-Zㄱ-ㅎ가-힣0-9()]{1,6}\b([-a-zA-Zㄱ-ㅎ가-힣0-9()@:%_+.~#?&//=]*)/g,getFilteredLinks=e=>(e.match(h)||[]).filter(t=>{let n=e.indexOf(t);return!(n>0&&('"'===e[n-1]||"'"===e[n-1])||n+t.length<e.length&&('"'===e[n+t.length]||"'"===e[n+t.length]))});function safeEncodeURI(e){try{let t=decodeURI(e);if(t!==e)return e;return encodeURI(e)}catch(t){return e}}},62413:function(e,t,n){n.d(t,{Zr:function(){return useAnonymousDialog_useAnonymousDialog},dt:function(){return useChatPath},Zp:function(){return useCommentEvaluateABTest},Tt:function(){return useGenerateAndPushNormalChatRoom},DD:function(){return useGenerateLatencyMark},kY:function(){return useHomeTopSpacerABTest},Ul:function(){return useIssueTalkGridABTest},_O:function(){return useIssueTalkReduceUIABTest},Jq:function(){return useMoveRecentChat}});var o=n(44194),r=n(58933),i=n(18100),a=n(21728),l=n(22229),c=n(81623);let useGenerateLatencyMark=()=>{let markGenerateStart=()=>{performance.mark("generate-start")};return{markGenerateRequest:()=>{performance.clearMarks("search-process-shown"),performance.mark("generate-request")},markLandChatRoom:()=>{performance.mark("land-chat-room")},markSearchProcessShown:()=>{performance.mark("search-process-shown")},measurePerformances:()=>{markGenerateStart();try{performance.measure("measureBetweenRequestAndLand","generate-request","land-chat-room"),performance.measure("measureBetweenRequestAndStart","generate-request","generate-start"),performance.measure("measureBetweenRequestAndSearchProcessShown","generate-request","search-process-shown");let e=performance.getEntriesByName("measureBetweenRequestAndLand")[0],t=performance.getEntriesByName("measureBetweenRequestAndStart")[0],n=performance.getEntriesByName("measureBetweenRequestAndSearchProcessShown")[0],o=null==e?void 0:e.duration,r=null==t?void 0:t.duration,i=null==n?void 0:n.duration;return performance.clearMarks(),performance.clearMeasures(),{latencyBetweenRequestAndLand:o,latencyBetweenRequestAndStart:r,latencyBetweenRequestAndSearchProcessShown:i}}catch(e){}}}},useGenerateAndPushNormalChatRoom=()=>{let e=(0,l.tv)(),t=(0,c.Zl)(r._8),{loading:n,refetch:d}=(0,a.c9)("model"),s=(0,o.useCallback)(e=>[...e].sort((e,t)=>null===e.model&&null!==t.model?-1:null!==e.model&&null===t.model?1:0),[]),{createChatMutation:u}=(0,a.hY)("model"),{markGenerateRequest:p}=useGenerateLatencyMark(),{handleEvent:_}=(0,i.m)(),generateAndPushNormalChatRoom=async o=>{let{selectedModel:r,generateMessage:i,callback:l,generation_type:c,trendId:h,adContext:m,adEvent:g}=o;p();let x=await d(),v=s((0,a.Pn)(x)?x.chats:[]),f=n||!(v.length>0)||v[0].model?void 0:v[0];t({input:i,isChocoChip:!1,trendId:h,adContext:m});let b=f?f._id:await u({unitId:r._id,type:"model"}).then(e=>e._id),y="/chat/u/".concat(r._id,"/c/").concat(b,"?type=u").concat(c?"&gt="+c:"");g&&_(g.adEventName,{...g.adEventBody,url:y}),await e.push(y),null==l||l()};return{generateAndPushNormalChatRoom}};var d=n(15229),s=n(34867);let useAnonymousDialog_useAnonymousDialog=e=>{let{handleOpenLoginDialog:t}=(0,d.tF)(),{user:n}=(0,s.aF)();return{handleOpenLoginDialog:t,handleOpenAnonymousDialog:()=>!e||!!e.allowAnonymous||!!n||(t(),!1)}};n(14051);var u=n(70923);n(45570);let useMoveRecentChat=()=>{let e=(0,u.useRouter)(),{chatList:t}=(0,a.c9)();return{moveRecentChat:(n,o,r)=>{if(!n||n.length<1)return;let i=t.find(e=>{var t,o;return(null===(t=e.character)||void 0===t?void 0:t._id)===n||(null===(o=e.tempUnit)||void 0===o?void 0:o._id)===n});if(i&&"c"===o){(null==r?void 0:r.onMoveRecent)&&r.onMoveRecent(),e.push("/chat/u/".concat(n,"/c/").concat(i._id,"?type=").concat(o));return}e.push("/chat/u/".concat(n,"?type=").concat(o))}}};var p=n(31275);let useCommentEvaluateABTest=()=>{let{variant:e,loading:t}=(0,p.i6)("fe-web-issuePost-commentSubmit"),n=(0,o.useMemo)(()=>e.enabled?e.name:void 0,[e.enabled,e.name]);return{loading:t,variant:n}},useHomeTopSpacerABTest=()=>{let{variant:e,loading:t}=(0,p.i6)("fe-web-chatHome-topSpacer"),n=(0,o.useMemo)(()=>e.enabled?e.name:void 0,[e.enabled,e.name]);return{loading:t,variant:n}},useIssueTalkReduceUIABTest=()=>{let{variant:e,loading:t}=(0,p.i6)("fe-web-chatHome-issueTalkReduceUI"),n=(0,o.useMemo)(()=>e.enabled?e.name:void 0,[e.enabled,e.name]);return{loading:t,variant:n}},useIssueTalkGridABTest=()=>{let{variant:e,loading:t}=(0,p.i6)("fe-web-chatHome-issueTalkGrid"),n=(0,o.useMemo)(()=>e.enabled?e.name:void 0,[e.enabled,e.name]);return{loading:t,variant:n}},useChatPath=()=>{let e=(0,l.tv)();return{getChatIdFromPath:()=>e&&e.query&&e.query.params&&Array.isArray(e.query.params)&&e.query.params.length>2&&e.query.params[2]||null}}},73822:function(e,t,n){n.d(t,{P:function(){return SuggestAiProtectBox}});var o=n(54067),r=n(44194),i=n(22346),a=n(60819),l=n(41671),c=n(22584),d=n(63040),s=n(16660),u=n(22229);let useSuggestAiProtectBox=e=>{let{willProtectMessage:t,onSuggest:n}=e,{trackEvent:o}=(0,d.Ke)(),{push:r}=(0,u.tv)(),{setItem:i}=(0,c.Xs)("ai-protect-form-session-state");return{moveToAiProtect:()=>{o("click_ai_protect_recommend_btn");let e=t.slice(0,2e3);i({formData:{content:e,requirements:""}}),null==n||n(),r("/ai-protect")}}},SuggestAiProtectBox=e=>{let{willProtectMessage:t,backgroundColor:n,onSuggest:u}=e,{moveToAiProtect:p}=useSuggestAiProtectBox({willProtectMessage:t,onSuggest:u}),{trackEvent:_}=(0,d.Ke)(),h=(0,s.bU)(),m=(0,c.ac)("(max-width: 768px)");return((0,r.useEffect)(()=>{"ko-KR"===h&&_("view_ai_protect_recommend_btn")},[h]),"ko-KR"!==h||m)?null:(0,o.BX)(a.Ug,{width:"100%",padding:"16px",backgroundColor:n,borderRadius:"10px",gap:"8px",alignItems:"center",children:[(0,o.tZ)(a.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:"글을 자연스러운 말투로 작성해 드려요"}),(0,o.tZ)(a.zx,{onClick:p,children:(0,o.BX)(a.Ug,{gap:"4px",alignItems:"center",children:[(0,o.tZ)(a.Jd,{typo:"$100-14-med",color:"$color_text_brand",children:"AI 탐지 방어 바로가기"}),(0,o.tZ)(l.JO,{as:i.$Qe,size:16,color:"$color_text_brand"})]})})]})}},32346:function(e,t,n){n.d(t,{j:function(){return ChatList}});var o=n(54067),r=n(44194),i=n(60819),a=n(41503),l=n(34867),c=n(91980),d=n(43408),s=n(92376),u=n(16660),p=n(77837),_=n.n(p);let ChatDeleteContainer=e=>{let{selectedChatIdList:t,onCompleted:n,children:r}=e,i=(0,u.T_)(),{deleteChatListMutation:a}=(0,d.h)(),onDelete=async()=>{await a(t)},l=_()(onDelete,300);return(0,o.tZ)(s.cV,{title:i("chat.chat_list.delete_modal.title"),content:i("chat.chat_list.delete_modal.description"),confirm:{text:i("chat.chat_list.delete_modal.confirm"),onClick:async e=>{await l(),e(),c.Am.alert(i("chat.chat_list.delete_modal.alert")),null==n||n()}},cancel:{text:i("chat.chat_list.delete_modal.cancel"),onClick:e=>e()},renderOpener:e=>{let{openModal:t}=e;return r({openDeleteConfirmationModal:t})}})},ChatListContainer=e=>{let{children:t}=e,{user:n}=(0,l.aF)(),{chatList:o,isLoading:r,refetch:i,loadMore:a,hasMore:c}=(0,d.c)(),s=o.filter(e=>{let{model:t}=e;return t});return t({chatList:s,isLoading:r,refetch:i,loadMore:a,hasMore:!!n&&c})};var h=n(22584),m=n(63040),g=n(5079),x=n(35237),v=n(22346),f=n(41671),b=n(45036),y=n(22229),C=n(81623);let ChatTopicUpdater=e=>{let{chatId:t,children:n}=e,[o,i]=(0,r.useState)(!1),{trackEvent:a}=(0,m.Ke)(),{updateChatMutation:l}=(0,d.h)(),updateTopic=async e=>{0!==e.trim().length&&(i(!0),await l(t,e),a("click_edit_chat_name",{chat_id:t}),i(!1))};return n({updateTopic,loading:o})},getChatType=e=>"tempUnit"in e&&e.tempUnit?{chatType:"unit",unitId:e.tempUnit._id}:"modelInfo"in e&&e.modelInfo?{chatType:"unit",unitId:e.modelInfo._id}:{chatType:"unknown",unitId:""};var k=n(31904);let returnModelName=e=>(null==e?void 0:e.modelInfo)?e.modelInfo.displayName:(null==e?void 0:e.tempUnit)?e.tempUnit.displayName:e.model?(0,k.getModelName)(e.model):"";function _templateObject(){let e=(0,g._)(["\n        cursor: ",";\n        &:hover {\n          background-color: var(--color_surface_hover);\n\n          .chat-list-item-button {\n            display: flex;\n          }\n\n          .chat-list-item-topic {\n            max-width: calc(100% - 30px);\n          }\n\n          .chat-update-date-label {\n            display: block;\n          }\n\n          ","\n        }\n      "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,g._)(["\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n          "]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,g._)(["\n                    white-space: nowrap;\n                    text-overflow: ellipsis;\n                    display: block;\n                    -webkit-line-clamp: 1;\n                    -webkit-box-orient: vertical;\n                  "]);return _templateObject2=function(){return e},e}function _templateObject3(){let e=(0,g._)(["\n                    display: none;\n                  "]);return _templateObject3=function(){return e},e}let ChatListItem=e=>{var t,n,r,l;let{chat:c,onClick:d}=e,{query:s,push:p,replace:_}=(0,y.tv)(),h=(0,u.T_)(),m=(0,C.sJ)(b.CU),g="ready"!==m,k=null!==(r=null==s?void 0:null===(t=s.params)||void 0===t?void 0:t[0])&&void 0!==r?r:"",w=null!==(l=null==s?void 0:null===(n=s.params)||void 0===n?void 0:n[2])&&void 0!==l?l:"",Z=c._id===w,{chatType:I,unitId:O}=getChatType(c),S=returnModelName(c),onClickItem=()=>{Z||g||"unknown"===I||(d(),p("/chat/u/".concat(O,"/c/").concat(c._id),void 0,{shallow:k===O}))},onDeleteComplete=()=>{Z&&_("/chat")};return(0,o.BX)(i.gC,{width:"100%",minHeight:"54px",p:"8px",gap:"12px",borderRadius:"8px",backgroundColor:Z?"$color_surface_secondary":"transparent",css:(0,x.iv)(_templateObject(),g?"not-allowed":"pointer",S>6&&"\n            .chat-list-item-model-name {\n              max-width: 85px;\n            }\n          "),onClick:e=>{onClickItem(),e.stopPropagation()},children:[(0,o.BX)(i.Ug,{gap:"4px",alignItems:"center",children:[(0,o.tZ)(i.Jd,{className:"chat-list-item-model-name",color:"$color_text_secondary",typo:"$100-12-med",maxWidth:"120px",overflow:"hidden",css:(0,x.iv)(_templateObject1()),children:returnModelName(c)}),(0,o.tZ)(i.LZ,{}),(0,o.tZ)(a.Ar,{date:c.messagedAt||c.updatedAt})]}),(0,o.tZ)(i.Ug,{alignItems:"center",position:"relative",children:(0,o.tZ)(a.Ks,{chatId:c._id,children:e=>{let{mode:t,onToggleMode:n}=e;return(0,o.BX)(i.Ug,{width:"100%",alignItems:"center",position:"relative",children:["edit"===t&&(0,o.tZ)(ChatTopicUpdater,{chatId:c._id,children:e=>{let{updateTopic:t}=e;return(0,o.tZ)(a.IU,{value:c.topic||h("chat.chat_list.new_room"),onBlur:n,update:t})}}),"default"===t&&(0,o.tZ)(i.Jd,{className:"chat-list-item-topic",maxWidth:"100%",typo:"$100-14-med",color:"$color_text_primary",overflow:"hidden",css:(0,x.iv)(_templateObject2()),children:c.topic||h("chat.chat_list.new_room")}),"default"===t&&(0,o.BX)(i.Ug,{className:"chat-list-item-button",position:"absolute",right:0,gap:"2px",css:(0,x.iv)(_templateObject3()),children:[(0,o.tZ)(f.JO,{as:v.pkD,size:14,color:"$color_icon_primary",onClick:e=>{e.stopPropagation(),n()}}),(0,o.tZ)(ChatDeleteContainer,{selectedChatIdList:[c._id],onCompleted:onDeleteComplete,children:e=>{let{openDeleteConfirmationModal:t}=e;return(0,o.tZ)(f.JO,{as:v.$yH,size:14,color:"$color_icon_primary",onClick:e=>{e.stopPropagation(),t()}})}})]})]})}})})]})};var w=n(353);function ChatListSelectItem_templateObject(){let e=(0,g._)(["\n        cursor: pointer;\n\n        &:hover {\n          background-color: var(--color_surface_hover);\n        }\n      "]);return ChatListSelectItem_templateObject=function(){return e},e}function ChatListSelectItem_templateObject1(){let e=(0,g._)(["\n              white-space: nowrap;\n              text-overflow: ellipsis;\n              -webkit-line-clamp: 1;\n              -webkit-box-orient: vertical;\n            "]);return ChatListSelectItem_templateObject1=function(){return e},e}function ChatListSelectItem_templateObject2(){let e=(0,g._)(["\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            display: block;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n          "]);return ChatListSelectItem_templateObject2=function(){return e},e}let ChatListSelectItem=e=>{let{chat:t,selectedChatIdList:n,selectChatId:r}=e,l=(0,u.T_)(),c=returnModelName(t);return(0,o.BX)(i.Ug,{p:"8px",gap:"12px",minHeight:"54px",alignItems:"center",borderRadius:"8px",css:(0,x.iv)(ChatListSelectItem_templateObject()),backgroundColor:n.includes(t._id)?"$palette_gray_gray_100":"transparent",onClick:()=>r(t._id),children:[(0,o.tZ)(w.d,{checked:n.includes(t._id)}),(0,o.BX)(i.gC,{width:"100%",overflow:"hidden",gap:"10px",children:[(0,o.BX)(i.Ug,{gap:"4px",alignItems:"center",children:[(0,o.tZ)(i.Jd,{color:"$color_text_secondary",typo:"$100-12-med",maxWidth:"85px",overflow:"hidden",css:(0,x.iv)(ChatListSelectItem_templateObject1()),children:c}),(0,o.tZ)(i.LZ,{}),(0,o.tZ)(a.Ar,{date:t.messagedAt||t.updatedAt})]}),(0,o.tZ)(i.Jd,{width:"100%",typo:"$100-14-med",color:"$color_text_primary",overflow:"hidden",css:(0,x.iv)(ChatListSelectItem_templateObject2()),children:t.topic||l("chat.chat_list.new_room")})]})]})},InfiniteChatList=e=>{let{chatList:t,mode:n,selectedChatIdList:r,hasMore:a,loadMore:l,selectChatId:c}=e,{trackEvent:d}=(0,m.Ke)(),s=(0,h.dg)(e=>{e.isIntersecting&&l()});return(0,o.BX)(i.gC,{width:"100%",height:"calc(100% - 56px)",maxHeight:"calc(100% - 56px)",px:"12px",py:"8px",gap:"8px",overflowY:"auto",children:[t.map((e,i)=>"edit"===n?(0,o.tZ)(ChatListSelectItem,{chat:e,selectedChatIdList:r,selectChatId:c},e._id):(0,o.tZ)(ChatListItem,{chat:e,onClick:()=>{d("click_chat",{index:i,chatId:e._id,totalNumbers:t.length,modelName:e.model})}},e._id)),a&&(0,o.tZ)(i.xu,{height:"1px",ref:s})]})};var Z=n(15290);let useLnbColors=()=>{let{mode:e}=(0,Z.TC)();return{LNBbgColor:"light"===e?"$palette_gray_gray_50":"#161514",chatListBgColor:"light"===e?"$palette_gray_gray_20":"#181716",chatListBorderColor:"light"===e?"$palette_gray_gray_100":"$palette_gray_gray_150"}},ChatList=()=>{let{user:e}=(0,l.aF)(),{chatListBgColor:t,chatListBorderColor:n}=useLnbColors();return(0,o.tZ)(i.gC,{width:"180px",minWidth:"180px",height:"100vh",overflow:"hidden",borderRight:"1px solid",borderColor:n,children:(0,o.tZ)(a.s0,{children:r=>{let{mode:l,toggleMode:c}=r;return(0,o.tZ)(a.yd,{children:r=>{let{selectedChatIdList:d,selectChatId:s,selectAllIds:u,clearSelectedIds:p}=r;return(0,o.tZ)(ChatListContainer,{children:r=>{let{chatList:_,loadMore:h,hasMore:m}=r;return(0,o.BX)(o.HY,{children:[(0,o.BX)(i.Ug,{width:"100%",height:"56px",pl:"20px",pr:"12px",borderBottom:"1px solid",borderColor:n,alignItems:"center",children:["default"===l&&(0,o.BX)(o.HY,{children:[(0,o.tZ)(i.LZ,{}),e&&_.length>0&&(0,o.tZ)(a.aU,{onClick:c})]}),"edit"===l&&(0,o.tZ)(ChatDeleteContainer,{selectedChatIdList:d,onCompleted:c,children:e=>{let{openDeleteConfirmationModal:n}=e;return(0,o.tZ)(a.fl,{selectedLength:d.length,isAllSelected:d.length>=_.length,bgColor:t,onCloseEditMode:c,onDelete:n,onRemoveAll:p,onSelectAll:()=>u(_.map(e=>e._id))})}})]}),(0,o.tZ)(InfiniteChatList,{chatList:_,mode:l,selectedChatIdList:d,selectChatId:s,hasMore:m,loadMore:h})]})}})}})}})})}},58923:function(e,t,n){n.d(t,{f:function(){return DragSearchArea}});var o=n(5079),r=n(54067),i=n(35237),a=n(21945),l=n(22584),c=n(16054),d=n(40222),s=n(15290),u=n(41671),p=n(63040),_=n(91980),h=n(22260),m=n(16660);function _templateObject(){let e=(0,o._)(["\n        p {\n          line-height: 140%;\n        }\n      "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,o._)(["\n                max-width: 100%;\n              "]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,o._)(["\n                white-space: pre-wrap;\n                word-break: break-all;\n              "]);return _templateObject2=function(){return e},e}let MarkdownContent=e=>{let{content:t}=e,n=(0,m.T_)();return(0,r.tZ)(a.gC,{css:(0,i.iv)(_templateObject()),children:(0,r.tZ)(h.U,{colorSet:{primary:"$color_text_ivory",secondary:"$color_text_secondary"},content:t,onClickCode:()=>(0,_.wp)(n("common.alert.copy_code_success")),addonComponents:{img:e=>(0,r.tZ)(a.xu,{...e,as:"img",css:(0,i.iv)(_templateObject1())}),em:e=>(0,r.tZ)(a.Jd,{...e,as:"em",typo:"$ex_180-16-med",color:"$color_text_tertiary",css:(0,i.iv)(_templateObject2())})}})})};function Content_templateObject(){let e=(0,o._)(["\n        &:hover {\n          .closeButton {\n            display: block;\n          }\n        }\n      "]);return Content_templateObject=function(){return e},e}function Content_templateObject1(){let e=(0,o._)(["\n          box-shadow: -2px 4px 10px 0px rgba(59, 63, 78, 0.1),\n            0px 2px 4px 0px rgba(59, 63, 78, 0.03);\n        "]);return Content_templateObject1=function(){return e},e}let Content=e=>{let{content:t,closeMenu:n}=e,{mode:o}=(0,s.TC)(),{trackEvent:l}=(0,p.Ke)();return(0,r.BX)(a.gC,{maxWidth:"440px",position:"relative",css:(0,i.iv)(Content_templateObject()),children:[(0,r.tZ)(a.zx,{className:"closeButton",width:"30px",height:"30px",position:"absolute",top:"-15px",right:"-15px",onClick:()=>{n(),l("close_context_search_result")},display:"none",children:(0,r.tZ)(a.xu,{width:"30px",height:"30px",borderRadius:"20px",backgroundColor:"$color_icon_quaternary",display:"flex",alignItems:"center",justifyContent:"center",children:(0,r.tZ)(u.JO,{as:d.S5X,size:18,color:"$color_icon_white"})})}),(0,r.tZ)(a.gC,{backgroundColor:"dark"===o?"#FCFCFA":"#42413D",borderRadius:"12px",color:"$color_text_ivory",overflow:"hidden",css:(0,i.iv)(Content_templateObject1()),children:(0,r.BX)(a.gC,{width:"100%",overflowY:"auto",maxHeight:"150px",gap:"8px",padding:"16px",children:[(0,r.tZ)(a.Jd,{typo:"$100-14-semi",color:"$color_action_blue_secondary",children:"검색 결과"}),(0,r.tZ)(MarkdownContent,{content:t})]})})]})};var g=n(44194);function SearchButton_templateObject(){let e=(0,o._)(["\n        box-shadow: -2px 4px 10px 0px rgba(59, 63, 78, 0.1), 0px 2px 4px 0px rgba(59, 63, 78, 0.03);\n\n        &:hover {\n          .fastSearchButton {\n            background-color: var(--color_surface_secondary);\n          }\n        }\n      "]);return SearchButton_templateObject=function(){return e},e}let SearchButton=e=>{let{onClick:t}=e,{trackEvent:n}=(0,p.Ke)(),o=(0,m.T_)("feature_drag_search");return(0,g.useEffect)(()=>{n("expose_generate_btn",{feature_menu:"context_search"})},[]),(0,r.tZ)(a.zx,{onClick:()=>{null==t||t(),n("click_generate_btn",{feature_menu:"context_search"})},padding:"4px",borderRadius:"10px",border:"1px solid var(--color_bg_elevated_secondary)",backgroundColor:"var(--color_icon_ivory)",css:(0,i.iv)(SearchButton_templateObject()),children:(0,r.BX)(a.Ug,{alignItems:"center",gap:"6px",padding:"6px",borderRadius:"6px",className:"fastSearchButton",children:[(0,r.tZ)(u.JO,{as:d.hsj,size:16}),(0,r.tZ)(a.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:o("label")})]})})};var x=n(93677),v=n(30008),f=n(20381),b=n(34867);let postDragSearch=e=>{let{searchInput:t}=e;return x.Np.William.post("/drag-search",{searchInput:t})},SearchContainer=e=>{var t;let{searchInput:n,children:o}=e,{trackEvent:r}=(0,p.Ke)(),{handleOpenLoginDialog:i}=(0,v.tF)(),{user:a}=(0,b.aF)(),{data:l,trigger:c,isMutating:d}=(0,f._5)("/drag-search",async(e,t)=>{let{arg:n}=t;return await postDragSearch(n)},{onSuccess:()=>{r("generate_done",{feature_menu:"context_search"})},onError:()=>{(0,_.wp)("일시적으로 검색에 실패했어요! 다시 시도해주세요")}});return o({search:()=>{if(!(null==a?void 0:a._id)){i();return}c({searchInput:n})},isLoading:d,content:null!==(t=null==l?void 0:l.content)&&void 0!==t?t:""})};var y=n(92376);function SkeletonContent_templateObject(){let e=(0,o._)(["\n        box-shadow: -2px 4px 10px 0px rgba(59, 63, 78, 0.1), 0px 2px 4px 0px rgba(59, 63, 78, 0.03);\n\n        &:hover {\n          .closeButton {\n            display: block;\n          }\n        }\n      "]);return SkeletonContent_templateObject=function(){return e},e}let SkeletonContent=()=>{let{mode:e}=(0,s.TC)(),t="dark"===e,n=t?"linear-gradient(\n           90deg,\n            #F7F7F5 0%,\n            #F7F7F5 25%,\n            #E4E4E1 50%,\n            #F7F7F5 75%,\n            #F7F7F5 100%\n          )":"linear-gradient(\n           90deg,\n            var(--palette_gray_gray_700) 0%,\n            var(--palette_gray_gray_700) 25%,\n            var(--palette_gray_gray_800) 50%,\n            var(--palette_gray_gray_700) 75%,\n            var(--palette_gray_gray_700) 100%\n          )";return(0,r.BX)(a.gC,{gap:"10px",width:"440px",padding:"16px",backgroundColor:t?"#FCFCFA":"#42413D",borderRadius:"12px",css:(0,i.iv)(SkeletonContent_templateObject()),color:"$color_text_ivory",position:"relative",maxHeight:"150px",children:[(0,r.tZ)(y.Od,{width:"52px",height:"14px",borderRadius:"4px",background:n}),(0,r.tZ)(y.Od,{width:"100%",height:"14px",borderRadius:"4px",background:n}),(0,r.tZ)(y.Od,{width:"228px",height:"14px",borderRadius:"4px",background:n})]})},SearchMenu=e=>{let{searchInput:t,closeMenu:n}=e;return(0,r.tZ)(SearchContainer,{searchInput:t,children:e=>{let{search:t,content:o,isLoading:i}=e;return(0,r.BX)(a.gC,{maxWidth:"440px",width:"100%",children:[!i&&!o&&(0,r.tZ)(SearchButton,{onClick:t}),i&&(0,r.tZ)(SkeletonContent,{}),!i&&o&&(0,r.tZ)(Content,{content:o,closeMenu:n})]})}})};function DragSearchArea_templateObject(){let e=(0,o._)(["\n        .Popover > svg {\n          display: none;\n        }\n      "]);return DragSearchArea_templateObject=function(){return e},e}let DragSearchArea=e=>{let{target:t,children:n}=e,o=(0,l.ac)("(min-width: 1024px)");return t?(0,r.BX)(a.gC,{css:(0,i.iv)(DragSearchArea_templateObject()),children:[(0,r.tZ)(c.C8,{target:t,menu:e=>{let{selectedText:t,setMenuOpen:n}=e;return(0,r.tZ)(SearchMenu,{searchInput:null!=t?t:"",closeMenu:()=>n(!1)})},styles:{userSelect:"text",padding:0,borderRadius:0,backgroundColor:"transparent",border:"none",boxShadow:"none"},zIndex:9,allowedPlacements:[o?"top-end":"bottom-end"]}),n]}):n}},17300:function(e,t,n){n.d(t,{w:function(){return h},x:function(){return FreeBanner}});var o=n(5079),r=n(54067);n(44194);var i=n(35237),a=n(50958),l=n(60819),c=n(41671),d=n(22584),s=n(14051),u=n(63040),p=n(16660),_=n(31275);function _templateObject(){let e=(0,o._)(["\n            cursor: pointer;\n          "]);return _templateObject=function(){return e},e}let h=40,m=(0,s.dU)("NEXT_PUBLIC_BASE_URL"),FreeBanner=e=>{let{title:t="뤼튼은 왜 무료인가요?"}=e,{value:n,setItem:o}=(0,d._)("banner_info",{}),s=(0,p.bU)(),g=!n.free_banner,{flag:x}=(0,_.T6)("fe-web-free-banner"),{trackEvent:v}=(0,u.Ke)();return"ko-KR"===s&&x&&g?(0,r.BX)(l.Ug,{width:"100%",height:h,minHeight:h,backgroundColor:"$color_surface_accent_bg_blue",px:"20px",justifyContent:"space-between",alignItems:"center",children:[(0,r.tZ)(l.xu,{width:"18px",height:"18px"}),(0,r.BX)(l.Ug,{gap:"6px",alignItems:"center",children:[(0,r.tZ)(l.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:t}),(0,r.BX)(l.Ug,{gap:"2px",css:(0,i.iv)(_templateObject()),onClick:()=>{d.sk||(v("click_notice_banner_cache",{content:t}),window.open("".concat(m,"?q=").concat(t),"_blank"))},children:[(0,r.tZ)(l.Jd,{as:"span",typo:"$100-14-semi",color:"$color_action_blue_primary",children:"지금 알아보기"}),(0,r.tZ)(c.JO,{as:a.xMl,size:14,color:"$color_action_blue_primary"})]})]}),(0,r.tZ)(l.zx,{width:"18px",height:"18px",display:"flex",justifyContent:"center",alignItems:"center",onClick:()=>{o({...n,free_banner:!0})},children:(0,r.tZ)(c.JO,{as:a.S5X,size:18,color:"$color_icon_primary"})})]}):null}},28786:function(e,t,n){n.d(t,{x:function(){return WebviewErrorMessageSendProvider},c:function(){return WebviewMessageReceiveProvider}});var o=n(54067),r=n(44194),i=n(88781);let a=["light","dark","system"],WebviewMessageReceiveProvider=e=>{let{children:t}=e,messageHandler=e=>{let t;if(!(null==e?void 0:e.data))return;try{t=JSON.parse(e.data)}catch(e){return}let n=null==t?void 0:t.type,o=null==t?void 0:t.payload;n&&o&&"theme-change"===n&&a.includes(o.mode)&&(0,i.L)(o.mode)};return r.useEffect(()=>(window.addEventListener("message",messageHandler),document.addEventListener("message",e=>messageHandler(e)),()=>{window.removeEventListener("message",messageHandler),document.removeEventListener("message",e=>messageHandler(e))}),[]),(0,o.tZ)(o.HY,{children:t})};var l=n(22584);let WebviewErrorMessageSendProvider=e=>{let{type:t,children:n}=e,{isWebview:o,postMessage:i}=(0,l.sW)();return(r.useEffect(()=>{o&&i({type:"error",payload:{type:t}})},[o,i,t]),o)?null:n}},38693:function(e,t,n){n.d(t,{mQ:function(){return AnimateChangeInHeight},y:function(){return DefaultStepText},WY:function(){return DynamicTrail},NU:function(){return DynamicTrailItem},oC:function(){return HomeScrollButton},ko:function(){return ProgressBar},tm:function(){return s},xE:function(){return ScrollButton},$j:function(){return Spinner}});var o=n(44194),r=n(13881),i=n(54067),a=n(6644),l=n(32060),c=n(41671);let TextCursor=()=>(0,i.tZ)(l.E.div,{style:{display:"inline-block",transform:"translateY(2px)",marginLeft:"-2px"},initial:{opacity:0},animate:{opacity:1},transition:{repeat:1/0,duration:.5,repeatType:"reverse"},children:(0,i.tZ)(c.JO,{as:c.C$,color:"$color_icon_brand",size:16})}),DefaultStepText=e=>{let{currentWaitingText:t,showCursor:n}=e;return(0,i.tZ)(r.xu,{position:"relative",overflow:"hidden",children:(0,i.tZ)(a.M,{children:(0,i.tZ)(l.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"-100%",position:"absolute"},transition:{duration:.5},children:(0,i.BX)(r.xu,{typo:"$ex_180-16-med",color:"$color_text_quaternary",children:[t,n&&(0,i.tZ)(TextCursor,{})]})},t)})})};n(26484);let AnimateChangeInHeight=e=>{let{children:t,border:n,isClosed:a,duration:c=.3,initialHeight:d="auto"}=e,s=(0,o.useRef)(null),[u,p]=(0,o.useState)(d);return(0,o.useEffect)(()=>{if(s.current){let e=new ResizeObserver(e=>{let t=e[0].contentRect.height;p(t)});return e.observe(s.current),()=>{e.disconnect()}}},[s]),(0,i.tZ)(l.E.div,{style:{height:u,border:n,overflow:"hidden"},animate:a?{height:0,opacity:0}:{height:u,opacity:1},transition:{duration:c},children:(0,i.tZ)(r.gC,{ref:s,gap:"10px",children:t})})},ScrollButton=e=>{let{isShow:t=!0,style:n,children:o}=e;return(0,i.tZ)(l.E.button,{initial:{transform:"translateY(10px)",opacity:0},animate:{transform:t?"translateY(0px)":"translateY(10px)",opacity:t?1:0},style:{...n,margin:"0 auto",width:"fit-content",height:"fit-content"},children:o})},d=(0,l.E)(o.forwardRef(function(e,t){return(0,i.tZ)(r.zx,{ref:t,...e,children:e.children})})),HomeScrollButton=e=>{let{isShow:t=!0,children:n}=e;return(0,i.tZ)(d,{initial:{transform:"translateY(10px)",opacity:0},animate:{transform:t?"translateY(0px)":"translateY(10px)",opacity:t?1:0},position:"fixed",bottom:["16px","16px","40px","40px"],right:["16px","16px","40px","40px"],margin:"0 auto",width:"fit-content",height:"fit-content",zIndex:7,children:n})},Spinner=e=>{let{size:t=16,bg:n="$color_outline_brand"}=e;return(0,i.tZ)(l.E.div,{initial:"start",animate:"end",variants:{start:{rotateX:0,rotateY:0},end:{rotateX:0,rotateY:540,transition:{duration:.9,ease:"easeOut",repeat:1/0,repeatDelay:.5}}},style:{display:"flex",justifyContent:"center",alignItems:"center",color:"white",margin:"auto"},children:(0,i.tZ)(r.xu,{width:t,height:t,borderRadius:"50%",overflow:"hidden",backgroundColor:n})})};var s=n(39064);let u={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},p={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2,duration:.7}}},DynamicTrail=e=>{let{children:t,style:n,listVariants:o=p}=e;return(0,i.tZ)(a.M,{children:(0,i.tZ)(l.E.div,{variants:o,initial:"hidden",animate:"show",style:{width:"100%",display:"flex",flexDirection:"column",gap:"10px",...n},children:t})})},DynamicTrailItem=e=>{let{children:t,style:n,itemVariants:o=u}=e;return(0,i.tZ)(l.E.div,{style:{width:"100%",...n},variants:o,children:t})},_=(0,l.E)(o.forwardRef(function(e,t){return(0,i.tZ)(r.xu,{ref:t,...e,children:e.children})})),ProgressBar=e=>{let{progress:t=0,color:n="$color_outline_primary"}=e;return(0,i.tZ)(_,{initial:{width:"0%"},animate:{width:"".concat(t,"%")},transition:{duration:.5,delay:.5},height:"100%",borderRadius:"10px",backgroundColor:n,position:"absolute",top:"0",left:"0"})};(0,l.E)(o.forwardRef(function(e,t){return(0,i.tZ)(r.xu,{ref:t,...e,children:e.children})}))},37590:function(e,t,n){n.d(t,{q:function(){return o.Z}});var o=n(90492)},56330:function(e,t,n){n.d(t,{Z:function(){return ToggleSwitchV2}});var o=n(5079),r=n(48328),i=n(60819);function _templateObject(){let e=(0,o._)(["\n  position: relative;\n  display: inline-block;\n  width: 54px;\n  height: 28px;\n  padding: 4px 5px;\n  border-radius: 14px;\n  background-color: ",";\n\n  cursor: pointer;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,o._)(["\n  position: absolute;\n  height: 20px;\n  width: 20px;\n  border-radius: 10px;\n  background-color: ",";\n\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n\n  -webkit-transform: ",";\n  -ms-transform: ",";\n  transform: ",";\n"]);return _templateObject1=function(){return e},e}r.Z.label(_templateObject(),e=>e.backgroundColor),r.Z.span(_templateObject1(),e=>e.color,e=>e.checked?"translateX(24px)":void 0,e=>e.checked?"translateX(24px)":void 0,e=>e.checked?"translateX(24px)":void 0);var a=n(54067);n(44194);var l=n(35237);function ToggleSwitchV2_templateObject(){let e=(0,o._)(["\n        cursor: pointer;\n        transition: background-color 0.4s;\n\n        ","\n      "]);return ToggleSwitchV2_templateObject=function(){return e},e}function ToggleSwitchV2_templateObject1(){let e=(0,o._)(["\n          -webkit-transition: 0.4s;\n          transition: 0.4s;\n\n          -webkit-transform: ",";\n          -ms-transform: ",";\n          transform: ",";\n        "]);return ToggleSwitchV2_templateObject1=function(){return e},e}let c={width:40,height:24,px:2,py:2,borderRadius:50,bg:{checked:"$color_action_blue_secondary",unchecked:"$color_icon_disabled",disabled:"$color_action_blue_secondary"}},d={size:20,bg:{checked:"$palette_gray_gray_white",unchecked:"$palette_gray_gray_white"}},ToggleSwitchV2=e=>{let{toggle:t,shadow:n,disabled:o,onToggle:r,onHover:s,onMouseEnter:u,onMouseLeave:p,containerData:_=c,sliderData:h=d,containerProps:m,sliderProps:g,innerItem:x}=e,v=_.width-h.size-2*_.px;return(0,a.tZ)(i.xu,{position:"relative",display:"inline-block",width:"".concat(_.width,"px"),height:"".concat(_.height,"px"),px:"".concat(_.px,"px"),py:"".concat(_.py,"px"),borderRadius:"".concat(_.borderRadius,"px"),backgroundColor:o?_.bg.disabled:t?_.bg.checked:_.bg.unchecked,onClick:o?void 0:r,onMouseOver:o?void 0:s,onMouseEnter:o?void 0:u,onMouseLeave:o?void 0:p,css:(0,l.iv)(ToggleSwitchV2_templateObject(),o&&"\n          cursor: not-allowed;\n\n        "),...m,children:(0,a.tZ)(i.xu,{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"".concat(h.size,"px"),height:"".concat(h.size,"px"),backgroundColor:t?h.bg.checked:h.bg.unchecked,borderRadius:"50%",boxShadow:n?"0px 2px 3px rgba(0, 0, 0, 0.1)":"",css:(0,l.iv)(ToggleSwitchV2_templateObject1(),t?"translateX(".concat(v,"px)"):void 0,t?"translateX(".concat(v,"px)"):void 0,t?"translateX(".concat(v,"px)"):void 0),...g,children:x})})}},90722:function(e,t,n){n.d(t,{ai:function(){return a},Gz:function(){return i},k0:function(){return r}});var o=n(34151);let r=new o.x,i=new o.x,a=new o.x},69707:function(e,t,n){n.d(t,{un:function(){return formatPhoneNumber},lW:function(){return formatYYYYMMDD},kV:function(){return markdownToText},x2:function(){return parseFileName},bI:function(){return removeNonNumeric}});var o=n(96049),r=n(48061),i=n.n(r);let markdownToText=e=>{let t=(0,o.Qc)(e,{async:!1}),n=t.replace(/\$\$([\s\S]*?)\$\$/g,(e,t)=>formatLatex(t)).replace(/\$([\s\S]*?)\$/g,(e,t)=>formatLatex(t)),r=(function(e){var t;let n=new DOMParser,o=n.parseFromString(e,"text/html");return null!==(t=o.documentElement.textContent)&&void 0!==t?t:""})(i()(n)).trim();return r.replace(/\[\d+\]/g,"").trim()};function formatLatex(e){return e.replace(/\\text\{([^}]+)\}/g,"$1").replace(/\\quad/g," ").replace(/\\sum/g,"∑").replace(/\\infty/g,"∞").replace(/\\frac{([^}]+)}{([^}]+)}/g,"$1/$2").replace(/_([a-zA-Z0-9]+)/g,"($1)").replace(/\^([a-zA-Z0-9]+)/g,"^($1)").replace(/\\left\(|\\right\)/g,"").replace(/\\([a-zA-Z]+)|{|}/g,"").replace(/&gt;/g,">").replace(/\s+/g," ").trim()}function removeNonNumeric(e){return e.replace(/[^0-9]/g,"")}function formatYYYYMMDD(e){let t=removeNonNumeric(e);return t.length<=4?t.replace(/^(\d{4})/,"$1/"):t.length<=5?t.replace(/^(\d{4})(\d{1})/,"$1/$2"):t.length<=6?t.replace(/^(\d{4})(\d{2})/,"$1/$2/"):t.replace(/^(\d{4})(\d{2})(\d+)/,"$1/$2/$3")}function formatPhoneNumber(e){let t=removeNonNumeric(e);return t.length<=3?t.replace(/^(\d{3})/,"$1-"):t.length<=6?t.replace(/^(\d{3})(\d)/,"$1-$2"):t.length<=7?t.replace(/^(\d{3})(\d{4})/,"$1-$2-"):t.replace(/^(\d{3})(\d{4})(\d+)/,"$1-$2-$3")}function parseFileName(e){let t=e.match(/\.(\w+)$/),n=t?t[1]:"",o=e.replace(/\.[^/.]+$/,"");return{title:o,extension:n}}},88781:function(e,t,n){n.d(t,{L:function(){return changeTheme}});var o=n(73068);let changeTheme=e=>{let t=new Date;t.setFullYear(t.getFullYear()+99),(0,o.d8)("user-theme",e,{sameSite:"lax",path:"/",expires:t}),document.body.dataset.theme=e}},51856:function(e,t,n){n.d(t,{_:function(){return getUnitList},u7:function(){return useUnitList}});var o=n(93677);let getUnitList=e=>o.Np.William.get("/models?platform=web",{headers:{"wrtn-locale":e}});var r=n(14051),i=n(20381);let useUnitList=()=>(0,i.dH)("/units",async()=>{let e=await getUnitList(r.MV||"ko-KR");return e},{errorRetryCount:0,fallbackData:[],revalidateOnFocus:!1})},46580:function(e){e.exports=JSON.parse('{"nm":"Flow 5","ddd":0,"h":214,"w":214,"meta":{"g":"LottieFiles Figma v57"},"layers":[{"ty":0,"nm":"Frame 1000005587","sr":1,"st":0,"op":75.4,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[88.62,94.28],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[88.62,94.28],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[88.62,94.28],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[88.62,94.28],"t":38},{"s":[88.62,94.28],"t":74}]},"s":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":38},{"s":[100,100],"t":74}]},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[113.81,107],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[113.81,107],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[138.65,141.29],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[138.65,141.29],"t":38},{"s":[113.82,107],"t":74}]},"r":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0],"t":38},{"s":[0],"t":74}]},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]}},"ef":[{"ty":25,"nm":"","en":1,"ef":[{"ty":2,"nm":"color","v":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0,0,0,0.25],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0,0,0,0.25],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0,0,0,0.25],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0,0,0,0.25],"t":38},{"s":[0,0,0,0.25],"t":74}]}},{"ty":0,"nm":"opacity","v":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[64],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[64],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[64],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[64],"t":38},{"s":[64],"t":74}]}},{"ty":1,"nm":"angle","v":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[135],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[135],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[135],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[135],"t":38},{"s":[135],"t":74}]}},{"ty":0,"nm":"distance","v":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[5.66],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[5.66],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[5.66],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[5.66],"t":38},{"s":[5.66],"t":74}]}},{"ty":0,"nm":"blur","v":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[20],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[20],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[20],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[20],"t":38},{"s":[20],"t":74}]}}]}],"w":214,"h":214,"refId":"1","ind":1}],"v":"5.7.0","fr":60,"op":74.4,"ip":0,"assets":[{"nm":"[Asset] Frame 1000005587","id":"1","layers":[{"ty":0,"nm":"Group 1000004883","sr":1,"st":0,"op":75.4,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[35,19],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[35,19],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[35,19],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[35,19],"t":38},{"s":[35,19],"t":74}]},"s":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":38},{"s":[100,100],"t":74}]},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[64.98,86.06],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[64.98,86.06],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[64.98,86.06],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[64.98,86.06],"t":38},{"s":[64.98,86.06],"t":74}]},"r":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[150.06],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[150.06],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[150.06],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[150.06],"t":38},{"s":[150.06],"t":74}]},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]}},"ef":[],"w":214,"h":214,"refId":"2","ind":1},{"ty":4,"nm":"Vector","sr":1,"st":0,"op":75.4,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[58.53,74.86],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[58.53,74.86],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[58.53,74.86],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[58.53,74.86],"t":38},{"s":[58.53,74.86],"t":74}]},"s":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":38},{"s":[100,100],"t":74}]},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[86.12,91.78],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[86.12,91.78],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[86.12,91.78],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[86.12,91.78],"t":38},{"s":[86.12,91.78],"t":74}]},"r":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[149.17],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[149.17],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[149.17],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[149.17],"t":38},{"s":[149.17],"t":74}]},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]}},"ef":[],"shapes":[{"ty":"sh","bm":0,"hd":false,"nm":"","d":1,"ks":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[1.9603040465828294,-4.474599470848191],[0.18768868531112198,0],[0.04170859673580488,0.22734685533177876],[5.703650603621318,0],[1.8038968088235612,-3.937234176427623],[0.20854298367902444,0],[0.04170859673580488,0.22734685533177876],[5.6410877085176105,0],[2.0124397925025854,-3.2758615063715393],[0,0.744044253813094],[0,0],[6.193726615267026,0.12400737563551568],[0,-6.365711949289805],[0,0],[0.35452307225434154,0.5580331903598206],[0,0],[5.234428890343512,-3.327531246219671],[-3.5243764241755127,-5.311649256387922],[0,0],[0,0],[-3.8476180488780005,0],[0,0],[-2.575505848435952,2.9038393794649924],[0,0],[0,0],[0,6.655062492439342],[0,0],[5.7453592003571226,0.7543782017827204],[0,0]],"o":[[-5.369981829734879,-0.7027084619345889],[-0.07299004428765855,0.17567711548364723],[-0.21897013286297562,0],[-0.8863076806358537,-5.425322684053811],[-4.650508536042245,0],[-0.08341719347160977,0.1860110634532735],[-0.2398244312308781,0],[-0.9592977249235124,-5.3426511002968],[-4.139578226028635,0],[-0.3858045198061952,0.640704774116831],[0,0],[0,-6.169366937866905],[-6.193726615267026,-0.12400737563551568],[0,0],[0,0.6613726700560837],[0,0],[-3.4305320815199516,-5.156640036843528],[-5.411690426470684,3.44120467388556],[0,0],[0,0],[3.910180943981708,3.3895349340374286],[0,0],[3.8476180488780005,0],[0,0],[2.4399529090445857,-3.596213893429955],[0,0],[0,0],[0,-5.76634296705148],[0,0],[0,0]],"v":[[112.13356232421144,47.62916619200765],[100.09020501674776,54.39790211211288],[99.67311904938973,54.676918707292785],[99.22475163447982,54.284228684446994],[87.95300336662854,44.7046589166034],[77.53628133186128,51.40105720092125],[77.07748676776743,51.69040774407079],[76.58741075612173,51.27704982528573],[65.34694393582231,41.8731571729258],[55.58713229964396,47.329481700888486],[54.2107486073624,46.93679167804269],[54.2107486073624,11.791034633343616],[42.95985463787903,0],[31.260593253485762,11.408678558467441],[31.260593253485762,90.99041187255963],[30.040616798963466,91.36243399946618],[21.27138433526049,78.15564849428375],[5.29699178544722,74.48709696506641],[1.9081683006630734,90.3910428903213],[35.11863845154771,140.34534737549487],[41.698169586620935,148.35415705195527],[53.57469250714138,154.71986900124506],[96.9203516648266,153.52113103676842],[111.22640034520768,146.6387216889973],[112.85303561790407,144.6649376267987],[116.14801476003265,138.81592307599018],[122.06020834733299,120.45249753396423],[122.06020834733299,59.26519160580687],[112.15441662257933,47.63950013997728],[112.13356232421144,47.62916619200765]]}],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[1.9603040465828294,-4.474599470848191],[0.18768868531112198,0],[0.04170859673580488,0.22734685533177876],[5.703650603621318,0],[1.8038968088235612,-3.937234176427623],[0.20854298367902444,0],[0.04170859673580488,0.22734685533177876],[5.6410877085176105,0],[2.0124397925025854,-3.2758615063715393],[0,0.744044253813094],[0,0],[6.193726615267026,0.12400737563551568],[0,-6.365711949289805],[0,0],[0.35452307225434154,0.5580331903598206],[0,0],[5.234428890343512,-3.327531246219671],[-3.5243764241755127,-5.311649256387922],[0,0],[0,0],[-3.8476180488780005,0],[0,0],[-2.575505848435952,2.9038393794649924],[0,0],[0,0],[0,6.655062492439342],[0,0],[5.7453592003571226,0.7543782017827204],[0,0]],"o":[[-5.369981829734879,-0.7027084619345889],[-0.07299004428765855,0.17567711548364723],[-0.21897013286297562,0],[-0.8863076806358537,-5.425322684053811],[-4.650508536042245,0],[-0.08341719347160977,0.1860110634532735],[-0.2398244312308781,0],[-0.9592977249235124,-5.3426511002968],[-4.139578226028635,0],[-0.3858045198061952,0.640704774116831],[0,0],[0,-6.169366937866905],[-6.193726615267026,-0.12400737563551568],[0,0],[0,0.6613726700560837],[0,0],[-3.4305320815199516,-5.156640036843528],[-5.411690426470684,3.44120467388556],[0,0],[0,0],[3.910180943981708,3.3895349340374286],[0,0],[3.8476180488780005,0],[0,0],[2.4399529090445857,-3.596213893429955],[0,0],[0,0],[0,-5.76634296705148],[0,0],[0,0]],"v":[[112.13356232421144,47.62916619200765],[100.09020501674776,54.39790211211288],[99.67311904938973,54.676918707292785],[99.22475163447982,54.284228684446994],[87.95300336662854,44.7046589166034],[77.53628133186128,51.40105720092125],[77.07748676776743,51.69040774407079],[76.58741075612173,51.27704982528573],[65.34694393582231,41.8731571729258],[55.58713229964396,47.329481700888486],[54.2107486073624,46.93679167804269],[54.2107486073624,11.791034633343616],[42.95985463787903,0],[31.260593253485762,11.408678558467441],[31.260593253485762,90.99041187255963],[30.040616798963466,91.36243399946618],[21.27138433526049,78.15564849428375],[5.29699178544722,74.48709696506641],[1.9081683006630734,90.3910428903213],[35.11863845154771,140.34534737549487],[41.698169586620935,148.35415705195527],[53.57469250714138,154.71986900124506],[96.9203516648266,153.52113103676842],[111.22640034520768,146.6387216889973],[112.85303561790407,144.6649376267987],[116.14801476003265,138.81592307599018],[122.06020834733299,120.45249753396423],[122.06020834733299,59.26519160580687],[112.15441662257933,47.63950013997728],[112.13356232421144,47.62916619200765]]}],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[1.9603040465828294,-4.474599470848191],[0.18768868531112198,0],[0.04170859673580488,0.22734685533177876],[5.703650603621318,0],[1.8038968088235612,-3.937234176427623],[0.20854298367902444,0],[0.04170859673580488,0.22734685533177876],[5.6410877085176105,0],[2.0124397925025854,-3.2758615063715393],[0,0.744044253813094],[0,0],[6.193726615267026,0.12400737563551568],[0,-6.365711949289805],[0,0],[0.35452307225434154,0.5580331903598206],[0,0],[5.234428890343512,-3.327531246219671],[-3.5243764241755127,-5.311649256387922],[0,0],[0,0],[-3.8476180488780005,0],[0,0],[-2.575505848435952,2.9038393794649924],[0,0],[0,0],[0,6.655062492439342],[0,0],[5.7453592003571226,0.7543782017827204],[0,0]],"o":[[-5.369981829734879,-0.7027084619345889],[-0.07299004428765855,0.17567711548364723],[-0.21897013286297562,0],[-0.8863076806358537,-5.425322684053811],[-4.650508536042245,0],[-0.08341719347160977,0.1860110634532735],[-0.2398244312308781,0],[-0.9592977249235124,-5.3426511002968],[-4.139578226028635,0],[-0.3858045198061952,0.640704774116831],[0,0],[0,-6.169366937866905],[-6.193726615267026,-0.12400737563551568],[0,0],[0,0.6613726700560837],[0,0],[-3.4305320815199516,-5.156640036843528],[-5.411690426470684,3.44120467388556],[0,0],[0,0],[3.910180943981708,3.3895349340374286],[0,0],[3.8476180488780005,0],[0,0],[2.4399529090445857,-3.596213893429955],[0,0],[0,0],[0,-5.76634296705148],[0,0],[0,0]],"v":[[112.13356232421144,47.62916619200765],[100.09020501674776,54.39790211211288],[99.67311904938973,54.676918707292785],[99.22475163447982,54.284228684446994],[87.95300336662854,44.7046589166034],[77.53628133186128,51.40105720092125],[77.07748676776743,51.69040774407079],[76.58741075612173,51.27704982528573],[65.34694393582231,41.8731571729258],[55.58713229964396,47.329481700888486],[54.2107486073624,46.93679167804269],[54.2107486073624,11.791034633343616],[42.95985463787903,0],[31.260593253485762,11.408678558467441],[31.260593253485762,90.99041187255963],[30.040616798963466,91.36243399946618],[21.27138433526049,78.15564849428375],[5.29699178544722,74.48709696506641],[1.9081683006630734,90.3910428903213],[35.11863845154771,140.34534737549487],[41.698169586620935,148.35415705195527],[53.57469250714138,154.71986900124506],[96.9203516648266,153.52113103676842],[111.22640034520768,146.6387216889973],[112.85303561790407,144.6649376267987],[116.14801476003265,138.81592307599018],[122.06020834733299,120.45249753396423],[122.06020834733299,59.26519160580687],[112.15441662257933,47.63950013997728],[112.13356232421144,47.62916619200765]]}],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[1.9603040465828294,-4.474599470848191],[0.18768868531112198,0],[0.04170859673580488,0.22734685533177876],[5.703650603621318,0],[1.8038968088235612,-3.937234176427623],[0.20854298367902444,0],[0.04170859673580488,0.22734685533177876],[5.6410877085176105,0],[2.0124397925025854,-3.2758615063715393],[0,0.744044253813094],[0,0],[6.193726615267026,0.12400737563551568],[0,-6.365711949289805],[0,0],[0.35452307225434154,0.5580331903598206],[0,0],[5.234428890343512,-3.327531246219671],[-3.5243764241755127,-5.311649256387922],[0,0],[0,0],[-3.8476180488780005,0],[0,0],[-2.575505848435952,2.9038393794649924],[0,0],[0,0],[0,6.655062492439342],[0,0],[5.7453592003571226,0.7543782017827204],[0,0]],"o":[[-5.369981829734879,-0.7027084619345889],[-0.07299004428765855,0.17567711548364723],[-0.21897013286297562,0],[-0.8863076806358537,-5.425322684053811],[-4.650508536042245,0],[-0.08341719347160977,0.1860110634532735],[-0.2398244312308781,0],[-0.9592977249235124,-5.3426511002968],[-4.139578226028635,0],[-0.3858045198061952,0.640704774116831],[0,0],[0,-6.169366937866905],[-6.193726615267026,-0.12400737563551568],[0,0],[0,0.6613726700560837],[0,0],[-3.4305320815199516,-5.156640036843528],[-5.411690426470684,3.44120467388556],[0,0],[0,0],[3.910180943981708,3.3895349340374286],[0,0],[3.8476180488780005,0],[0,0],[2.4399529090445857,-3.596213893429955],[0,0],[0,0],[0,-5.76634296705148],[0,0],[0,0]],"v":[[112.13356232421144,47.62916619200765],[100.09020501674776,54.39790211211288],[99.67311904938973,54.676918707292785],[99.22475163447982,54.284228684446994],[87.95300336662854,44.7046589166034],[77.53628133186128,51.40105720092125],[77.07748676776743,51.69040774407079],[76.58741075612173,51.27704982528573],[65.34694393582231,41.8731571729258],[55.58713229964396,47.329481700888486],[54.2107486073624,46.93679167804269],[54.2107486073624,11.791034633343616],[42.95985463787903,0],[31.260593253485762,11.408678558467441],[31.260593253485762,90.99041187255963],[30.040616798963466,91.36243399946618],[21.27138433526049,78.15564849428375],[5.29699178544722,74.48709696506641],[1.9081683006630734,90.3910428903213],[35.11863845154771,140.34534737549487],[41.698169586620935,148.35415705195527],[53.57469250714138,154.71986900124506],[96.9203516648266,153.52113103676842],[111.22640034520768,146.6387216889973],[112.85303561790407,144.6649376267987],[116.14801476003265,138.81592307599018],[122.06020834733299,120.45249753396423],[122.06020834733299,59.26519160580687],[112.15441662257933,47.63950013997728],[112.13356232421144,47.62916619200765]]}],"t":38},{"s":[{"c":true,"i":[[0,0],[1.9603040465828294,-4.474599470848191],[0.18768868531112198,0],[0.04170859673580488,0.22734685533177876],[5.703650603621318,0],[1.8038968088235612,-3.937234176427623],[0.20854298367902444,0],[0.04170859673580488,0.22734685533177876],[5.6410877085176105,0],[2.0124397925025854,-3.2758615063715393],[0,0.744044253813094],[0,0],[6.193726615267026,0.12400737563551568],[0,-6.365711949289805],[0,0],[0.35452307225434154,0.5580331903598206],[0,0],[5.234428890343512,-3.327531246219671],[-3.5243764241755127,-5.311649256387922],[0,0],[0,0],[-3.8476180488780005,0],[0,0],[-2.575505848435952,2.9038393794649924],[0,0],[0,0],[0,6.655062492439342],[0,0],[5.7453592003571226,0.7543782017827204],[0,0]],"o":[[-5.369981829734879,-0.7027084619345889],[-0.07299004428765855,0.17567711548364723],[-0.21897013286297562,0],[-0.8863076806358537,-5.425322684053811],[-4.650508536042245,0],[-0.08341719347160977,0.1860110634532735],[-0.2398244312308781,0],[-0.9592977249235124,-5.3426511002968],[-4.139578226028635,0],[-0.3858045198061952,0.640704774116831],[0,0],[0,-6.169366937866905],[-6.193726615267026,-0.12400737563551568],[0,0],[0,0.6613726700560837],[0,0],[-3.4305320815199516,-5.156640036843528],[-5.411690426470684,3.44120467388556],[0,0],[0,0],[3.910180943981708,3.3895349340374286],[0,0],[3.8476180488780005,0],[0,0],[2.4399529090445857,-3.596213893429955],[0,0],[0,0],[0,-5.76634296705148],[0,0],[0,0]],"v":[[112.13356232421144,47.62916619200765],[100.09020501674776,54.39790211211288],[99.67311904938973,54.676918707292785],[99.22475163447982,54.284228684446994],[87.95300336662854,44.7046589166034],[77.53628133186128,51.40105720092125],[77.07748676776743,51.69040774407079],[76.58741075612173,51.27704982528573],[65.34694393582231,41.8731571729258],[55.58713229964396,47.329481700888486],[54.2107486073624,46.93679167804269],[54.2107486073624,11.791034633343616],[42.95985463787903,0],[31.260593253485762,11.408678558467441],[31.260593253485762,90.99041187255963],[30.040616798963466,91.36243399946618],[21.27138433526049,78.15564849428375],[5.29699178544722,74.48709696506641],[1.9081683006630734,90.3910428903213],[35.11863845154771,140.34534737549487],[41.698169586620935,148.35415705195527],[53.57469250714138,154.71986900124506],[96.9203516648266,153.52113103676842],[111.22640034520768,146.6387216889973],[112.85303561790407,144.6649376267987],[116.14801476003265,138.81592307599018],[122.06020834733299,120.45249753396423],[122.06020834733299,59.26519160580687],[112.15441662257933,47.63950013997728],[112.13356232421144,47.62916619200765]]}],"t":74}]}},{"ty":"st","bm":0,"hd":false,"nm":"","lc":1,"lj":2,"ml":4,"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]},"w":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[5],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[5],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[5],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[5],"t":38},{"s":[5],"t":74}]},"c":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0,0,0],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0,0,0],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0,0,0],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0,0,0],"t":38},{"s":[0,0,0],"t":74}]}},{"ty":"fl","bm":0,"hd":false,"nm":"","c":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[1,1,1],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[1,1,1],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[1,1,1],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[1,1,1],"t":38},{"s":[1,1,1],"t":74}]},"r":2,"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]}}],"ind":2},{"ty":4,"nm":"Frame 1000005587 Bg","sr":1,"st":0,"op":75.4,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[88.62,94.28],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[88.62,94.28],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[88.62,94.28],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[88.62,94.28],"t":38},{"s":[88.62,94.28],"t":74}]},"s":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":38},{"s":[100,100],"t":74}]},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[88.62,94.28],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[88.62,94.28],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[88.62,94.28],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[88.62,94.28],"t":38},{"s":[88.62,94.28],"t":74}]},"r":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0],"t":38},{"s":[0],"t":74}]},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]}},"ef":[],"shapes":[{"ty":"sh","bm":0,"hd":false,"nm":"","d":1,"ks":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[177.24,0],[177.24,188.56],[0,188.56],[0,0]]}],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[177.24,0],[177.24,188.56],[0,188.56],[0,0]]}],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[177.24,0],[177.24,188.56],[0,188.56],[0,0]]}],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[177.24,0],[177.24,188.56],[0,188.56],[0,0]]}],"t":38},{"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0]],"v":[[177.24,0],[177.24,188.56],[0,188.56],[0,0]]}],"t":74}]}}],"ind":3}]},{"nm":"[Asset] Group 1000004883","id":"2","layers":[{"ty":4,"nm":"Vector 1123","sr":1,"st":0,"op":75.4,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[8.85,16.78],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[8.85,16.78],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[8.85,16.78],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[8.85,16.78],"t":38},{"s":[8.85,16.78],"t":74}]},"s":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":38},{"s":[100,100],"t":74}]},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[15.58,19.03],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[15.58,19.03],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[15.58,19.03],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[15.58,19.03],"t":38},{"s":[15.58,19.03],"t":74}]},"r":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[-152.61],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[-152.61],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[-152.61],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[-152.61],"t":38},{"s":[-152.61],"t":74}]},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]}},"ef":[],"shapes":[{"ty":"sh","bm":0,"hd":false,"nm":"","d":1,"ks":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":38},{"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":74}]}},{"ty":"sh","bm":0,"hd":false,"nm":"","d":1,"ks":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":38},{"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":74}]}},{"ty":"sh","bm":0,"hd":false,"nm":"","d":1,"ks":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":38},{"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":74}]}},{"ty":"fl","bm":0,"hd":false,"nm":"","c":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0,0,0],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0,0,0],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0,0,0],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0,0,0],"t":38},{"s":[0,0,0],"t":74}]},"r":1,"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]}}],"ind":1},{"ty":4,"nm":"Vector 1122","sr":1,"st":0,"op":75.4,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[8.85,16.78],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[8.85,16.78],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[8.85,16.78],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[8.85,16.78],"t":38},{"s":[8.85,16.78],"t":74}]},"s":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":38},{"s":[100,100],"t":74}]},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[35.31,19.03],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[35.31,19.03],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[35.31,19.03],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[35.31,19.03],"t":38},{"s":[35.31,19.03],"t":74}]},"r":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[-152.61],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[-152.61],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[-152.61],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[-152.61],"t":38},{"s":[-152.61],"t":74}]},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]}},"ef":[],"shapes":[{"ty":"sh","bm":0,"hd":false,"nm":"","d":1,"ks":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":38},{"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":74}]}},{"ty":"sh","bm":0,"hd":false,"nm":"","d":1,"ks":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":38},{"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":74}]}},{"ty":"sh","bm":0,"hd":false,"nm":"","d":1,"ks":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":38},{"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":74}]}},{"ty":"fl","bm":0,"hd":false,"nm":"","c":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0,0,0],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0,0,0],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0,0,0],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0,0,0],"t":38},{"s":[0,0,0],"t":74}]},"r":1,"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]}}],"ind":2},{"ty":4,"nm":"Vector 1121","sr":1,"st":0,"op":75.4,"ip":0,"hd":false,"ddd":0,"bm":0,"hasMask":false,"ao":0,"ks":{"a":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[8.85,16.78],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[8.85,16.78],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[8.85,16.78],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[8.85,16.78],"t":38},{"s":[8.85,16.78],"t":74}]},"s":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100,100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100,100],"t":38},{"s":[100,100],"t":74}]},"sk":{"a":0,"k":0},"p":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[54.52,19.03],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[54.52,19.03],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[54.52,19.03],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[54.52,19.03],"t":38},{"s":[54.52,19.03],"t":74}]},"r":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[-152.61],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[-152.61],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[-152.61],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[-152.61],"t":38},{"s":[-152.61],"t":74}]},"sa":{"a":0,"k":0},"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]}},"ef":[],"shapes":[{"ty":"sh","bm":0,"hd":false,"nm":"","d":1,"ks":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":38},{"s":[{"c":true,"i":[[0,0],[1.22,-0.64],[-0.64,-1.22],[0,0]],"o":[[-0.64,-1.22],[-1.22,0.64],[0,0],[0,0]],"v":[[2.21,-1.17],[-1.17,-2.21],[-2.21,1.17],[2.21,-1.17]]}],"t":74}]}},{"ty":"sh","bm":0,"hd":false,"nm":"","d":1,"ks":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":38},{"s":[{"c":true,"i":[[0,0],[-1.22,0.64],[0.64,1.22],[0,0]],"o":[[0.64,1.22],[1.22,-0.64],[0,0],[0,0]],"v":[[15.49,34.73],[18.87,35.78],[19.91,32.4],[15.49,34.73]]}],"t":74}]}},{"ty":"sh","bm":0,"hd":false,"nm":"","d":1,"ks":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":38},{"s":[{"c":true,"i":[[0,0],[0,0],[0,0],[0,0],[0,0]],"o":[[0,0],[0,0],[0,0],[0,0],[0,0]],"v":[[-2.21,1.17],[15.49,34.73],[19.91,32.4],[2.21,-1.17],[-2.21,1.17]]}],"t":74}]}},{"ty":"fl","bm":0,"hd":false,"nm":"","c":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0,0,0],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[0,0,0],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0,0,0],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[0,0,0],"t":38},{"s":[0,0,0],"t":74}]},"r":1,"o":{"a":1,"k":[{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":0},{"o":{"x":0.32,"y":0},"i":{"x":0.67,"y":0},"s":[100],"t":1},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":37},{"o":{"x":0.33,"y":1},"i":{"x":0.68,"y":1},"s":[100],"t":38},{"s":[100],"t":74}]}}],"ind":3}]}]}')}}]);